\hypertarget{classuavobject_1_1_u_a_v_object}{\section{uavobject.\-U\-A\-V\-Object \-Class \-Reference}
\label{classuavobject_1_1_u_a_v_object}\index{uavobject.\-U\-A\-V\-Object@{uavobject.\-U\-A\-V\-Object}}
}
\subsection*{\-Public \-Member \-Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classuavobject_1_1_u_a_v_object_a6744d21db1b6b3009810ccc3699de1e9}{\-\_\-\-\_\-init\-\_\-\-\_\-}
\item 
def \hyperlink{classuavobject_1_1_u_a_v_object_a25042c8f435aa4ea70a6172834795dc1}{add\-Field}
\item 
def \hyperlink{classuavobject_1_1_u_a_v_object_a2c184fbd9d725d8ffeb6c7f3ea4ebf64}{read}
\item 
def \hyperlink{classuavobject_1_1_u_a_v_object_a11ee3cbbc5b35d2caf571e7d1e4391ac}{write}
\end{DoxyCompactItemize}
\subsection*{\-Data \-Fields}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classuavobject_1_1_u_a_v_object_a00f0fd345df36ab7ff5e70d12ed90ce8}{metadata}
\item 
\hyperlink{classuavobject_1_1_u_a_v_object_aff7e18dd61e0464e32b141d3b123209c}{obj\-Id}
\item 
\hyperlink{classuavobject_1_1_u_a_v_object_afb8864f141f2aca9fefa152fd64aeebe}{inst\-Id}
\item 
\hyperlink{classuavobject_1_1_u_a_v_object_af9ce81de37f806ae8b2b50bfa9e6c72b}{fields}
\end{DoxyCompactItemize}


\subsection{\-Detailed \-Description}


\-Definition at line 103 of file uavobject.\-py.



\subsection{\-Constructor \& \-Destructor \-Documentation}
\hypertarget{classuavobject_1_1_u_a_v_object_a6744d21db1b6b3009810ccc3699de1e9}{\index{uavobject\-::\-U\-A\-V\-Object@{uavobject\-::\-U\-A\-V\-Object}!\-\_\-\-\_\-init\-\_\-\-\_\-@{\-\_\-\-\_\-init\-\_\-\-\_\-}}
\index{\-\_\-\-\_\-init\-\_\-\-\_\-@{\-\_\-\-\_\-init\-\_\-\-\_\-}!uavobject::UAVObject@{uavobject\-::\-U\-A\-V\-Object}}
\subsubsection[{\-\_\-\-\_\-init\-\_\-\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}def {\bf uavobject.\-U\-A\-V\-Object.\-\_\-\-\_\-init\-\_\-\-\_\-} (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{obj\-Id}
\end{DoxyParamCaption}
)}}\label{classuavobject_1_1_u_a_v_object_a6744d21db1b6b3009810ccc3699de1e9}


\-Definition at line 104 of file uavobject.\-py.



\subsection{\-Member \-Function \-Documentation}
\hypertarget{classuavobject_1_1_u_a_v_object_a25042c8f435aa4ea70a6172834795dc1}{\index{uavobject\-::\-U\-A\-V\-Object@{uavobject\-::\-U\-A\-V\-Object}!add\-Field@{add\-Field}}
\index{add\-Field@{add\-Field}!uavobject::UAVObject@{uavobject\-::\-U\-A\-V\-Object}}
\subsubsection[{add\-Field}]{\setlength{\rightskip}{0pt plus 5cm}def {\bf uavobject.\-U\-A\-V\-Object.\-add\-Field} (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{field}
\end{DoxyParamCaption}
)}}\label{classuavobject_1_1_u_a_v_object_a25042c8f435aa4ea70a6172834795dc1}


\-Definition at line 110 of file uavobject.\-py.

\hypertarget{classuavobject_1_1_u_a_v_object_a2c184fbd9d725d8ffeb6c7f3ea4ebf64}{\index{uavobject\-::\-U\-A\-V\-Object@{uavobject\-::\-U\-A\-V\-Object}!read@{read}}
\index{read@{read}!uavobject::UAVObject@{uavobject\-::\-U\-A\-V\-Object}}
\subsubsection[{read}]{\setlength{\rightskip}{0pt plus 5cm}def {\bf uavobject.\-U\-A\-V\-Object.\-read} (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}\label{classuavobject_1_1_u_a_v_object_a2c184fbd9d725d8ffeb6c7f3ea4ebf64}
\begin{DoxyVerb}__NATIVE__
uint8_t numBytes;
UAVObjHandle objHandle;
uint32_t objId;
uint16_t instId;
pPmObj_t self;
pPmObj_t attrs;
pPmObj_t field;
pPmObj_t fields;
pPmObj_t fieldName;
pPmObj_t value;
PmReturn_t retval;
uint32_t numFields;
uint32_t fieldIdx;
uint32_t dataIdx;
uint32_t valueIdx;
uint32_t type;  
uint32_t numElements;   
uint8_t const *tmpStr;
int16_t *tmpInt16;
int32_t *tmpInt32;
float *tmpFloat;

// Get dictionary of class attributes                
self = NATIVE_GET_LOCAL(0);
attrs = (pPmObj_t)((pPmInstance_t)self)->cli_attrs;

// Get object ID
tmpStr = (uint8_t const *)"objId";
retval = string_new(&tmpStr, &fieldName); PM_RETURN_IF_ERROR(retval);  
retval = dict_getItem(attrs, fieldName, &field); PM_RETURN_IF_ERROR(retval);       
objId = ((pPmInt_t) field)->val; 

// Get the instance ID
tmpStr = (uint8_t const *)"instId";
retval = string_new(&tmpStr, &fieldName); PM_RETURN_IF_ERROR(retval);
retval = dict_getItem(attrs, fieldName, &field); PM_RETURN_IF_ERROR(retval);      
instId = ((pPmInt_t) field)->val;    

// Get handle and number of bytes in the object
objHandle = UAVObjGetByID(objId);
numBytes = UAVObjGetNumBytes(objHandle);
uint8_t data[numBytes];

// Read object data
UAVObjGetInstanceData(objHandle, instId, data);

// Get dictionary of fields
tmpStr = (uint8_t const *)"fields";
retval = string_new(&tmpStr, &fieldName); PM_RETURN_IF_ERROR(retval);     
retval = dict_getItem(attrs, fieldName, &fields); PM_RETURN_IF_ERROR(retval);
numFields = ((pPmList_t) fields)->length;    

// Process each field
dataIdx = 0;
for (fieldIdx = 0; fieldIdx < numFields; ++fieldIdx)
{		
        // Get field
        retval = list_getItem(fields, fieldIdx, &field); PM_RETURN_IF_ERROR(retval);
        attrs = (pPmObj_t)((pPmInstance_t)field)->cli_attrs;
        // Get type
        tmpStr = (uint8_t const *)"ftype";
        retval = string_new(&tmpStr, &fieldName); PM_RETURN_IF_ERROR(retval); 
        retval = dict_getItem(attrs, fieldName, &field); PM_RETURN_IF_ERROR(retval);
        type = ((pPmInt_t) field)->val;   
        // Get number of elements
        tmpStr = (uint8_t const *)"numElements";
        retval = string_new(&tmpStr, &fieldName); PM_RETURN_IF_ERROR(retval); 
        retval = dict_getItem(attrs, fieldName, &field); PM_RETURN_IF_ERROR(retval);
        numElements = ((pPmInt_t) field)->val;
        // Get value
        tmpStr = (uint8_t const *)"value";
        retval = string_new(&tmpStr, &fieldName); PM_RETURN_IF_ERROR(retval); 
        retval = dict_getItem(attrs, fieldName, &field); PM_RETURN_IF_ERROR(retval); 
        // Set value for each element
        for (valueIdx = 0; valueIdx < numElements; ++valueIdx)
        {		
// Update value based on type    	
switch (type)  
{
        case TYPE_INT8: 
        case TYPE_UINT8:
        case TYPE_ENUM: 
                retval = int_new(data[dataIdx], &value); PM_RETURN_IF_ERROR(retval);                       
                dataIdx = dataIdx + 1;
                break;
        case TYPE_INT16:
        case TYPE_UINT16:
                tmpInt16 = (int16_t*)(&data[dataIdx]);
                retval = int_new(*tmpInt16, &value); PM_RETURN_IF_ERROR(retval);    
                dataIdx = dataIdx + 2;
                break;       
        case TYPE_INT32:
        case TYPE_UINT32:
                tmpInt32 = (int32_t*)(&data[dataIdx]);
                retval = int_new(*tmpInt32, &value); PM_RETURN_IF_ERROR(retval);    
                dataIdx = dataIdx + 4;
                break;  
        case TYPE_FLOAT32:
                tmpFloat = (float*)(&data[dataIdx]);
                retval = float_new(*tmpFloat, &value); PM_RETURN_IF_ERROR(retval);    
                dataIdx = dataIdx + 4;
                break;    
}
// Set value 
if ( OBJ_GET_TYPE(field) == OBJ_TYPE_LST )
{
        retval = list_setItem(field, valueIdx, value); PM_RETURN_IF_ERROR(retval); 
}
else
{
        tmpStr = (uint8_t const *)"value";
        retval = string_new(&tmpStr, &fieldName); PM_RETURN_IF_ERROR(retval); 
        retval = dict_setItem(attrs, fieldName, value); PM_RETURN_IF_ERROR(retval); 
}
        }
}

// Done
return PM_RET_OK;
\end{DoxyVerb}
 

\-Definition at line 151 of file uavobject.\-py.

\hypertarget{classuavobject_1_1_u_a_v_object_a11ee3cbbc5b35d2caf571e7d1e4391ac}{\index{uavobject\-::\-U\-A\-V\-Object@{uavobject\-::\-U\-A\-V\-Object}!write@{write}}
\index{write@{write}!uavobject::UAVObject@{uavobject\-::\-U\-A\-V\-Object}}
\subsubsection[{write}]{\setlength{\rightskip}{0pt plus 5cm}def {\bf uavobject.\-U\-A\-V\-Object.\-write} (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}\label{classuavobject_1_1_u_a_v_object_a11ee3cbbc5b35d2caf571e7d1e4391ac}
\begin{DoxyVerb}__NATIVE__
uint8_t numBytes;
UAVObjHandle objHandle;
uint32_t objId;
uint16_t instId;
pPmObj_t self;
pPmObj_t attrs;
pPmObj_t field;
pPmObj_t fields;
pPmObj_t fieldName;
pPmObj_t value;
PmReturn_t retval;
uint32_t numFields;
uint32_t fieldIdx;
uint32_t dataIdx;
uint32_t valueIdx;
uint32_t type;  
uint32_t numElements;  
uint8_t const *tmpStr;
int8_t tmpInt8 = 0;
int16_t tmpInt16;
int32_t tmpInt32;
float tmpFloat;		

// Get dictionary of class attributes                
self = NATIVE_GET_LOCAL(0);
attrs = (pPmObj_t)((pPmInstance_t)self)->cli_attrs;

// Get object ID
tmpStr = (uint8_t const *)"objId";
retval = string_new(&tmpStr, &fieldName); PM_RETURN_IF_ERROR(retval);  
retval = dict_getItem(attrs, fieldName, &field); PM_RETURN_IF_ERROR(retval);       
objId = ((pPmInt_t) field)->val; 

// Get the instance ID
tmpStr = (uint8_t const *)"instId";
retval = string_new(&tmpStr, &fieldName); PM_RETURN_IF_ERROR(retval);
retval = dict_getItem(attrs, fieldName, &field); PM_RETURN_IF_ERROR(retval);      
instId = ((pPmInt_t) field)->val;    

// Get handle and number of bytes in the object
objHandle = UAVObjGetByID(objId);
numBytes = UAVObjGetNumBytes(objHandle);
uint8_t data[numBytes];
        
// Get dictionary of fields
tmpStr = (uint8_t const *)"fields";
retval = string_new(&tmpStr, &fieldName); PM_RETURN_IF_ERROR(retval);     
retval = dict_getItem(attrs, fieldName, &fields); PM_RETURN_IF_ERROR(retval);
numFields = ((pPmList_t) fields)->length;    

// Process each field
dataIdx = 0;
for (fieldIdx = 0; fieldIdx < numFields; ++fieldIdx)
{		
        // Get field
        retval = list_getItem(fields, fieldIdx, &field); PM_RETURN_IF_ERROR(retval);
        attrs = (pPmObj_t)((pPmInstance_t)field)->cli_attrs;
        // Get type
        tmpStr = (uint8_t const *)"ftype";
        retval = string_new(&tmpStr, &fieldName); PM_RETURN_IF_ERROR(retval); 
        retval = dict_getItem(attrs, fieldName, &field); PM_RETURN_IF_ERROR(retval);
        type = ((pPmInt_t) field)->val;   
        // Get number of elements
        tmpStr = (uint8_t const *)"numElements";
        retval = string_new(&tmpStr, &fieldName); PM_RETURN_IF_ERROR(retval); 
        retval = dict_getItem(attrs, fieldName, &field); PM_RETURN_IF_ERROR(retval);
        numElements = ((pPmInt_t) field)->val;
        // Get value
        tmpStr = (uint8_t const *)"value";
        retval = string_new(&tmpStr, &fieldName); PM_RETURN_IF_ERROR(retval); 
        retval = dict_getItem(attrs, fieldName, &field); PM_RETURN_IF_ERROR(retval); 
        // Set value for each element
        for (valueIdx = 0; valueIdx < numElements; ++valueIdx)
        {
// Get value
if ( OBJ_GET_TYPE(field) == OBJ_TYPE_LST )
{
        retval = list_getItem(field, valueIdx, &value); PM_RETURN_IF_ERROR(retval); 
}
else
        value = field;
// Update value based on type    
switch (type)  
{
        case TYPE_INT8: 
        case TYPE_UINT8:
        case TYPE_ENUM:       
                if ( OBJ_GET_TYPE(value) == OBJ_TYPE_INT )  
                {
                        tmpInt8 = (int8_t)((pPmInt_t)value)->val;
                }
                else if ( OBJ_GET_TYPE(value) == OBJ_TYPE_FLT )  
                {
                    tmpInt8 = (int8_t)((pPmFloat_t)value)->val;  
                } 
                memcpy( &data[dataIdx], &tmpInt8, 1 );
                dataIdx = dataIdx + 1;
                break;
        case TYPE_INT16:
        case TYPE_UINT16:
                if ( OBJ_GET_TYPE(value) == OBJ_TYPE_INT )  
                {
                        tmpInt16 = (int16_t)((pPmInt_t)value)->val;
                }
                else if ( OBJ_GET_TYPE(value) == OBJ_TYPE_FLT )  
                {
                    tmpInt16 = (int16_t)((pPmFloat_t)value)->val;  
                } 					
                memcpy( &data[dataIdx], &tmpInt16, 2 );
                dataIdx = dataIdx + 2;
                break;       
        case TYPE_INT32:
        case TYPE_UINT32:
                if ( OBJ_GET_TYPE(value) == OBJ_TYPE_INT )  
                {
                        tmpInt32 = (int32_t)((pPmInt_t)value)->val;
                }
                else if ( OBJ_GET_TYPE(value) == OBJ_TYPE_FLT )  
                {
                    tmpInt32 = (int32_t)((pPmFloat_t)value)->val;  
                } 						
                memcpy( &data[dataIdx], &tmpInt32, 4 );
                dataIdx = dataIdx + 4;
                break;  
        case TYPE_FLOAT32:
                if ( OBJ_GET_TYPE(value) == OBJ_TYPE_INT )  
                {
                        tmpFloat = (float)((pPmInt_t)value)->val;
                }
                else if ( OBJ_GET_TYPE(value) == OBJ_TYPE_FLT )  
                {
                    tmpFloat = (float)((pPmFloat_t)value)->val;  
                } 						
                memcpy( &data[dataIdx], &tmpFloat, 4 );
                dataIdx = dataIdx + 4;
                break;    
}
        }
}

// Write object data
UAVObjSetInstanceData(objHandle, instId, data);

// Done
return PM_RET_OK;
\end{DoxyVerb}
 

\-Definition at line 275 of file uavobject.\-py.



\subsection{\-Field \-Documentation}
\hypertarget{classuavobject_1_1_u_a_v_object_af9ce81de37f806ae8b2b50bfa9e6c72b}{\index{uavobject\-::\-U\-A\-V\-Object@{uavobject\-::\-U\-A\-V\-Object}!fields@{fields}}
\index{fields@{fields}!uavobject::UAVObject@{uavobject\-::\-U\-A\-V\-Object}}
\subsubsection[{fields}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uavobject.\-U\-A\-V\-Object\-::fields}}}\label{classuavobject_1_1_u_a_v_object_af9ce81de37f806ae8b2b50bfa9e6c72b}


\-Definition at line 104 of file uavobject.\-py.

\hypertarget{classuavobject_1_1_u_a_v_object_afb8864f141f2aca9fefa152fd64aeebe}{\index{uavobject\-::\-U\-A\-V\-Object@{uavobject\-::\-U\-A\-V\-Object}!inst\-Id@{inst\-Id}}
\index{inst\-Id@{inst\-Id}!uavobject::UAVObject@{uavobject\-::\-U\-A\-V\-Object}}
\subsubsection[{inst\-Id}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uavobject.\-U\-A\-V\-Object\-::inst\-Id}}}\label{classuavobject_1_1_u_a_v_object_afb8864f141f2aca9fefa152fd64aeebe}


\-Definition at line 104 of file uavobject.\-py.

\hypertarget{classuavobject_1_1_u_a_v_object_a00f0fd345df36ab7ff5e70d12ed90ce8}{\index{uavobject\-::\-U\-A\-V\-Object@{uavobject\-::\-U\-A\-V\-Object}!metadata@{metadata}}
\index{metadata@{metadata}!uavobject::UAVObject@{uavobject\-::\-U\-A\-V\-Object}}
\subsubsection[{metadata}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uavobject.\-U\-A\-V\-Object\-::metadata}}}\label{classuavobject_1_1_u_a_v_object_a00f0fd345df36ab7ff5e70d12ed90ce8}


\-Definition at line 104 of file uavobject.\-py.

\hypertarget{classuavobject_1_1_u_a_v_object_aff7e18dd61e0464e32b141d3b123209c}{\index{uavobject\-::\-U\-A\-V\-Object@{uavobject\-::\-U\-A\-V\-Object}!obj\-Id@{obj\-Id}}
\index{obj\-Id@{obj\-Id}!uavobject::UAVObject@{uavobject\-::\-U\-A\-V\-Object}}
\subsubsection[{obj\-Id}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uavobject.\-U\-A\-V\-Object\-::obj\-Id}}}\label{classuavobject_1_1_u_a_v_object_aff7e18dd61e0464e32b141d3b123209c}


\-Definition at line 104 of file uavobject.\-py.



\-The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
/home/jb/code/\-Tau\-Labs/flight/\-Modules/\-Flight\-Plan/lib/\hyperlink{uavobject_8py}{uavobject.\-py}\end{DoxyCompactItemize}
