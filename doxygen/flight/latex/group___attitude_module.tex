\hypertarget{group___attitude_module}{\section{\-Attitude and state estimation module}
\label{group___attitude_module}\index{\-Attitude and state estimation module@{\-Attitude and state estimation module}}
}


\-Full attitude estimation method with selectable algorithms.  


\subsection*{\-Data \-Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structcomplementary__filter__state}{complementary\-\_\-filter\-\_\-state}
\end{DoxyCompactItemize}
\subsection*{\-Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{group___attitude_module_ga2a3dfab57b52ff023f9197d9afe06ff4}{complementary\-\_\-filter\-\_\-status} \{ \hyperlink{group___attitude_module_gga2a3dfab57b52ff023f9197d9afe06ff4a1b205074eafd92be8fbb945482e2c5c2}{\-C\-F\-\_\-\-P\-O\-W\-E\-R\-O\-N}, 
\hyperlink{group___attitude_module_gga2a3dfab57b52ff023f9197d9afe06ff4aee904149480808a1828f1e546b365411}{\-C\-F\-\_\-\-I\-N\-I\-T\-I\-A\-L\-I\-Z\-I\-N\-G}, 
\hyperlink{group___attitude_module_gga2a3dfab57b52ff023f9197d9afe06ff4aaeeddedb486c25be85918925490e4f7c}{\-C\-F\-\_\-\-A\-R\-M\-I\-N\-G}, 
\hyperlink{group___attitude_module_gga2a3dfab57b52ff023f9197d9afe06ff4acfd7a1440ea5820f0b90b2943586a542}{\-C\-F\-\_\-\-N\-O\-R\-M\-A\-L}
 \}
\end{DoxyCompactItemize}
\subsection*{\-Functions}
\begin{DoxyCompactItemize}
\item 
int32\-\_\-t \hyperlink{group___attitude_module_gab3e9047ab7c9b02bd61091a4a2e8f572}{\-Attitude\-Initialize} (void)
\item 
int32\-\_\-t \hyperlink{group___attitude_module_gaaa0dba388f0dec215cb7cbe55ad0356b}{\-Attitude\-Start} (void)
\item 
\hyperlink{group___attitude_module_ga785ebe70505bccce89d20aacd7996a21}{\-M\-O\-D\-U\-L\-E\-\_\-\-I\-N\-I\-T\-C\-A\-L\-L} (\hyperlink{group___attitude_module_gab3e9047ab7c9b02bd61091a4a2e8f572}{\-Attitude\-Initialize}, \hyperlink{group___attitude_module_gaaa0dba388f0dec215cb7cbe55ad0356b}{\-Attitude\-Start})
\end{DoxyCompactItemize}
\subsection*{\-Variables}
\begin{DoxyCompactItemize}
\item 
const uint32\-\_\-t \hyperlink{group___attitude_module_ga5c62d2531c3e579a49d025858bd52a83}{\-S\-E\-N\-S\-O\-R\-\_\-\-Q\-U\-E\-U\-E\-\_\-\-S\-I\-Z\-E} = 10
\item 
float \hyperlink{group___attitude_module_ga62b409271acba166dbf31b4fed9af697}{\-T} \mbox{[}3\mbox{]}
\begin{DoxyCompactList}\small\item\em \-Convert the \-G\-P\-S \-L\-L\-A position into \-N\-E\-D coordinates. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{\-Detailed \-Description}
\-Full attitude estimation method with selectable algorithms. \-Based on the value of \-State\-Estimation this module will select between the complementary filter and the \-I\-N\-S\-G\-P\-S to fuse data from \hyperlink{group___gyros}{\-Gyros}, \hyperlink{group___accels}{\-Accels}, \hyperlink{group___magnetometer}{\-Magnetometer}, \hyperlink{group___g_p_s_position}{\-G\-P\-S\-Position}, \hyperlink{group___g_p_s_velocity}{\-G\-P\-S\-Velocity}, and \hyperlink{group___baro_altitude}{\-Baro\-Altitude} to estimation \hyperlink{group___position_actual}{\-Position\-Actual}, \hyperlink{group___velocity_actual}{\-Velocity\-Actual} and \hyperlink{group___attitude_actual}{\-Attitude\-Actual}. 

\subsection{\-Enumeration \-Type \-Documentation}
\hypertarget{group___attitude_module_ga2a3dfab57b52ff023f9197d9afe06ff4}{\index{\-Attitude and state estimation module@{\-Attitude and state estimation module}!complementary\-\_\-filter\-\_\-status@{complementary\-\_\-filter\-\_\-status}}
\index{complementary\-\_\-filter\-\_\-status@{complementary\-\_\-filter\-\_\-status}!Attitude and state estimation module@{\-Attitude and state estimation module}}
\subsubsection[{complementary\-\_\-filter\-\_\-status}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf complementary\-\_\-filter\-\_\-status}}}\label{group___attitude_module_ga2a3dfab57b52ff023f9197d9afe06ff4}
\begin{Desc}
\item[\-Enumerator\-: ]\par
\begin{description}
\index{\-C\-F\-\_\-\-P\-O\-W\-E\-R\-O\-N@{\-C\-F\-\_\-\-P\-O\-W\-E\-R\-O\-N}!\-Attitude and state estimation module@{\-Attitude and state estimation module}}\index{\-Attitude and state estimation module@{\-Attitude and state estimation module}!\-C\-F\-\_\-\-P\-O\-W\-E\-R\-O\-N@{\-C\-F\-\_\-\-P\-O\-W\-E\-R\-O\-N}}\item[{\em 
\hypertarget{group___attitude_module_gga2a3dfab57b52ff023f9197d9afe06ff4a1b205074eafd92be8fbb945482e2c5c2}{\-C\-F\-\_\-\-P\-O\-W\-E\-R\-O\-N}\label{group___attitude_module_gga2a3dfab57b52ff023f9197d9afe06ff4a1b205074eafd92be8fbb945482e2c5c2}
}]\index{\-C\-F\-\_\-\-I\-N\-I\-T\-I\-A\-L\-I\-Z\-I\-N\-G@{\-C\-F\-\_\-\-I\-N\-I\-T\-I\-A\-L\-I\-Z\-I\-N\-G}!\-Attitude and state estimation module@{\-Attitude and state estimation module}}\index{\-Attitude and state estimation module@{\-Attitude and state estimation module}!\-C\-F\-\_\-\-I\-N\-I\-T\-I\-A\-L\-I\-Z\-I\-N\-G@{\-C\-F\-\_\-\-I\-N\-I\-T\-I\-A\-L\-I\-Z\-I\-N\-G}}\item[{\em 
\hypertarget{group___attitude_module_gga2a3dfab57b52ff023f9197d9afe06ff4aee904149480808a1828f1e546b365411}{\-C\-F\-\_\-\-I\-N\-I\-T\-I\-A\-L\-I\-Z\-I\-N\-G}\label{group___attitude_module_gga2a3dfab57b52ff023f9197d9afe06ff4aee904149480808a1828f1e546b365411}
}]\index{\-C\-F\-\_\-\-A\-R\-M\-I\-N\-G@{\-C\-F\-\_\-\-A\-R\-M\-I\-N\-G}!\-Attitude and state estimation module@{\-Attitude and state estimation module}}\index{\-Attitude and state estimation module@{\-Attitude and state estimation module}!\-C\-F\-\_\-\-A\-R\-M\-I\-N\-G@{\-C\-F\-\_\-\-A\-R\-M\-I\-N\-G}}\item[{\em 
\hypertarget{group___attitude_module_gga2a3dfab57b52ff023f9197d9afe06ff4aaeeddedb486c25be85918925490e4f7c}{\-C\-F\-\_\-\-A\-R\-M\-I\-N\-G}\label{group___attitude_module_gga2a3dfab57b52ff023f9197d9afe06ff4aaeeddedb486c25be85918925490e4f7c}
}]\index{\-C\-F\-\_\-\-N\-O\-R\-M\-A\-L@{\-C\-F\-\_\-\-N\-O\-R\-M\-A\-L}!\-Attitude and state estimation module@{\-Attitude and state estimation module}}\index{\-Attitude and state estimation module@{\-Attitude and state estimation module}!\-C\-F\-\_\-\-N\-O\-R\-M\-A\-L@{\-C\-F\-\_\-\-N\-O\-R\-M\-A\-L}}\item[{\em 
\hypertarget{group___attitude_module_gga2a3dfab57b52ff023f9197d9afe06ff4acfd7a1440ea5820f0b90b2943586a542}{\-C\-F\-\_\-\-N\-O\-R\-M\-A\-L}\label{group___attitude_module_gga2a3dfab57b52ff023f9197d9afe06ff4acfd7a1440ea5820f0b90b2943586a542}
}]\end{description}
\end{Desc}



\-Definition at line 87 of file attitude.\-c.



\subsection{\-Function \-Documentation}
\hypertarget{group___attitude_module_gab3e9047ab7c9b02bd61091a4a2e8f572}{\index{\-Attitude and state estimation module@{\-Attitude and state estimation module}!\-Attitude\-Initialize@{\-Attitude\-Initialize}}
\index{\-Attitude\-Initialize@{\-Attitude\-Initialize}!Attitude and state estimation module@{\-Attitude and state estimation module}}
\subsubsection[{\-Attitude\-Initialize}]{\setlength{\rightskip}{0pt plus 5cm}int32\-\_\-t {\bf \-Attitude\-Initialize} (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{group___attitude_module_gab3e9047ab7c9b02bd61091a4a2e8f572}
\-A\-P\-I for sensor fusion algorithms\-: \-Configure(x\-Queue\-Handle gyro, x\-Queue\-Handle accel, x\-Queue\-Handle mag, x\-Queue\-Handle baro) \-Stores all the queues the algorithm will pull data from \-Finalize\-Sensors() -\/-\/ before saving the sensors modifies them based on internal state (gyro bias) \-Update() -\/-\/ queries queues and updates the attitude estiamte \-Initialise the module. \-Called before the start function \begin{DoxyReturn}{\-Returns}
0 on success or -\/1 if initialisation failed 
\end{DoxyReturn}


\-Definition at line 187 of file attitude.\-c.

\hypertarget{group___attitude_module_gaaa0dba388f0dec215cb7cbe55ad0356b}{\index{\-Attitude and state estimation module@{\-Attitude and state estimation module}!\-Attitude\-Start@{\-Attitude\-Start}}
\index{\-Attitude\-Start@{\-Attitude\-Start}!Attitude and state estimation module@{\-Attitude and state estimation module}}
\subsubsection[{\-Attitude\-Start}]{\setlength{\rightskip}{0pt plus 5cm}int32\-\_\-t {\bf \-Attitude\-Start} (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{group___attitude_module_gaaa0dba388f0dec215cb7cbe55ad0356b}
\-Start the task. \-Expects all objects to be initialized by this point. \begin{DoxyReturn}{\-Returns}
0 on success or -\/1 if initialisation failed 
\end{DoxyReturn}


\-Definition at line 215 of file attitude.\-c.

\hypertarget{group___attitude_module_ga785ebe70505bccce89d20aacd7996a21}{\index{\-Attitude and state estimation module@{\-Attitude and state estimation module}!\-M\-O\-D\-U\-L\-E\-\_\-\-I\-N\-I\-T\-C\-A\-L\-L@{\-M\-O\-D\-U\-L\-E\-\_\-\-I\-N\-I\-T\-C\-A\-L\-L}}
\index{\-M\-O\-D\-U\-L\-E\-\_\-\-I\-N\-I\-T\-C\-A\-L\-L@{\-M\-O\-D\-U\-L\-E\-\_\-\-I\-N\-I\-T\-C\-A\-L\-L}!Attitude and state estimation module@{\-Attitude and state estimation module}}
\subsubsection[{\-M\-O\-D\-U\-L\-E\-\_\-\-I\-N\-I\-T\-C\-A\-L\-L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-M\-O\-D\-U\-L\-E\-\_\-\-I\-N\-I\-T\-C\-A\-L\-L} (
\begin{DoxyParamCaption}
\item[{{\bf \-Attitude\-Initialize}}]{, }
\item[{{\bf \-Attitude\-Start}}]{}
\end{DoxyParamCaption}
)}}\label{group___attitude_module_ga785ebe70505bccce89d20aacd7996a21}
\-Module thread, should not return. 

\-Definition at line 261 of file attitude.\-c.



\subsection{\-Variable \-Documentation}
\hypertarget{group___attitude_module_ga5c62d2531c3e579a49d025858bd52a83}{\index{\-Attitude and state estimation module@{\-Attitude and state estimation module}!\-S\-E\-N\-S\-O\-R\-\_\-\-Q\-U\-E\-U\-E\-\_\-\-S\-I\-Z\-E@{\-S\-E\-N\-S\-O\-R\-\_\-\-Q\-U\-E\-U\-E\-\_\-\-S\-I\-Z\-E}}
\index{\-S\-E\-N\-S\-O\-R\-\_\-\-Q\-U\-E\-U\-E\-\_\-\-S\-I\-Z\-E@{\-S\-E\-N\-S\-O\-R\-\_\-\-Q\-U\-E\-U\-E\-\_\-\-S\-I\-Z\-E}!Attitude and state estimation module@{\-Attitude and state estimation module}}
\subsubsection[{\-S\-E\-N\-S\-O\-R\-\_\-\-Q\-U\-E\-U\-E\-\_\-\-S\-I\-Z\-E}]{\setlength{\rightskip}{0pt plus 5cm}const uint32\-\_\-t {\bf \-S\-E\-N\-S\-O\-R\-\_\-\-Q\-U\-E\-U\-E\-\_\-\-S\-I\-Z\-E} = 10}}\label{group___attitude_module_ga5c62d2531c3e579a49d025858bd52a83}


\-Definition at line 136 of file attitude.\-c.

\hypertarget{group___attitude_module_ga62b409271acba166dbf31b4fed9af697}{\index{\-Attitude and state estimation module@{\-Attitude and state estimation module}!\-T@{\-T}}
\index{\-T@{\-T}!Attitude and state estimation module@{\-Attitude and state estimation module}}
\subsubsection[{\-T}]{\setlength{\rightskip}{0pt plus 5cm}float {\bf \-T}\mbox{[}3\mbox{]}}}\label{group___attitude_module_ga62b409271acba166dbf31b4fed9af697}


\-Convert the \-G\-P\-S \-L\-L\-A position into \-N\-E\-D coordinates. 

\begin{DoxyNote}{\-Note}
this method uses a taylor expansion around the home coordinates to convert to \-N\-E\-D which allows it to be done with all floating calculations 
\end{DoxyNote}

\begin{DoxyParams}[1]{\-Parameters}
\mbox{\tt in}  & {\em \-Current} & \-G\-P\-S coordinates \\
\hline
\mbox{\tt out}  & {\em \-N\-E\-D} & frame coordinates \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
0 for success, -\/1 for failure 
\end{DoxyReturn}


\-Definition at line 1087 of file attitude.\-c.

