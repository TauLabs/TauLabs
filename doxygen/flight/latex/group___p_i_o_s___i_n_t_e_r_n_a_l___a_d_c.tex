\hypertarget{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c}{\section{\-Internal \-A\-D\-C \-Functions}
\label{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c}\index{\-Internal A\-D\-C Functions@{\-Internal A\-D\-C Functions}}
}
\subsection*{\-Data \-Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structadc__pin}{adc\-\_\-pin}
\item 
struct \hyperlink{structpios__internal__adc__cfg}{pios\-\_\-internal\-\_\-adc\-\_\-cfg}
\item 
struct \hyperlink{structpios__internal__adc__dev}{pios\-\_\-internal\-\_\-adc\-\_\-dev}
\end{DoxyCompactItemize}
\subsection*{\-Files}
\begin{DoxyCompactItemize}
\item 
file \hyperlink{pios__internal__adc_8h}{pios\-\_\-internal\-\_\-adc.\-h}
\begin{DoxyCompactList}\small\item\em \-A\-D\-C functions header. \end{DoxyCompactList}\item 
file \hyperlink{pios__internal__adc__priv_8h}{pios\-\_\-internal\-\_\-adc\-\_\-priv.\-h}
\begin{DoxyCompactList}\small\item\em \-A\-D\-C private definitions. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef void($\ast$ \hyperlink{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_ga20bf90833813c2c4945fab90c8e4f386}{\-A\-D\-C\-Callback} )(float $\ast$data)
\end{DoxyCompactItemize}
\subsection*{\-Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_gafcbb2d879978c3e1679c3ccabaff8c03}{pios\-\_\-internal\-\_\-adc\-\_\-dev\-\_\-magic} \{ \hyperlink{group___p_i_o_s___a_d_c_ggafcbb2d879978c3e1679c3ccabaff8c03adc16fac7b3b7f2cbaf50a1224b2bbba2}{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-E\-V\-\_\-\-M\-A\-G\-I\-C} =  0x58375124, 
\hyperlink{group___p_i_o_s___a_d_c_ggafcbb2d879978c3e1679c3ccabaff8c03adc16fac7b3b7f2cbaf50a1224b2bbba2}{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-E\-V\-\_\-\-M\-A\-G\-I\-C} =  0x58375124
 \}
\end{DoxyCompactItemize}
\subsection*{\-Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_ga5bd59140ceb564b00a50f2f7a499bb7b}{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-M\-A\-\_\-\-Handler} ()
\begin{DoxyCompactList}\small\item\em \-Interrupt for half and full buffer transfer. \end{DoxyCompactList}\item 
int32\-\_\-t \hyperlink{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_ga24dec792533e0f27e35c3ea6d1bbd9e1}{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-Init} (uint32\-\_\-t $\ast$internal\-\_\-adc\-\_\-id, const struct \hyperlink{structpios__internal__adc__cfg}{pios\-\_\-internal\-\_\-adc\-\_\-cfg} $\ast$cfg)
\begin{DoxyCompactList}\small\item\em \-Initializes an internal \-A\-D\-C device. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Variables}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structpios__adc__driver}{pios\-\_\-adc\-\_\-driver} \hyperlink{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_gaa1decc30319efc11cab3d3e9ba32ff8e}{pios\-\_\-internal\-\_\-adc\-\_\-driver}
\item 
struct \hyperlink{structpios__adc__driver}{pios\-\_\-adc\-\_\-driver} \hyperlink{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_gaa1decc30319efc11cab3d3e9ba32ff8e}{pios\-\_\-internal\-\_\-adc\-\_\-driver}
\item 
struct \hyperlink{structpios__internal__adc__dev}{pios\-\_\-internal\-\_\-adc\-\_\-dev} $\ast$ \hyperlink{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_ga98f54a9670626234febef25763cd6660}{static\-\_\-adc\-\_\-dev} = \-N\-U\-L\-L
\end{DoxyCompactItemize}


\subsection{\-Typedef \-Documentation}
\hypertarget{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_ga20bf90833813c2c4945fab90c8e4f386}{\index{\-Internal A\-D\-C Functions@{\-Internal A\-D\-C Functions}!\-A\-D\-C\-Callback@{\-A\-D\-C\-Callback}}
\index{\-A\-D\-C\-Callback@{\-A\-D\-C\-Callback}!Internal ADC Functions@{\-Internal A\-D\-C Functions}}
\subsubsection[{\-A\-D\-C\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}typedef void($\ast$ {\bf \-A\-D\-C\-Callback})(float $\ast$data)}}\label{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_ga20bf90833813c2c4945fab90c8e4f386}


\-Definition at line 37 of file pios\-\_\-internal\-\_\-adc.\-h.



\subsection{\-Enumeration \-Type \-Documentation}
\hypertarget{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_gafcbb2d879978c3e1679c3ccabaff8c03}{\index{\-Internal A\-D\-C Functions@{\-Internal A\-D\-C Functions}!pios\-\_\-internal\-\_\-adc\-\_\-dev\-\_\-magic@{pios\-\_\-internal\-\_\-adc\-\_\-dev\-\_\-magic}}
\index{pios\-\_\-internal\-\_\-adc\-\_\-dev\-\_\-magic@{pios\-\_\-internal\-\_\-adc\-\_\-dev\-\_\-magic}!Internal ADC Functions@{\-Internal A\-D\-C Functions}}
\subsubsection[{pios\-\_\-internal\-\_\-adc\-\_\-dev\-\_\-magic}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf pios\-\_\-internal\-\_\-adc\-\_\-dev\-\_\-magic}}}\label{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_gafcbb2d879978c3e1679c3ccabaff8c03}
\begin{Desc}
\item[\-Enumerator\-: ]\par
\begin{description}
\index{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-E\-V\-\_\-\-M\-A\-G\-I\-C@{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-E\-V\-\_\-\-M\-A\-G\-I\-C}!\-Internal A\-D\-C Functions@{\-Internal A\-D\-C Functions}}\index{\-Internal A\-D\-C Functions@{\-Internal A\-D\-C Functions}!\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-E\-V\-\_\-\-M\-A\-G\-I\-C@{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-E\-V\-\_\-\-M\-A\-G\-I\-C}}\item[{\em 
\hypertarget{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_ggafcbb2d879978c3e1679c3ccabaff8c03adc16fac7b3b7f2cbaf50a1224b2bbba2}{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-E\-V\-\_\-\-M\-A\-G\-I\-C}\label{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_ggafcbb2d879978c3e1679c3ccabaff8c03adc16fac7b3b7f2cbaf50a1224b2bbba2}
}]\index{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-E\-V\-\_\-\-M\-A\-G\-I\-C@{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-E\-V\-\_\-\-M\-A\-G\-I\-C}!\-Internal A\-D\-C Functions@{\-Internal A\-D\-C Functions}}\index{\-Internal A\-D\-C Functions@{\-Internal A\-D\-C Functions}!\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-E\-V\-\_\-\-M\-A\-G\-I\-C@{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-E\-V\-\_\-\-M\-A\-G\-I\-C}}\item[{\em 
\hypertarget{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_ggafcbb2d879978c3e1679c3ccabaff8c03adc16fac7b3b7f2cbaf50a1224b2bbba2}{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-E\-V\-\_\-\-M\-A\-G\-I\-C}\label{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_ggafcbb2d879978c3e1679c3ccabaff8c03adc16fac7b3b7f2cbaf50a1224b2bbba2}
}]\end{description}
\end{Desc}



\-Definition at line 46 of file pios\-\_\-internal\-\_\-adc.\-c.



\subsection{\-Function \-Documentation}
\hypertarget{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_ga5bd59140ceb564b00a50f2f7a499bb7b}{\index{\-Internal A\-D\-C Functions@{\-Internal A\-D\-C Functions}!\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-M\-A\-\_\-\-Handler@{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-M\-A\-\_\-\-Handler}}
\index{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-M\-A\-\_\-\-Handler@{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-M\-A\-\_\-\-Handler}!Internal ADC Functions@{\-Internal A\-D\-C Functions}}
\subsubsection[{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-M\-A\-\_\-\-Handler}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-D\-M\-A\-\_\-\-Handler} (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_ga5bd59140ceb564b00a50f2f7a499bb7b}


\-Interrupt for half and full buffer transfer. 

\-This interrupt handler swaps between the two halfs of the double buffer to make sure the ahrs uses the most recent data. \-Only swaps data when \-A\-H\-R\-S is idle, but really this is a pretense of a sanity check since the \-D\-M\-A engine is consantly running in the background. \-Keep an eye on the ekf\-\_\-too\-\_\-slow variable to make sure it's keeping up. 

\-Definition at line 356 of file pios\-\_\-internal\-\_\-adc.\-c.

\hypertarget{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_ga24dec792533e0f27e35c3ea6d1bbd9e1}{\index{\-Internal A\-D\-C Functions@{\-Internal A\-D\-C Functions}!\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-Init@{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-Init}}
\index{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-Init@{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-Init}!Internal ADC Functions@{\-Internal A\-D\-C Functions}}
\subsubsection[{\-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-Init}]{\setlength{\rightskip}{0pt plus 5cm}int32\-\_\-t {\bf \-P\-I\-O\-S\-\_\-\-I\-N\-T\-E\-R\-N\-A\-L\-\_\-\-A\-D\-C\-\_\-\-Init} (
\begin{DoxyParamCaption}
\item[{uint32\-\_\-t $\ast$}]{internal\-\_\-adc\-\_\-id, }
\item[{const struct {\bf pios\-\_\-internal\-\_\-adc\-\_\-cfg} $\ast$}]{cfg}
\end{DoxyParamCaption}
)}}\label{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_ga24dec792533e0f27e35c3ea6d1bbd9e1}


\-Initializes an internal \-A\-D\-C device. 

\-Init the \-A\-D\-C.


\begin{DoxyParams}[1]{\-Parameters}
\mbox{\tt out}  & {\em internal\-\_\-adc\-\_\-id} & handle to the device \\
\hline
\mbox{\tt in}  & {\em cfg} & device configuration \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
$<$ 0 if deviced initialization failed 
\end{DoxyReturn}


\-Definition at line 129 of file pios\-\_\-internal\-\_\-adc.\-c.



\subsection{\-Variable \-Documentation}
\hypertarget{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_gaa1decc30319efc11cab3d3e9ba32ff8e}{\index{\-Internal A\-D\-C Functions@{\-Internal A\-D\-C Functions}!pios\-\_\-internal\-\_\-adc\-\_\-driver@{pios\-\_\-internal\-\_\-adc\-\_\-driver}}
\index{pios\-\_\-internal\-\_\-adc\-\_\-driver@{pios\-\_\-internal\-\_\-adc\-\_\-driver}!Internal ADC Functions@{\-Internal A\-D\-C Functions}}
\subsubsection[{pios\-\_\-internal\-\_\-adc\-\_\-driver}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf pios\-\_\-adc\-\_\-driver} {\bf pios\-\_\-internal\-\_\-adc\-\_\-driver}}}\label{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_gaa1decc30319efc11cab3d3e9ba32ff8e}


\-Definition at line 50 of file pios\-\_\-internal\-\_\-adc.\-c.

\hypertarget{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_gaa1decc30319efc11cab3d3e9ba32ff8e}{\index{\-Internal A\-D\-C Functions@{\-Internal A\-D\-C Functions}!pios\-\_\-internal\-\_\-adc\-\_\-driver@{pios\-\_\-internal\-\_\-adc\-\_\-driver}}
\index{pios\-\_\-internal\-\_\-adc\-\_\-driver@{pios\-\_\-internal\-\_\-adc\-\_\-driver}!Internal ADC Functions@{\-Internal A\-D\-C Functions}}
\subsubsection[{pios\-\_\-internal\-\_\-adc\-\_\-driver}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf pios\-\_\-adc\-\_\-driver} {\bf pios\-\_\-internal\-\_\-adc\-\_\-driver}}}\label{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_gaa1decc30319efc11cab3d3e9ba32ff8e}
{\bfseries \-Initial value\-:}
\begin{DoxyCode}
 {
                .available      = PIOS_INTERNAL_ADC_Available,
                .get_pin        = PIOS_INTERNAL_ADC_PinGet,
                .set_queue      = PIOS_INTERNAL_ADC_SetQueue,
                .number_of_channels = PIOS_INTERNAL_ADC_Number_of_Channels,
}
\end{DoxyCode}


\-Definition at line 50 of file pios\-\_\-internal\-\_\-adc.\-c.

\hypertarget{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_ga98f54a9670626234febef25763cd6660}{\index{\-Internal A\-D\-C Functions@{\-Internal A\-D\-C Functions}!static\-\_\-adc\-\_\-dev@{static\-\_\-adc\-\_\-dev}}
\index{static\-\_\-adc\-\_\-dev@{static\-\_\-adc\-\_\-dev}!Internal ADC Functions@{\-Internal A\-D\-C Functions}}
\subsubsection[{static\-\_\-adc\-\_\-dev}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf pios\-\_\-internal\-\_\-adc\-\_\-dev}$\ast$ {\bf static\-\_\-adc\-\_\-dev} = \-N\-U\-L\-L}}\label{group___p_i_o_s___i_n_t_e_r_n_a_l___a_d_c_ga98f54a9670626234febef25763cd6660}


\-Definition at line 82 of file pios\-\_\-internal\-\_\-adc.\-c.

