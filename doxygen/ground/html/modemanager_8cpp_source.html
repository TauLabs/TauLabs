<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>TauLabs: /home/jb/code/TauLabs/ground/gcs/src/plugins/coreplugin/modemanager.cpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="icon_128x128.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">TauLabs
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('modemanager_8cpp.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">/home/jb/code/TauLabs/ground/gcs/src/plugins/coreplugin/modemanager.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="modemanager_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00013"></a>00013 <span class="comment">/*</span>
<a name="l00014"></a>00014 <span class="comment"> * This program is free software; you can redistribute it and/or modify </span>
<a name="l00015"></a>00015 <span class="comment"> * it under the terms of the GNU General Public License as published by </span>
<a name="l00016"></a>00016 <span class="comment"> * the Free Software Foundation; either version 3 of the License, or </span>
<a name="l00017"></a>00017 <span class="comment"> * (at your option) any later version.</span>
<a name="l00018"></a>00018 <span class="comment"> * </span>
<a name="l00019"></a>00019 <span class="comment"> * This program is distributed in the hope that it will be useful, but </span>
<a name="l00020"></a>00020 <span class="comment"> * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY </span>
<a name="l00021"></a>00021 <span class="comment"> * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License </span>
<a name="l00022"></a>00022 <span class="comment"> * for more details.</span>
<a name="l00023"></a>00023 <span class="comment"> * </span>
<a name="l00024"></a>00024 <span class="comment"> * You should have received a copy of the GNU General Public License along </span>
<a name="l00025"></a>00025 <span class="comment"> * with this program; if not, write to the Free Software Foundation, Inc., </span>
<a name="l00026"></a>00026 <span class="comment"> * 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span>
<a name="l00027"></a>00027 <span class="comment"> */</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="modemanager_8h.html">modemanager.h</a>&quot;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;fancytabwidget.h&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="fancyactionbar_8h.html">fancyactionbar.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="mytabwidget_8h.html">utils/mytabwidget.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="icore_8h.html">icore.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="mainwindow_8h.html">mainwindow.h</a>&quot;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;<a class="code" href="aggregate_8h.html">aggregation/aggregate.h</a>&gt;</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;<a class="code" href="actionmanager_8h.html">coreplugin/actionmanager/actionmanager.h</a>&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;<a class="code" href="command_8h.html">coreplugin/actionmanager/command.h</a>&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;<a class="code" href="coreconstants_8h.html">coreplugin/coreconstants.h</a>&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;<a class="code" href="imode_8h.html">coreplugin/imode.h</a>&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;<a class="code" href="uniqueidmanager_8h.html">coreplugin/uniqueidmanager.h</a>&gt;</span>
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="preprocessor">#include &lt;<a class="code" href="pluginmanager_8h.html">extensionsystem/pluginmanager.h</a>&gt;</span>
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="preprocessor">#include &lt;<a class="code" href="qtcassert_8h.html">utils/qtcassert.h</a>&gt;</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="preprocessor">#include &lt;QtCore/QObject&gt;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &lt;QtCore/QDebug&gt;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &lt;QtCore/QSignalMapper&gt;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &lt;QtGui/QShortcut&gt;</span>
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="preprocessor">#include &lt;QtGui/QAction&gt;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &lt;QtGui/QTabWidget&gt;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &lt;QtGui/QVBoxLayout&gt;</span>
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <span class="keyword">using namespace </span>Core;
<a name="l00059"></a>00059 <span class="keyword">using namespace </span>Core::Internal;
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <a class="code" href="class_core_1_1_mode_manager.html">ModeManager</a> *ModeManager::m_instance = 0;
<a name="l00062"></a>00062 
<a name="l00063"></a><a class="code" href="group___core_plugin.html#ga7424a5232a9062d5d715d46cb6dab058">00063</a> <a class="code" href="group___core_plugin.html#ga7424a5232a9062d5d715d46cb6dab058">ModeManager::ModeManager</a>(<a class="code" href="class_core_1_1_internal_1_1_main_window.html">Internal::MainWindow</a> *mainWindow, <a class="code" href="class_my_tab_widget.html">MyTabWidget</a> *modeStack) :
<a name="l00064"></a>00064     m_mainWindow(mainWindow),
<a name="l00065"></a>00065     m_modeStack(modeStack),
<a name="l00066"></a>00066     m_signalMapper(new QSignalMapper(this)),
<a name="l00067"></a>00067     m_isReprioritizing(false)
<a name="l00068"></a>00068 {
<a name="l00069"></a>00069     m_instance = <span class="keyword">this</span>;
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 <span class="comment">//    connect((m_modeStack), SIGNAL(currentAboutToShow(int)), SLOT(currentTabAboutToChange(int)));</span>
<a name="l00072"></a>00072     connect(m_modeStack, SIGNAL(currentChanged(<span class="keywordtype">int</span>)), <span class="keyword">this</span>, SLOT(currentTabChanged(<span class="keywordtype">int</span>)));
<a name="l00073"></a>00073     connect(m_modeStack, SIGNAL(tabMoved(<span class="keywordtype">int</span>,<span class="keywordtype">int</span>)), <span class="keyword">this</span>, SLOT(tabMoved(<span class="keywordtype">int</span>,<span class="keywordtype">int</span>)));
<a name="l00074"></a>00074     connect(m_signalMapper, SIGNAL(mapped(<a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a>)), <span class="keyword">this</span>, SLOT(<a class="code" href="group___core_plugin.html#ga9f75e14a1a348f3f46c62b4575dbca9e">activateMode</a>(<a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a>)));
<a name="l00075"></a>00075 }
<a name="l00076"></a>00076 
<a name="l00077"></a><a class="code" href="group___core_plugin.html#ga0602e86f2b78e9b234c3fa737837d266">00077</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga0602e86f2b78e9b234c3fa737837d266">ModeManager::init</a>()
<a name="l00078"></a>00078 {
<a name="l00079"></a>00079     QObject::connect(ExtensionSystem::PluginManager::instance(), SIGNAL(objectAdded(QObject*)),
<a name="l00080"></a>00080                      <span class="keyword">this</span>, SLOT(objectAdded(QObject*)));
<a name="l00081"></a>00081     QObject::connect(ExtensionSystem::PluginManager::instance(), SIGNAL(aboutToRemoveObject(QObject*)),
<a name="l00082"></a>00082                      <span class="keyword">this</span>, SLOT(aboutToRemoveObject(QObject*)));
<a name="l00083"></a>00083 }
<a name="l00084"></a>00084 
<a name="l00085"></a><a class="code" href="group___core_plugin.html#ga44a336b5464c757765a238ac56da3cc3">00085</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga44a336b5464c757765a238ac56da3cc3">ModeManager::addWidget</a>(QWidget *widget)
<a name="l00086"></a>00086 {
<a name="l00087"></a>00087     Q_UNUSED(widget);
<a name="l00088"></a>00088 
<a name="l00089"></a>00089     <span class="comment">// We want the actionbar to stay on the bottom</span>
<a name="l00090"></a>00090     <span class="comment">// so m_modeStack-&gt;cornerWidgetCount() -1 inserts it at the position immediately above</span>
<a name="l00091"></a>00091     <span class="comment">// the actionbar</span>
<a name="l00092"></a>00092 <span class="comment">//    m_modeStack-&gt;insertCornerWidget(m_modeStack-&gt;cornerWidgetCount() -1, widget);</span>
<a name="l00093"></a>00093 }
<a name="l00094"></a>00094 
<a name="l00095"></a><a class="code" href="group___core_plugin.html#ga8b622df4a78ae2e368474999c0698306">00095</a> <a class="code" href="class_core_1_1_i_mode.html">IMode</a> *<a class="code" href="group___core_plugin.html#ga8b622df4a78ae2e368474999c0698306">ModeManager::currentMode</a>()<span class="keyword"> const</span>
<a name="l00096"></a>00096 <span class="keyword"></span>{
<a name="l00097"></a>00097     <span class="keywordflow">if</span> (m_modes.count() &gt; m_modeStack-&gt;currentIndex() )
<a name="l00098"></a>00098         <span class="keywordflow">return</span> m_modes.at(m_modeStack-&gt;currentIndex());
<a name="l00099"></a>00099     <span class="keywordflow">else</span>
<a name="l00100"></a>00100         m_modeStack-&gt;setCurrentIndex(0); <span class="comment">// Fix illegal Index.</span>
<a name="l00101"></a>00101     <span class="keywordflow">return</span> 0;
<a name="l00102"></a>00102 }
<a name="l00103"></a>00103 
<a name="l00104"></a>00104 <span class="keywordtype">int</span> ModeManager::indexOf(<span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> &amp;<span class="keywordtype">id</span>)<span class="keyword"> const</span>
<a name="l00105"></a>00105 <span class="keyword"></span>{
<a name="l00106"></a>00106     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; m_modes.count(); ++<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>) {
<a name="l00107"></a>00107         <span class="keywordflow">if</span> (m_modes.at(<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>)-&gt;uniqueModeName() == id)
<a name="l00108"></a>00108             <span class="keywordflow">return</span> <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;
<a name="l00109"></a>00109     }
<a name="l00110"></a>00110 <span class="comment">//    qDebug() &lt;&lt; &quot;Warning, no such mode:&quot; &lt;&lt; id;</span>
<a name="l00111"></a>00111     <span class="keywordflow">return</span> -1;
<a name="l00112"></a>00112 }
<a name="l00113"></a>00113 
<a name="l00114"></a><a class="code" href="group___core_plugin.html#ga2f29188b707a73ac13c2312497b99219">00114</a> <a class="code" href="class_core_1_1_i_mode.html">IMode</a> *<a class="code" href="group___core_plugin.html#ga2f29188b707a73ac13c2312497b99219">ModeManager::mode</a>(<span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> &amp;<span class="keywordtype">id</span>)<span class="keyword"> const</span>
<a name="l00115"></a>00115 <span class="keyword"></span>{
<a name="l00116"></a>00116     <span class="keyword">const</span> <span class="keywordtype">int</span> index = indexOf(<span class="keywordtype">id</span>);
<a name="l00117"></a>00117     <span class="keywordflow">if</span> (index &gt;= 0)
<a name="l00118"></a>00118         <span class="keywordflow">return</span> m_modes.at(index);
<a name="l00119"></a>00119     <span class="keywordflow">return</span> 0;
<a name="l00120"></a>00120 }
<a name="l00121"></a>00121 
<a name="l00122"></a><a class="code" href="group___core_plugin.html#ga9f75e14a1a348f3f46c62b4575dbca9e">00122</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga9f75e14a1a348f3f46c62b4575dbca9e">ModeManager::activateMode</a>(<span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> &amp;<span class="keywordtype">id</span>)
<a name="l00123"></a>00123 {
<a name="l00124"></a>00124     <span class="keyword">const</span> <span class="keywordtype">int</span> index = indexOf(<span class="keywordtype">id</span>);
<a name="l00125"></a>00125     <span class="keywordflow">if</span> (index &gt;= 0)
<a name="l00126"></a>00126         m_modeStack-&gt;setCurrentIndex(index);
<a name="l00127"></a>00127 }
<a name="l00128"></a>00128 
<a name="l00129"></a><a class="code" href="group___core_plugin.html#gadd4b3b24c51d0993e61aab8ee9e76f48">00129</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#gadd4b3b24c51d0993e61aab8ee9e76f48">ModeManager::activateModeByWorkspaceName</a>(<span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> &amp;<span class="keywordtype">id</span>)
<a name="l00130"></a>00130 {
<a name="l00131"></a>00131     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; m_modes.count(); ++<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>) {
<a name="l00132"></a>00132         <span class="keywordflow">if</span> (m_modes.at(<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>)-&gt;name() == id)
<a name="l00133"></a>00133         {
<a name="l00134"></a>00134             m_modeStack-&gt;setCurrentIndex(<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);
<a name="l00135"></a>00135             <span class="keywordflow">return</span>;
<a name="l00136"></a>00136         }
<a name="l00137"></a>00137     }
<a name="l00138"></a>00138 }
<a name="l00139"></a>00139 
<a name="l00140"></a>00140 <span class="keywordtype">void</span> ModeManager::objectAdded(QObject *obj)
<a name="l00141"></a>00141 {
<a name="l00142"></a>00142     <a class="code" href="class_core_1_1_i_mode.html">IMode</a> *<a class="code" href="group___core_plugin.html#ga2f29188b707a73ac13c2312497b99219">mode</a> = Aggregation::query&lt;IMode&gt;(obj);
<a name="l00143"></a>00143     <span class="keywordflow">if</span> (!mode)
<a name="l00144"></a>00144         <span class="keywordflow">return</span>;
<a name="l00145"></a>00145 
<a name="l00146"></a>00146     m_mainWindow-&gt;<a class="code" href="group___core_plugin.html#gada7d20cb1e2117aa2991afa0589bdfbf">addContextObject</a>(mode);
<a name="l00147"></a>00147 
<a name="l00148"></a>00148     <span class="comment">// Count the number of modes with a higher priority</span>
<a name="l00149"></a>00149     <span class="keywordtype">int</span> index = 0;
<a name="l00150"></a>00150     <span class="keywordflow">foreach</span> (<span class="keyword">const</span> <a class="code" href="class_core_1_1_i_mode.html">IMode</a> *<a class="code" href="uavobjecttemplate_8m.html#ab3cd915d758008bd19d0f2428fbb354a">m</a>, m_modes)
<a name="l00151"></a>00151         <span class="keywordflow">if</span> (m-&gt;<a class="code" href="group___core_plugin.html#gac22cc2ad63d314df4660f6345a7fff2c">priority</a>() &gt; mode-&gt;<a class="code" href="group___core_plugin.html#gac22cc2ad63d314df4660f6345a7fff2c">priority</a>())
<a name="l00152"></a>00152             ++index;
<a name="l00153"></a>00153 
<a name="l00154"></a>00154     m_modes.insert(index, mode);
<a name="l00155"></a>00155     m_modeStack-&gt;insertTab(index, mode-&gt;<a class="code" href="group___core_plugin.html#gafa470639238652ef10e435b6c28d9282">widget</a>(), mode-&gt;<a class="code" href="group___core_plugin.html#ga08aee89ee18cb2f86fef5547c93eb324">icon</a>(), mode-&gt;<a class="code" href="group___core_plugin.html#ga5892453cd69d59f044a66007256caa28">name</a>());
<a name="l00156"></a>00156 
<a name="l00157"></a>00157     <span class="comment">// Register mode shortcut</span>
<a name="l00158"></a>00158     <a class="code" href="class_core_1_1_action_manager.html" title="The action manager is responsible for registration of menus and menu items and keyboard shortcuts...">ActionManager</a> *am = m_mainWindow-&gt;<a class="code" href="group___core_plugin.html#gab47ff8e0a661aec0be5a11339f13bdf0">actionManager</a>();
<a name="l00159"></a>00159     <span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> shortcutId = QLatin1String(<span class="stringliteral">&quot;GCS.Mode.&quot;</span>) + mode-&gt;<a class="code" href="group___core_plugin.html#gab42870ab42d71194c7f6de4afe58fba5">uniqueModeName</a>();
<a name="l00160"></a>00160     QShortcut *shortcut = <span class="keyword">new</span> QShortcut(m_mainWindow);
<a name="l00161"></a>00161     shortcut-&gt;setWhatsThis(tr(<span class="stringliteral">&quot;Switch to %1 mode&quot;</span>).arg(mode-&gt;<a class="code" href="group___core_plugin.html#ga5892453cd69d59f044a66007256caa28">name</a>()));
<a name="l00162"></a>00162     <a class="code" href="class_core_1_1_command.html" title="The class Command represents an action like a menu item, tool button, or shortcut. You don&#39;t create Command objects directly, instead use {ActionManager::registerAction()} to register an action and retrieve a Command. The Command object represents the user visible action and its properties. If multiple actions are registered with the same ID (but different contexts) the returned Command is the shared one between these actions.">Command</a> *cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga74e32e1f8008da2d536cc688b32d111f" title="Makes a shortcut known to the system under the specified string id.">registerShortcut</a>(shortcut, shortcutId, QList&lt;int&gt;() &lt;&lt; <a class="code" href="group___core_plugin.html#ga73bcb9a176a2f5b7cec3008d5b0f244c">Constants::C_GLOBAL_ID</a>);
<a name="l00163"></a>00163 
<a name="l00164"></a>00164     m_modeShortcuts.insert(index, cmd);
<a name="l00165"></a>00165     connect(cmd, SIGNAL(keySequenceChanged()), <span class="keyword">this</span>, SLOT(updateModeToolTip()));
<a name="l00166"></a>00166 
<a name="l00167"></a>00167     setDefaultKeyshortcuts();
<a name="l00168"></a>00168 
<a name="l00169"></a>00169     m_signalMapper-&gt;setMapping(shortcut, mode-&gt;<a class="code" href="group___core_plugin.html#gab42870ab42d71194c7f6de4afe58fba5">uniqueModeName</a>());
<a name="l00170"></a>00170     connect(shortcut, SIGNAL(activated()), m_signalMapper, SLOT(map()));
<a name="l00171"></a>00171 }
<a name="l00172"></a>00172 
<a name="l00173"></a>00173 <span class="keywordtype">void</span> ModeManager::setDefaultKeyshortcuts() {
<a name="l00174"></a>00174     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; m_modeShortcuts.size(); ++<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>) {
<a name="l00175"></a>00175         <a class="code" href="class_core_1_1_command.html" title="The class Command represents an action like a menu item, tool button, or shortcut. You don&#39;t create Command objects directly, instead use {ActionManager::registerAction()} to register an action and retrieve a Command. The Command object represents the user visible action and its properties. If multiple actions are registered with the same ID (but different contexts) the returned Command is the shared one between these actions.">Command</a> *currentCmd = m_modeShortcuts.at(<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);
<a name="l00176"></a>00176         <span class="keywordtype">bool</span> currentlyHasDefaultSequence = (currentCmd-&gt;<a class="code" href="group___core_plugin.html#ga489c0ef6a565b2af079f1fc61c2bf1d2">keySequence</a>()
<a name="l00177"></a>00177                                             == currentCmd-&gt;<a class="code" href="group___core_plugin.html#ga0c83dee8e3b5d218dd4273e801bfe106">defaultKeySequence</a>());
<a name="l00178"></a>00178 <span class="preprocessor">#ifdef Q_WS_MAC</span>
<a name="l00179"></a>00179 <span class="preprocessor"></span>        currentCmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence(<a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a>(<span class="stringliteral">&quot;Meta+%1&quot;</span>).arg(<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+1)));
<a name="l00180"></a>00180 <span class="preprocessor">#else</span>
<a name="l00181"></a>00181 <span class="preprocessor"></span>        currentCmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence(<a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a>(<span class="stringliteral">&quot;Ctrl+%1&quot;</span>).arg(<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+1)));
<a name="l00182"></a>00182 <span class="preprocessor">#endif</span>
<a name="l00183"></a>00183 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (currentlyHasDefaultSequence)
<a name="l00184"></a>00184             currentCmd-&gt;<a class="code" href="group___core_plugin.html#gad53cfa78788d0ccaeb168c512bb2c48a">setKeySequence</a>(currentCmd-&gt;<a class="code" href="group___core_plugin.html#ga0c83dee8e3b5d218dd4273e801bfe106">defaultKeySequence</a>());
<a name="l00185"></a>00185     }
<a name="l00186"></a>00186 }
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 <span class="keywordtype">void</span> ModeManager::updateModeToolTip()
<a name="l00189"></a>00189 {
<a name="l00190"></a>00190     <a class="code" href="class_core_1_1_command.html" title="The class Command represents an action like a menu item, tool button, or shortcut. You don&#39;t create Command objects directly, instead use {ActionManager::registerAction()} to register an action and retrieve a Command. The Command object represents the user visible action and its properties. If multiple actions are registered with the same ID (but different contexts) the returned Command is the shared one between these actions.">Command</a> *cmd = qobject_cast&lt;<a class="code" href="class_core_1_1_command.html" title="The class Command represents an action like a menu item, tool button, or shortcut. You don&#39;t create Command objects directly, instead use {ActionManager::registerAction()} to register an action and retrieve a Command. The Command object represents the user visible action and its properties. If multiple actions are registered with the same ID (but different contexts) the returned Command is the shared one between these actions.">Command</a> *&gt;(sender());
<a name="l00191"></a>00191     <span class="keywordflow">if</span> (cmd) {
<a name="l00192"></a>00192         <span class="keywordtype">int</span> index = m_modeShortcuts.indexOf(cmd);
<a name="l00193"></a>00193         <span class="keywordflow">if</span> (index != -1)
<a name="l00194"></a>00194             m_modeStack-&gt;setTabToolTip(index, cmd-&gt;<a class="code" href="group___core_plugin.html#gaf1df828641589d3db881d84c471abb3f">stringWithAppendedShortcut</a>(cmd-&gt;<a class="code" href="group___core_plugin.html#ga3cbc83d8c6c353b4b28c436a691ae970">shortcut</a>()-&gt;whatsThis()));
<a name="l00195"></a>00195     }
<a name="l00196"></a>00196 }
<a name="l00197"></a>00197 
<a name="l00198"></a><a class="code" href="group___core_plugin.html#ga19ea1eb5b0bc5b064afc7d4498a23b86">00198</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga19ea1eb5b0bc5b064afc7d4498a23b86">ModeManager::updateModeNameIcon</a>(<a class="code" href="class_core_1_1_i_mode.html">IMode</a> *mode, <span class="keyword">const</span> QIcon &amp;icon, <span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> &amp;label)
<a name="l00199"></a>00199 {
<a name="l00200"></a>00200     <span class="keywordtype">int</span> index = indexOf(mode-&gt;<a class="code" href="group___core_plugin.html#gab42870ab42d71194c7f6de4afe58fba5">uniqueModeName</a>());
<a name="l00201"></a>00201     <span class="keywordflow">if</span> (index &lt; 0)
<a name="l00202"></a>00202         <span class="keywordflow">return</span>;
<a name="l00203"></a>00203     m_modeStack-&gt;setTabIcon(index, icon);
<a name="l00204"></a>00204     m_modeStack-&gt;setTabText(index, label);
<a name="l00205"></a>00205 }
<a name="l00206"></a>00206 
<a name="l00207"></a>00207 <span class="keywordtype">void</span> ModeManager::aboutToRemoveObject(QObject *obj)
<a name="l00208"></a>00208 {
<a name="l00209"></a>00209     <a class="code" href="class_core_1_1_i_mode.html">IMode</a> *mode = Aggregation::query&lt;IMode&gt;(obj);
<a name="l00210"></a>00210     <span class="keywordflow">if</span> (!mode)
<a name="l00211"></a>00211         <span class="keywordflow">return</span>;
<a name="l00212"></a>00212 
<a name="l00213"></a>00213     <span class="keyword">const</span> <span class="keywordtype">int</span> index = m_modes.indexOf(mode);
<a name="l00214"></a>00214     m_modes.remove(index);
<a name="l00215"></a>00215     m_modeShortcuts.remove(index);
<a name="l00216"></a>00216     disconnect(m_modeStack, SIGNAL(currentChanged(<span class="keywordtype">int</span>)), <span class="keyword">this</span>, SLOT(currentTabChanged(<span class="keywordtype">int</span>)));
<a name="l00217"></a>00217     m_modeStack-&gt;removeTab(index);
<a name="l00218"></a>00218     connect(m_modeStack, SIGNAL(currentChanged(<span class="keywordtype">int</span>)), <span class="keyword">this</span>, SLOT(currentTabChanged(<span class="keywordtype">int</span>)));
<a name="l00219"></a>00219 
<a name="l00220"></a>00220     m_mainWindow-&gt;<a class="code" href="group___core_plugin.html#gad67194baca34bebd58c0d57847a8d576">removeContextObject</a>(mode);
<a name="l00221"></a>00221 }
<a name="l00222"></a>00222 
<a name="l00223"></a><a class="code" href="group___core_plugin.html#ga59c08a546248c7443d069fffc04a6b90">00223</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga59c08a546248c7443d069fffc04a6b90">ModeManager::addAction</a>(<a class="code" href="class_core_1_1_command.html" title="The class Command represents an action like a menu item, tool button, or shortcut. You don&#39;t create Command objects directly, instead use {ActionManager::registerAction()} to register an action and retrieve a Command. The Command object represents the user visible action and its properties. If multiple actions are registered with the same ID (but different contexts) the returned Command is the shared one between these actions.">Command</a> *command, <span class="keywordtype">int</span> priority, QMenu *menu)
<a name="l00224"></a>00224 {
<a name="l00225"></a>00225     Q_UNUSED(menu);
<a name="l00226"></a>00226 
<a name="l00227"></a>00227     m_actions.insert(command, priority);
<a name="l00228"></a>00228 
<a name="l00229"></a>00229     <span class="comment">// Count the number of commands with a higher priority</span>
<a name="l00230"></a>00230     <span class="keywordtype">int</span> index = 0;
<a name="l00231"></a>00231     <span class="keywordflow">foreach</span> (<span class="keywordtype">int</span> p, m_actions.values())
<a name="l00232"></a>00232         <span class="keywordflow">if</span> (p &gt; priority)
<a name="l00233"></a>00233             ++index;
<a name="l00234"></a>00234 
<a name="l00235"></a>00235 <span class="comment">//    m_actionBar-&gt;insertAction(index, command-&gt;action(), menu);</span>
<a name="l00236"></a>00236 }
<a name="l00237"></a>00237 
<a name="l00238"></a>00238 <span class="keywordtype">void</span> ModeManager::currentTabAboutToChange(<span class="keywordtype">int</span> index)
<a name="l00239"></a>00239 {
<a name="l00240"></a>00240     <span class="keywordflow">if</span> (index &gt;= 0) {
<a name="l00241"></a>00241         <a class="code" href="class_core_1_1_i_mode.html">IMode</a> *mode = m_modes.at(index);
<a name="l00242"></a>00242         <span class="keywordflow">if</span> (mode)
<a name="l00243"></a>00243             emit <a class="code" href="group___core_plugin.html#gaa77e7371f833a065f7608953552acb2e">currentModeAboutToChange</a>(mode);
<a name="l00244"></a>00244     }
<a name="l00245"></a>00245 }
<a name="l00246"></a>00246 
<a name="l00247"></a>00247 <span class="keywordtype">void</span> ModeManager::currentTabChanged(<span class="keywordtype">int</span> index)
<a name="l00248"></a>00248 {
<a name="l00249"></a>00249 <span class="comment">//    qDebug() &lt;&lt; &quot;Current tab changed &quot; &lt;&lt; index;</span>
<a name="l00250"></a>00250     <span class="comment">// Tab index changes to -1 when there is no tab left.</span>
<a name="l00251"></a>00251     <span class="keywordflow">if</span> (index &gt;= 0) {
<a name="l00252"></a>00252         <a class="code" href="class_core_1_1_i_mode.html">IMode</a> *mode = m_modes.at(index);
<a name="l00253"></a>00253 
<a name="l00254"></a>00254         <span class="comment">// FIXME: This hardcoded context update is required for the Debug and Edit modes, since</span>
<a name="l00255"></a>00255         <span class="comment">// they use the editor widget, which is already a context widget so the main window won&#39;t</span>
<a name="l00256"></a>00256         <span class="comment">// go further up the parent tree to find the mode context.</span>
<a name="l00257"></a>00257         <a class="code" href="class_core_1_1_i_core.html" title="The ICore class allows access to the different part that make up the basic functionality of the Tau L...">ICore</a> *core = <a class="code" href="group___core_plugin.html#ga756ec59f5104cce0abf8a6990a2bba2c">ICore::instance</a>();
<a name="l00258"></a>00258         <span class="keywordflow">foreach</span> (<span class="keyword">const</span> <span class="keywordtype">int</span> context, m_addedContexts)
<a name="l00259"></a>00259             core-&gt;<a class="code" href="group___core_plugin.html#gaa15d98e15b7b7af2e1788e3101a4c963" title="Removes the given context from the list of currently active contexts.">removeAdditionalContext</a>(context);
<a name="l00260"></a>00260 
<a name="l00261"></a>00261         m_addedContexts = mode-&gt;<a class="code" href="group___core_plugin.html#ga1256e28e719a9a981f779a0c77b59a7e">context</a>();
<a name="l00262"></a>00262         <span class="keywordflow">foreach</span> (<span class="keyword">const</span> <span class="keywordtype">int</span> context, m_addedContexts)
<a name="l00263"></a>00263             core-&gt;<a class="code" href="group___core_plugin.html#gac04a98dd5b83cefd448fa47b5f5c9bea" title="Register additional context to be currently active.">addAdditionalContext</a>(context);
<a name="l00264"></a>00264         emit <a class="code" href="group___core_plugin.html#gae6bfcb951bb5f94b642a368c82116faf">currentModeChanged</a>(mode);
<a name="l00265"></a>00265         core-&gt;<a class="code" href="group___core_plugin.html#ga6c04b622e19d7eb2e2227f450414cbd1" title="Update the list of active contexts after adding or removing additional ones.">updateContext</a>();
<a name="l00266"></a>00266     }
<a name="l00267"></a>00267 }
<a name="l00268"></a>00268 
<a name="l00269"></a>00269 <span class="keywordtype">void</span> ModeManager::tabMoved(<span class="keywordtype">int</span> from, <span class="keywordtype">int</span> to)
<a name="l00270"></a>00270 {
<a name="l00271"></a>00271     <a class="code" href="class_core_1_1_i_mode.html">IMode</a> *mode = m_modes.at(from);
<a name="l00272"></a>00272     m_modes.remove(from);
<a name="l00273"></a>00273     m_modes.insert(to, mode);
<a name="l00274"></a>00274     <a class="code" href="class_core_1_1_command.html" title="The class Command represents an action like a menu item, tool button, or shortcut. You don&#39;t create Command objects directly, instead use {ActionManager::registerAction()} to register an action and retrieve a Command. The Command object represents the user visible action and its properties. If multiple actions are registered with the same ID (but different contexts) the returned Command is the shared one between these actions.">Command</a> *cmd = m_modeShortcuts.at(from);
<a name="l00275"></a>00275     m_modeShortcuts.remove(from);
<a name="l00276"></a>00276     m_modeShortcuts.insert(to, cmd);
<a name="l00277"></a>00277     setDefaultKeyshortcuts();
<a name="l00278"></a>00278     <span class="comment">// Reprioritize, high priority means show to the left</span>
<a name="l00279"></a>00279     <span class="keywordflow">if</span> (!m_isReprioritizing) {
<a name="l00280"></a>00280         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; m_modes.count(); ++<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>) {
<a name="l00281"></a>00281             m_modes.at(<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>)-&gt;setPriority(100-<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);
<a name="l00282"></a>00282         }
<a name="l00283"></a>00283         emit <a class="code" href="group___core_plugin.html#ga43ebcb6f603d4f852c917bc5ed76c124">newModeOrder</a>(m_modes);
<a name="l00284"></a>00284     }    
<a name="l00285"></a>00285 }
<a name="l00286"></a>00286 
<a name="l00287"></a><a class="code" href="group___core_plugin.html#ga5d0135f443bbd69ffdc3cf24152cf9a0">00287</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga5d0135f443bbd69ffdc3cf24152cf9a0">ModeManager::reorderModes</a>(QMap&lt;QString, int&gt; priorities)
<a name="l00288"></a>00288 {
<a name="l00289"></a>00289     <span class="keywordflow">foreach</span> (<a class="code" href="class_core_1_1_i_mode.html">IMode</a> *mode, m_modes)
<a name="l00290"></a>00290         mode-&gt;<a class="code" href="group___core_plugin.html#gab10108fb673e8128fb31d671a8a8db79">setPriority</a>(priorities.value(<a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a>(QLatin1String(mode-&gt;<a class="code" href="group___core_plugin.html#gab42870ab42d71194c7f6de4afe58fba5">uniqueModeName</a>())), mode-&gt;<a class="code" href="group___core_plugin.html#gac22cc2ad63d314df4660f6345a7fff2c">priority</a>()));
<a name="l00291"></a>00291 
<a name="l00292"></a>00292     m_isReprioritizing = <span class="keyword">true</span>;
<a name="l00293"></a>00293     <a class="code" href="class_core_1_1_i_mode.html">IMode</a> *current = <a class="code" href="group___core_plugin.html#ga8b622df4a78ae2e368474999c0698306">currentMode</a>();
<a name="l00294"></a>00294     <span class="comment">// Bubble sort</span>
<a name="l00295"></a>00295     <span class="keywordtype">bool</span> swapped = <span class="keyword">false</span>;
<a name="l00296"></a>00296     <span class="keywordflow">do</span> {
<a name="l00297"></a>00297         swapped = <span class="keyword">false</span>;
<a name="l00298"></a>00298         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; m_modes.count()-1; ++<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>) {
<a name="l00299"></a>00299             <a class="code" href="class_core_1_1_i_mode.html">IMode</a> *mode1 = m_modes.at(<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);
<a name="l00300"></a>00300             <a class="code" href="class_core_1_1_i_mode.html">IMode</a> *mode2 = m_modes.at(<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+1);
<a name="l00301"></a>00301 <span class="comment">//            qDebug() &lt;&lt; &quot;Comparing &quot; &lt;&lt; i &lt;&lt; &quot; to &quot; &lt;&lt; i+1 &lt;&lt; &quot; p1 &quot; &lt;&lt; mode1-&gt;priority() &lt;&lt; &quot; p2 &quot; &lt;&lt; mode2-&gt;priority();</span>
<a name="l00302"></a>00302             <span class="keywordflow">if</span> (mode2-&gt;<a class="code" href="group___core_plugin.html#gac22cc2ad63d314df4660f6345a7fff2c">priority</a>() &gt; mode1-&gt;<a class="code" href="group___core_plugin.html#gac22cc2ad63d314df4660f6345a7fff2c">priority</a>()) {
<a name="l00303"></a>00303                 m_modeStack-&gt;<a class="code" href="class_my_tab_widget.html#ac15c5b84dc2e5338b7a86507ff402980">moveTab</a>(<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>, <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+1);
<a name="l00304"></a>00304 <span class="comment">//                qDebug() &lt;&lt; &quot;Tab moved from &quot; &lt;&lt; i &lt;&lt; &quot; to &quot; &lt;&lt; i+1;</span>
<a name="l00305"></a>00305                 swapped = <span class="keyword">true</span>;
<a name="l00306"></a>00306             }
<a name="l00307"></a>00307         }
<a name="l00308"></a>00308     } <span class="keywordflow">while</span> (swapped);
<a name="l00309"></a>00309     m_isReprioritizing = <span class="keyword">false</span>;
<a name="l00310"></a>00310     m_modeStack-&gt;setCurrentIndex(0);
<a name="l00311"></a>00311     <a class="code" href="group___core_plugin.html#ga9f75e14a1a348f3f46c62b4575dbca9e">activateMode</a>(current-&gt;<a class="code" href="group___core_plugin.html#gab42870ab42d71194c7f6de4afe58fba5">uniqueModeName</a>());
<a name="l00312"></a>00312     emit <a class="code" href="group___core_plugin.html#ga43ebcb6f603d4f852c917bc5ed76c124">newModeOrder</a>(m_modes);
<a name="l00313"></a>00313 }
<a name="l00314"></a>00314 
<a name="l00315"></a>00315 
<a name="l00316"></a><a class="code" href="group___core_plugin.html#gab1fd02bc6554c6df4acfad271551230d">00316</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#gab1fd02bc6554c6df4acfad271551230d">ModeManager::setFocusToCurrentMode</a>()
<a name="l00317"></a>00317 {
<a name="l00318"></a>00318     <a class="code" href="class_core_1_1_i_mode.html">IMode</a> *mode = <a class="code" href="group___core_plugin.html#ga8b622df4a78ae2e368474999c0698306">currentMode</a>();
<a name="l00319"></a>00319     QTC_ASSERT(mode, <span class="keywordflow">return</span>);
<a name="l00320"></a>00320     QWidget *widget = mode-&gt;<a class="code" href="group___core_plugin.html#gafa470639238652ef10e435b6c28d9282">widget</a>();
<a name="l00321"></a>00321     <span class="keywordflow">if</span> (widget) {
<a name="l00322"></a>00322         QWidget *focusWidget = widget-&gt;focusWidget();
<a name="l00323"></a>00323         <span class="keywordflow">if</span> (focusWidget)
<a name="l00324"></a>00324             focusWidget-&gt;setFocus();
<a name="l00325"></a>00325         <span class="keywordflow">else</span>
<a name="l00326"></a>00326             widget-&gt;setFocus();
<a name="l00327"></a>00327     }
<a name="l00328"></a>00328 }
<a name="l00329"></a>00329 
<a name="l00330"></a><a class="code" href="group___core_plugin.html#gad031a62ca8a27a4a5fb24c7bb77fbeb5">00330</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#gad031a62ca8a27a4a5fb24c7bb77fbeb5">ModeManager::triggerAction</a>(<span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> &amp;actionId)
<a name="l00331"></a>00331 {
<a name="l00332"></a>00332     <span class="keywordflow">foreach</span>(<a class="code" href="class_core_1_1_command.html" title="The class Command represents an action like a menu item, tool button, or shortcut. You don&#39;t create Command objects directly, instead use {ActionManager::registerAction()} to register an action and retrieve a Command. The Command object represents the user visible action and its properties. If multiple actions are registered with the same ID (but different contexts) the returned Command is the shared one between these actions.">Command</a> * command, m_actions.keys()){
<a name="l00333"></a>00333         <span class="keywordflow">if</span>(command-&gt;<a class="code" href="group___core_plugin.html#ga68bf6b0115ef45e9a734956f3b0d40c5">action</a>()-&gt;objectName() == actionId) {
<a name="l00334"></a>00334             command-&gt;<a class="code" href="group___core_plugin.html#ga68bf6b0115ef45e9a734956f3b0d40c5">action</a>()-&gt;trigger();
<a name="l00335"></a>00335             <span class="keywordflow">break</span>;
<a name="l00336"></a>00336         }
<a name="l00337"></a>00337     }
<a name="l00338"></a>00338 }
</pre></div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="modemanager_8cpp.html">modemanager.cpp</a>      </li>

    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
