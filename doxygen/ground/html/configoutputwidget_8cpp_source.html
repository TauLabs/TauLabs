<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>TauLabs: /home/jb/code/TauLabs/ground/gcs/src/plugins/config/configoutputwidget.cpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="icon_128x128.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">TauLabs
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('configoutputwidget_8cpp.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">/home/jb/code/TauLabs/ground/gcs/src/plugins/config/configoutputwidget.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="configoutputwidget_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00012"></a>00012 <span class="comment">/*</span>
<a name="l00013"></a>00013 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
<a name="l00014"></a>00014 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
<a name="l00015"></a>00015 <span class="comment"> * the Free Software Foundation; either version 3 of the License, or</span>
<a name="l00016"></a>00016 <span class="comment"> * (at your option) any later version.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * This program is distributed in the hope that it will be useful, but</span>
<a name="l00019"></a>00019 <span class="comment"> * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY</span>
<a name="l00020"></a>00020 <span class="comment"> * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License</span>
<a name="l00021"></a>00021 <span class="comment"> * for more details.</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> * You should have received a copy of the GNU General Public License along</span>
<a name="l00024"></a>00024 <span class="comment"> * with this program; if not, write to the Free Software Foundation, Inc.,</span>
<a name="l00025"></a>00025 <span class="comment"> * 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span>
<a name="l00026"></a>00026 <span class="comment"> */</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="configoutputwidget_8h.html">configoutputwidget.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="outputchannelform_8h.html">outputchannelform.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="configvehicletypewidget_8h.html">configvehicletypewidget.h</a>&quot;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="telemetrymanager_8h.html">uavtalk/telemetrymanager.h</a>&quot;</span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;QDebug&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;QStringList&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;QtGui/QWidget&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;QtGui/QTextEdit&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;QtGui/QVBoxLayout&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;QtGui/QPushButton&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;QMessageBox&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;QDesktopServices&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;QUrl&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;mixersettings.h&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;actuatorcommand.h&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;actuatorsettings.h&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;systemalarms.h&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;systemsettings.h&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="uavsettingsimportexportfactory_8h.html">uavsettingsimportexport/uavsettingsimportexportfactory.h</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &lt;<a class="code" href="pluginmanager_8h.html">extensionsystem/pluginmanager.h</a>&gt;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &lt;<a class="code" href="generalsettings_8h.html">coreplugin/generalsettings.h</a>&gt;</span>
<a name="l00051"></a>00051 
<a name="l00052"></a><a class="code" href="group___config_plugin.html#gae97fadc2217af00fbdcd40904dffdfcd">00052</a> <a class="code" href="group___config_plugin.html#gae97fadc2217af00fbdcd40904dffdfcd">ConfigOutputWidget::ConfigOutputWidget</a>(QWidget *parent) : <a class="code" href="class_config_task_widget.html">ConfigTaskWidget</a>(parent),wasItMe(false)
<a name="l00053"></a>00053 {
<a name="l00054"></a>00054     m_config = <span class="keyword">new</span> Ui_OutputWidget();
<a name="l00055"></a>00055     m_config-&gt;setupUi(<span class="keyword">this</span>);
<a name="l00056"></a>00056     
<a name="l00057"></a>00057     <a class="code" href="class_extension_system_1_1_plugin_manager.html" title="Core plugin system that manages the plugins, their life cycle and their registered objects...">ExtensionSystem::PluginManager</a> *pm=ExtensionSystem::PluginManager::instance();
<a name="l00058"></a>00058     <a class="code" href="class_core_1_1_internal_1_1_general_settings.html">Core::Internal::GeneralSettings</a> * settings=pm-&gt;getObject&lt;<a class="code" href="class_core_1_1_internal_1_1_general_settings.html">Core::Internal::GeneralSettings</a>&gt;();
<a name="l00059"></a>00059     <span class="keywordflow">if</span>(!settings-&gt;<a class="code" href="group___core_plugin.html#ga264b9f5010a2928592a8175416a25f47">useExpertMode</a>())
<a name="l00060"></a>00060         m_config-&gt;saveRCOutputToRAM-&gt;setVisible(<span class="keyword">false</span>);
<a name="l00061"></a>00061 
<a name="l00062"></a>00062     <a class="code" href="class_u_a_v_settings_import_export_factory.html">UAVSettingsImportExportFactory</a> * importexportplugin =  pm-&gt;getObject&lt;<a class="code" href="class_u_a_v_settings_import_export_factory.html">UAVSettingsImportExportFactory</a>&gt;();
<a name="l00063"></a>00063     connect(importexportplugin,SIGNAL(importAboutToBegin()),<span class="keyword">this</span>,SLOT(stopTests()));
<a name="l00064"></a>00064 
<a name="l00065"></a>00065     <span class="comment">// NOTE: we have channel indices from 0 to 9, but the convention for OP is Channel 1 to Channel 10.</span>
<a name="l00066"></a>00066     <span class="comment">// Register for ActuatorSettings changes:</span>
<a name="l00067"></a>00067     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; ActuatorCommand::CHANNEL_NUMELEM; <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)
<a name="l00068"></a>00068     {
<a name="l00069"></a>00069         <a class="code" href="class_output_channel_form.html">OutputChannelForm</a> *outputForm = <span class="keyword">new</span> <a class="code" href="class_output_channel_form.html">OutputChannelForm</a>(<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>, <span class="keyword">this</span>, <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>==0);
<a name="l00070"></a>00070         m_config-&gt;channelLayout-&gt;addWidget(outputForm);
<a name="l00071"></a>00071 
<a name="l00072"></a>00072         connect(m_config-&gt;channelOutTest, SIGNAL(toggled(<span class="keywordtype">bool</span>)), outputForm, SLOT(enableChannelTest(<span class="keywordtype">bool</span>)));
<a name="l00073"></a>00073         connect(outputForm, SIGNAL(channelChanged(<span class="keywordtype">int</span>,<span class="keywordtype">int</span>)), <span class="keyword">this</span>, SLOT(sendChannelTest(<span class="keywordtype">int</span>,<span class="keywordtype">int</span>)));
<a name="l00074"></a>00074 
<a name="l00075"></a>00075         connect(outputForm, SIGNAL(formChanged()), <span class="keyword">this</span>, SLOT(do_SetDirty()));
<a name="l00076"></a>00076     }
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     connect(m_config-&gt;channelOutTest, SIGNAL(toggled(<span class="keywordtype">bool</span>)), <span class="keyword">this</span>, SLOT(runChannelTests(<span class="keywordtype">bool</span>)));
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     <span class="comment">// Configure the task widget</span>
<a name="l00081"></a>00081     <span class="comment">// Connect the help button</span>
<a name="l00082"></a>00082     connect(m_config-&gt;outputHelp, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(openHelp()));
<a name="l00083"></a>00083 
<a name="l00084"></a>00084     <a class="code" href="group___u_a_v_object_widget_utils.html#ga38c270f9a29f4e190e71414bdce82590">addApplySaveButtons</a>(m_config-&gt;saveRCOutputToRAM,m_config-&gt;saveRCOutputToSD);
<a name="l00085"></a>00085 
<a name="l00086"></a>00086     <span class="comment">// Track the ActuatorSettings object</span>
<a name="l00087"></a>00087     <a class="code" href="group___u_a_v_object_widget_utils.html#ga82f371b1291826ec74341dddfe827c83">addUAVObject</a>(<span class="stringliteral">&quot;ActuatorSettings&quot;</span>);
<a name="l00088"></a>00088 
<a name="l00089"></a>00089     <span class="comment">// Associate the buttons with their UAVO fields</span>
<a name="l00090"></a>00090     <a class="code" href="group___u_a_v_object_widget_utils.html#ga3edd7677e362be586b059c066e0a4e30">addWidget</a>(m_config-&gt;cb_outputRate4);
<a name="l00091"></a>00091     <a class="code" href="group___u_a_v_object_widget_utils.html#ga3edd7677e362be586b059c066e0a4e30">addWidget</a>(m_config-&gt;cb_outputRate3);
<a name="l00092"></a>00092     <a class="code" href="group___u_a_v_object_widget_utils.html#ga3edd7677e362be586b059c066e0a4e30">addWidget</a>(m_config-&gt;cb_outputRate2);
<a name="l00093"></a>00093     <a class="code" href="group___u_a_v_object_widget_utils.html#ga3edd7677e362be586b059c066e0a4e30">addWidget</a>(m_config-&gt;cb_outputRate1);
<a name="l00094"></a>00094     <a class="code" href="group___u_a_v_object_widget_utils.html#ga3edd7677e362be586b059c066e0a4e30">addWidget</a>(m_config-&gt;spinningArmed);
<a name="l00095"></a>00095 
<a name="l00096"></a>00096     disconnect(<span class="keyword">this</span>, SLOT(refreshWidgetsValues(<a class="code" href="class_u_a_v_object.html">UAVObject</a>*)));
<a name="l00097"></a>00097 
<a name="l00098"></a>00098     <a class="code" href="class_u_a_v_object_manager.html">UAVObjectManager</a> *objManager = pm-&gt;getObject&lt;<a class="code" href="class_u_a_v_object_manager.html">UAVObjectManager</a>&gt;();
<a name="l00099"></a>00099     <a class="code" href="class_u_a_v_object.html">UAVObject</a>* obj = objManager-&gt;<a class="code" href="group___u_a_v_objects_plugin.html#gada44cdbfa55a281b78d41abcc6834dc0">getObject</a>(<a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a>(<span class="stringliteral">&quot;ActuatorCommand&quot;</span>));
<a name="l00100"></a>00100     <span class="keywordflow">if</span>(<a class="code" href="group___u_a_v_objects_plugin.html#ga81651b86ef2cf0b05483152c6728b742">UAVObject::GetGcsTelemetryUpdateMode</a>(obj-&gt;getMetadata()) == <a class="code" href="group___u_a_v_objects_plugin.html#gga08c0580992fcd51c2b44734e2d24cac6a118268aa016a1f371149d6180bd9a366">UAVObject::UPDATEMODE_ONCHANGE</a>)
<a name="l00101"></a>00101         this-&gt;setEnabled(<span class="keyword">false</span>);
<a name="l00102"></a>00102     connect(obj,SIGNAL(objectUpdated(<a class="code" href="class_u_a_v_object.html">UAVObject</a>*)),<span class="keyword">this</span>,SLOT(disableIfNotMe(<a class="code" href="class_u_a_v_object.html">UAVObject</a>*)));
<a name="l00103"></a>00103 
<a name="l00104"></a>00104     refreshWidgetsValues();
<a name="l00105"></a>00105 }
<a name="l00106"></a><a class="code" href="group___config_plugin.html#ga8c6d4684111bd4a10d4940a803faf852">00106</a> <span class="keywordtype">void</span> <a class="code" href="group___config_plugin.html#ga8c6d4684111bd4a10d4940a803faf852">ConfigOutputWidget::enableControls</a>(<span class="keywordtype">bool</span> enable)
<a name="l00107"></a>00107 {
<a name="l00108"></a>00108     <a class="code" href="group___config_plugin.html#ga8c6d4684111bd4a10d4940a803faf852">ConfigTaskWidget::enableControls</a>(enable);
<a name="l00109"></a>00109     <span class="keywordflow">if</span>(!enable)
<a name="l00110"></a>00110         m_config-&gt;channelOutTest-&gt;setChecked(<span class="keyword">false</span>);
<a name="l00111"></a>00111     m_config-&gt;channelOutTest-&gt;setEnabled(enable);
<a name="l00112"></a>00112 }
<a name="l00113"></a>00113 
<a name="l00114"></a><a class="code" href="group___config_plugin.html#ga583ddecf4689ec9d73a39ac36d47beb5">00114</a> <a class="code" href="group___config_plugin.html#ga583ddecf4689ec9d73a39ac36d47beb5">ConfigOutputWidget::~ConfigOutputWidget</a>()
<a name="l00115"></a>00115 {
<a name="l00116"></a>00116    <span class="comment">// Do nothing</span>
<a name="l00117"></a>00117 }
<a name="l00118"></a>00118 
<a name="l00119"></a>00119 
<a name="l00120"></a>00120 <span class="comment">// ************************************</span>
<a name="l00121"></a>00121 
<a name="l00126"></a>00126 <span class="keywordtype">void</span> ConfigOutputWidget::runChannelTests(<span class="keywordtype">bool</span> state)
<a name="l00127"></a>00127 {
<a name="l00128"></a>00128     SystemAlarms * systemAlarmsObj = SystemAlarms::GetInstance(<a class="code" href="group___u_a_v_object_widget_utils.html#ga516ee05a73ac3c7c9e6132b0d7294b4a" title="ConfigTaskWidget::getObjectManager Utility function to get a pointer to the object manager...">getObjectManager</a>());
<a name="l00129"></a>00129     SystemAlarms::DataFields systemAlarms = systemAlarmsObj-&gt;getData();
<a name="l00130"></a>00130 
<a name="l00131"></a>00131     <span class="keywordflow">if</span>(state &amp;&amp; systemAlarms.Alarm[SystemAlarms::ALARM_ACTUATOR] != SystemAlarms::ALARM_OK) {
<a name="l00132"></a>00132         QMessageBox mbox;
<a name="l00133"></a>00133         mbox.setText(<a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a>(tr(<span class="stringliteral">&quot;The actuator module is in an error state.  This can also occur because there are no inputs.  Please fix these before testing outputs.&quot;</span>)));
<a name="l00134"></a>00134         mbox.setStandardButtons(QMessageBox::Ok);
<a name="l00135"></a>00135         mbox.exec();
<a name="l00136"></a>00136 
<a name="l00137"></a>00137         <span class="comment">// Unfortunately must cache this since callback will reoccur</span>
<a name="l00138"></a>00138         accInitialData = ActuatorCommand::GetInstance(<a class="code" href="group___u_a_v_object_widget_utils.html#ga516ee05a73ac3c7c9e6132b0d7294b4a" title="ConfigTaskWidget::getObjectManager Utility function to get a pointer to the object manager...">getObjectManager</a>())-&gt;getMetadata();
<a name="l00139"></a>00139 
<a name="l00140"></a>00140         m_config-&gt;channelOutTest-&gt;setChecked(<span class="keyword">false</span>);
<a name="l00141"></a>00141         <span class="keywordflow">return</span>;
<a name="l00142"></a>00142     }
<a name="l00143"></a>00143 
<a name="l00144"></a>00144     <span class="comment">// Confirm this is definitely what they want</span>
<a name="l00145"></a>00145     <span class="keywordflow">if</span>(state) {
<a name="l00146"></a>00146         QMessageBox mbox;
<a name="l00147"></a>00147         mbox.setText(<a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a>(tr(<span class="stringliteral">&quot;This option will start your motors by the amount selected on the sliders regardless of transmitter.  It is recommended to remove any blades from motors.  Are you sure you want to do this?&quot;</span>)));
<a name="l00148"></a>00148         mbox.setStandardButtons(QMessageBox::Yes | QMessageBox::No);
<a name="l00149"></a>00149         <span class="keywordtype">int</span> retval = mbox.exec();
<a name="l00150"></a>00150         <span class="keywordflow">if</span>(retval != QMessageBox::Yes) {
<a name="l00151"></a>00151             state = <span class="keyword">false</span>;
<a name="l00152"></a>00152             qDebug() &lt;&lt; <span class="stringliteral">&quot;Cancelled&quot;</span>;
<a name="l00153"></a>00153             m_config-&gt;channelOutTest-&gt;setChecked(<span class="keyword">false</span>);
<a name="l00154"></a>00154             <span class="keywordflow">return</span>;
<a name="l00155"></a>00155         }
<a name="l00156"></a>00156     }
<a name="l00157"></a>00157 
<a name="l00158"></a>00158     ActuatorCommand * obj = ActuatorCommand::GetInstance(<a class="code" href="group___u_a_v_object_widget_utils.html#ga516ee05a73ac3c7c9e6132b0d7294b4a" title="ConfigTaskWidget::getObjectManager Utility function to get a pointer to the object manager...">getObjectManager</a>());
<a name="l00159"></a>00159     UAVObject::Metadata mdata = obj-&gt;getMetadata();
<a name="l00160"></a>00160     <span class="keywordflow">if</span> (state)
<a name="l00161"></a>00161     {
<a name="l00162"></a>00162         wasItMe=<span class="keyword">true</span>;
<a name="l00163"></a>00163         accInitialData = mdata;
<a name="l00164"></a>00164         <a class="code" href="group___u_a_v_objects_plugin.html#gaa660f23e03de07c425e5162e2dc42c4f">UAVObject::SetFlightAccess</a>(mdata, <a class="code" href="group___u_a_v_objects_plugin.html#gga80357a2f38fa4be23200de86614c3d77a97e59f527995175cc60e103001470e49">UAVObject::ACCESS_READONLY</a>);
<a name="l00165"></a>00165         <a class="code" href="group___u_a_v_objects_plugin.html#gaa9fa161b9a5607e4ee1086b72f1b70e5">UAVObject::SetFlightTelemetryUpdateMode</a>(mdata, <a class="code" href="group___u_a_v_objects_plugin.html#gga08c0580992fcd51c2b44734e2d24cac6a118268aa016a1f371149d6180bd9a366">UAVObject::UPDATEMODE_ONCHANGE</a>);
<a name="l00166"></a>00166         <a class="code" href="group___u_a_v_objects_plugin.html#ga190e264f603dd8ade6b6f9e84debfb4c">UAVObject::SetGcsTelemetryAcked</a>(mdata, <span class="keyword">false</span>);
<a name="l00167"></a>00167         <a class="code" href="group___u_a_v_objects_plugin.html#ga8fdb0f35b52c8dea0a512fd411d2346e">UAVObject::SetGcsTelemetryUpdateMode</a>(mdata, <a class="code" href="group___u_a_v_objects_plugin.html#gga08c0580992fcd51c2b44734e2d24cac6a118268aa016a1f371149d6180bd9a366">UAVObject::UPDATEMODE_ONCHANGE</a>);
<a name="l00168"></a>00168         mdata.gcsTelemetryUpdatePeriod = 100;
<a name="l00169"></a>00169     }
<a name="l00170"></a>00170     <span class="keywordflow">else</span>
<a name="l00171"></a>00171     {
<a name="l00172"></a>00172         wasItMe=<span class="keyword">false</span>;
<a name="l00173"></a>00173         mdata = accInitialData; <span class="comment">// Restore metadata</span>
<a name="l00174"></a>00174     }
<a name="l00175"></a>00175     obj-&gt;setMetadata(mdata);
<a name="l00176"></a>00176     obj-&gt;updated();
<a name="l00177"></a>00177 
<a name="l00178"></a>00178 }
<a name="l00179"></a>00179 
<a name="l00180"></a>00180 <a class="code" href="class_output_channel_form.html">OutputChannelForm</a>* ConfigOutputWidget::getOutputChannelForm(<span class="keyword">const</span> <span class="keywordtype">int</span> index)<span class="keyword"> const</span>
<a name="l00181"></a>00181 <span class="keyword"></span>{
<a name="l00182"></a>00182     QList&lt;OutputChannelForm*&gt; outputChannelForms = findChildren&lt;OutputChannelForm*&gt;();
<a name="l00183"></a>00183     <span class="keywordflow">foreach</span>(<a class="code" href="class_output_channel_form.html">OutputChannelForm</a> *outputChannelForm, outputChannelForms)
<a name="l00184"></a>00184     {
<a name="l00185"></a>00185         <span class="keywordflow">if</span>( outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#ga04c058165995634381c105cad76f4209">index</a>() == index)
<a name="l00186"></a>00186             <span class="keywordflow">return</span> outputChannelForm;
<a name="l00187"></a>00187     }
<a name="l00188"></a>00188 
<a name="l00189"></a>00189     <span class="comment">// no OutputChannelForm found with given index</span>
<a name="l00190"></a>00190     <span class="keywordflow">return</span> NULL;
<a name="l00191"></a>00191 }
<a name="l00192"></a>00192 
<a name="l00196"></a>00196 <span class="keywordtype">void</span> ConfigOutputWidget::assignOutputChannel(<a class="code" href="class_u_a_v_data_object.html">UAVDataObject</a> *obj, <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> str)
<a name="l00197"></a>00197 {
<a name="l00198"></a>00198     <span class="comment">//FIXME: use signal/ slot approach</span>
<a name="l00199"></a>00199     <a class="code" href="class_u_a_v_object_field.html">UAVObjectField</a>* field = obj-&gt;<a class="code" href="group___u_a_v_objects_plugin.html#ga0c8a0350ce2c49430124b59842fff131">getField</a>(str);
<a name="l00200"></a>00200     QStringList options = field-&gt;<a class="code" href="group___u_a_v_objects_plugin.html#ga23e324a921bdf20972f940b4497a2c21">getOptions</a>();
<a name="l00201"></a>00201     <span class="keywordtype">int</span> index = options.indexOf(field-&gt;<a class="code" href="group___u_a_v_objects_plugin.html#ga60a1c56703ea2c28f76d1eaf05554f5e">getValue</a>().toString());
<a name="l00202"></a>00202 
<a name="l00203"></a>00203     <a class="code" href="class_output_channel_form.html">OutputChannelForm</a> *outputChannelForm = getOutputChannelForm(index);
<a name="l00204"></a>00204     <span class="keywordflow">if</span>(outputChannelForm)
<a name="l00205"></a>00205         outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#gacdf981958669fa47fe697e39fa529a16">setAssignment</a>(str);
<a name="l00206"></a>00206 }
<a name="l00207"></a>00207 
<a name="l00212"></a>00212 <span class="keywordtype">void</span> ConfigOutputWidget::sendChannelTest(<span class="keywordtype">int</span> index, <span class="keywordtype">int</span> value)
<a name="l00213"></a>00213 {
<a name="l00214"></a>00214     <span class="keywordflow">if</span> (!m_config-&gt;channelOutTest-&gt;isChecked())
<a name="l00215"></a>00215         <span class="keywordflow">return</span>;
<a name="l00216"></a>00216 
<a name="l00217"></a>00217     <span class="keywordflow">if</span>(index &lt; 0 || (<span class="keywordtype">unsigned</span>)index &gt;= ActuatorCommand::CHANNEL_NUMELEM)
<a name="l00218"></a>00218         <span class="keywordflow">return</span>;
<a name="l00219"></a>00219 
<a name="l00220"></a>00220     ActuatorCommand *actuatorCommand = ActuatorCommand::GetInstance(<a class="code" href="group___u_a_v_object_widget_utils.html#ga516ee05a73ac3c7c9e6132b0d7294b4a" title="ConfigTaskWidget::getObjectManager Utility function to get a pointer to the object manager...">getObjectManager</a>());
<a name="l00221"></a>00221     Q_ASSERT(actuatorCommand);
<a name="l00222"></a>00222     ActuatorCommand::DataFields actuatorCommandFields = actuatorCommand-&gt;getData();
<a name="l00223"></a>00223     actuatorCommandFields.Channel[index] = value;
<a name="l00224"></a>00224     actuatorCommand-&gt;setData(actuatorCommandFields);
<a name="l00225"></a>00225 }
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 <span class="comment">/********************************</span>
<a name="l00230"></a>00230 <span class="comment">  *  Output settings</span>
<a name="l00231"></a>00231 <span class="comment">  *******************************/</span>
<a name="l00232"></a>00232 
<a name="l00236"></a>00236 <span class="keywordtype">void</span> ConfigOutputWidget::refreshWidgetsValues(<a class="code" href="class_u_a_v_object.html">UAVObject</a> * obj)
<a name="l00237"></a>00237 {
<a name="l00238"></a>00238     Q_UNUSED(obj);
<a name="l00239"></a>00239 
<a name="l00240"></a>00240     <span class="comment">// Get Actuator Settings</span>
<a name="l00241"></a>00241     ActuatorSettings *actuatorSettings = ActuatorSettings::GetInstance(<a class="code" href="group___u_a_v_object_widget_utils.html#ga516ee05a73ac3c7c9e6132b0d7294b4a" title="ConfigTaskWidget::getObjectManager Utility function to get a pointer to the object manager...">getObjectManager</a>());
<a name="l00242"></a>00242     Q_ASSERT(actuatorSettings);
<a name="l00243"></a>00243     ActuatorSettings::DataFields actuatorSettingsData = actuatorSettings-&gt;getData();
<a name="l00244"></a>00244 
<a name="l00245"></a>00245     <span class="comment">// get channel descriptions</span>
<a name="l00246"></a>00246     QStringList ChannelDesc = <a class="code" href="group___config_plugin.html#ga65301666bc0f14e94e8f718af4e6cc08">ConfigVehicleTypeWidget::getChannelDescriptions</a>();
<a name="l00247"></a>00247 
<a name="l00248"></a>00248     <span class="comment">// Initialize output forms</span>
<a name="l00249"></a>00249     QList&lt;OutputChannelForm*&gt; outputChannelForms = findChildren&lt;OutputChannelForm*&gt;();
<a name="l00250"></a>00250     <span class="keywordflow">foreach</span>(<a class="code" href="class_output_channel_form.html">OutputChannelForm</a> *outputChannelForm, outputChannelForms)
<a name="l00251"></a>00251     {
<a name="l00252"></a>00252         outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#gacdf981958669fa47fe697e39fa529a16">setAssignment</a>(ChannelDesc[outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#ga04c058165995634381c105cad76f4209">index</a>()]);
<a name="l00253"></a>00253 
<a name="l00254"></a>00254         <span class="comment">// init min,max,neutral</span>
<a name="l00255"></a>00255         <span class="keywordtype">int</span> minValue = actuatorSettingsData.ChannelMin[outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#ga04c058165995634381c105cad76f4209">index</a>()];
<a name="l00256"></a>00256         <span class="keywordtype">int</span> maxValue = actuatorSettingsData.ChannelMax[outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#ga04c058165995634381c105cad76f4209">index</a>()];
<a name="l00257"></a>00257         outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#gad231eb8bdcfa798ec5246049fdd07ae4">minmax</a>(minValue, maxValue);
<a name="l00258"></a>00258 
<a name="l00259"></a>00259         <span class="keywordtype">int</span> neutral = actuatorSettingsData.ChannelNeutral[outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#ga04c058165995634381c105cad76f4209">index</a>()];
<a name="l00260"></a>00260         outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#ga46c4da3a30cc25c1178b9f9a125c8660">setNeutral</a>(neutral);
<a name="l00261"></a>00261     }
<a name="l00262"></a>00262 
<a name="l00263"></a>00263     <span class="comment">// Get the SpinWhileArmed setting</span>
<a name="l00264"></a>00264     m_config-&gt;spinningArmed-&gt;setChecked(actuatorSettingsData.MotorsSpinWhileArmed == ActuatorSettings::MOTORSSPINWHILEARMED_TRUE);
<a name="l00265"></a>00265 
<a name="l00266"></a>00266     <span class="comment">// Get Output rates for both banks</span>
<a name="l00267"></a>00267     <span class="keywordflow">if</span>(m_config-&gt;cb_outputRate1-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[0]))==-1)
<a name="l00268"></a>00268     {
<a name="l00269"></a>00269         m_config-&gt;cb_outputRate1-&gt;addItem(QString::number(actuatorSettingsData.ChannelUpdateFreq[0]));
<a name="l00270"></a>00270     }
<a name="l00271"></a>00271     <span class="keywordflow">if</span>(m_config-&gt;cb_outputRate2-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[1]))==-1)
<a name="l00272"></a>00272     {
<a name="l00273"></a>00273         m_config-&gt;cb_outputRate2-&gt;addItem(QString::number(actuatorSettingsData.ChannelUpdateFreq[1]));
<a name="l00274"></a>00274     }
<a name="l00275"></a>00275     m_config-&gt;cb_outputRate1-&gt;setCurrentIndex(m_config-&gt;cb_outputRate1-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[0])));
<a name="l00276"></a>00276     m_config-&gt;cb_outputRate2-&gt;setCurrentIndex(m_config-&gt;cb_outputRate2-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[1])));
<a name="l00277"></a>00277 
<a name="l00278"></a>00278     <a class="code" href="class_extension_system_1_1_plugin_manager.html" title="Core plugin system that manages the plugins, their life cycle and their registered objects...">ExtensionSystem::PluginManager</a> *pm = ExtensionSystem::PluginManager::instance();
<a name="l00279"></a>00279     Q_ASSERT(pm);
<a name="l00280"></a>00280     <a class="code" href="class_u_a_v_object_util_manager.html">UAVObjectUtilManager</a>* utilMngr = pm-&gt;getObject&lt;<a class="code" href="class_u_a_v_object_util_manager.html">UAVObjectUtilManager</a>&gt;();
<a name="l00281"></a>00281     <span class="keywordflow">if</span> (utilMngr) {
<a name="l00282"></a>00282         <span class="keywordtype">int</span> board = utilMngr-&gt;<a class="code" href="group___u_a_v_object_util_plugin.html#ga45c8f562def61c9273af2b243d981114">getBoardModel</a>();
<a name="l00283"></a>00283         <span class="keywordflow">if</span> ((board &amp; 0xff00) == 1024) {
<a name="l00284"></a>00284             <span class="comment">// CopterControl family</span>
<a name="l00285"></a>00285             m_config-&gt;chBank1-&gt;setText(<span class="stringliteral">&quot;1-3&quot;</span>);
<a name="l00286"></a>00286             m_config-&gt;chBank2-&gt;setText(<span class="stringliteral">&quot;4&quot;</span>);
<a name="l00287"></a>00287             m_config-&gt;chBank3-&gt;setText(<span class="stringliteral">&quot;5,7-8&quot;</span>);
<a name="l00288"></a>00288             m_config-&gt;chBank4-&gt;setText(<span class="stringliteral">&quot;6,9-10&quot;</span>);
<a name="l00289"></a>00289             m_config-&gt;cb_outputRate1-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00290"></a>00290             m_config-&gt;cb_outputRate2-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00291"></a>00291             m_config-&gt;cb_outputRate3-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00292"></a>00292             m_config-&gt;cb_outputRate4-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00293"></a>00293             <span class="keywordflow">if</span>(m_config-&gt;cb_outputRate3-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[2]))==-1)
<a name="l00294"></a>00294             {
<a name="l00295"></a>00295                 m_config-&gt;cb_outputRate3-&gt;addItem(QString::number(actuatorSettingsData.ChannelUpdateFreq[2]));
<a name="l00296"></a>00296             }
<a name="l00297"></a>00297             <span class="keywordflow">if</span>(m_config-&gt;cb_outputRate4-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[3]))==-1)
<a name="l00298"></a>00298             {
<a name="l00299"></a>00299                 m_config-&gt;cb_outputRate4-&gt;addItem(QString::number(actuatorSettingsData.ChannelUpdateFreq[3]));
<a name="l00300"></a>00300             }
<a name="l00301"></a>00301             m_config-&gt;cb_outputRate3-&gt;setCurrentIndex(m_config-&gt;cb_outputRate3-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[2])));
<a name="l00302"></a>00302             m_config-&gt;cb_outputRate4-&gt;setCurrentIndex(m_config-&gt;cb_outputRate4-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[3])));
<a name="l00303"></a>00303         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((board &amp; 0xff00) == 0x0900 ) {
<a name="l00304"></a>00304             <span class="comment">// Revolution/RevoMini family</span>
<a name="l00305"></a>00305             m_config-&gt;cb_outputRate1-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00306"></a>00306             m_config-&gt;cb_outputRate2-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00307"></a>00307             m_config-&gt;cb_outputRate3-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00308"></a>00308             m_config-&gt;cb_outputRate4-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00309"></a>00309             m_config-&gt;chBank1-&gt;setText(<span class="stringliteral">&quot;1-2&quot;</span>);
<a name="l00310"></a>00310             m_config-&gt;chBank2-&gt;setText(<span class="stringliteral">&quot;3&quot;</span>);
<a name="l00311"></a>00311             m_config-&gt;chBank3-&gt;setText(<span class="stringliteral">&quot;4&quot;</span>);
<a name="l00312"></a>00312             m_config-&gt;chBank4-&gt;setText(<span class="stringliteral">&quot;5-6&quot;</span>);
<a name="l00313"></a>00313             <span class="keywordflow">if</span>(m_config-&gt;cb_outputRate3-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[2]))==-1)
<a name="l00314"></a>00314             {
<a name="l00315"></a>00315                 m_config-&gt;cb_outputRate3-&gt;addItem(QString::number(actuatorSettingsData.ChannelUpdateFreq[2]));
<a name="l00316"></a>00316             }
<a name="l00317"></a>00317             <span class="keywordflow">if</span>(m_config-&gt;cb_outputRate4-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[3]))==-1)
<a name="l00318"></a>00318             {
<a name="l00319"></a>00319                 m_config-&gt;cb_outputRate4-&gt;addItem(QString::number(actuatorSettingsData.ChannelUpdateFreq[3]));
<a name="l00320"></a>00320             }
<a name="l00321"></a>00321             m_config-&gt;cb_outputRate3-&gt;setCurrentIndex(m_config-&gt;cb_outputRate3-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[2])));
<a name="l00322"></a>00322             m_config-&gt;cb_outputRate4-&gt;setCurrentIndex(m_config-&gt;cb_outputRate4-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[3])));
<a name="l00323"></a>00323         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((board &amp; 0xff00) == 0x8100 ) {
<a name="l00324"></a>00324             <span class="comment">// Freedom</span>
<a name="l00325"></a>00325             m_config-&gt;cb_outputRate1-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00326"></a>00326             m_config-&gt;cb_outputRate2-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00327"></a>00327             m_config-&gt;cb_outputRate3-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00328"></a>00328             m_config-&gt;cb_outputRate4-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00329"></a>00329             m_config-&gt;chBank1-&gt;setText(<span class="stringliteral">&quot;1-2&quot;</span>);
<a name="l00330"></a>00330             m_config-&gt;chBank2-&gt;setText(<span class="stringliteral">&quot;3&quot;</span>);
<a name="l00331"></a>00331             m_config-&gt;chBank3-&gt;setText(<span class="stringliteral">&quot;4-5&quot;</span>);
<a name="l00332"></a>00332             m_config-&gt;chBank4-&gt;setText(<span class="stringliteral">&quot;6&quot;</span>);
<a name="l00333"></a>00333             <span class="keywordflow">if</span>(m_config-&gt;cb_outputRate3-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[2]))==-1)
<a name="l00334"></a>00334             {
<a name="l00335"></a>00335                 m_config-&gt;cb_outputRate3-&gt;addItem(QString::number(actuatorSettingsData.ChannelUpdateFreq[2]));
<a name="l00336"></a>00336             }
<a name="l00337"></a>00337             <span class="keywordflow">if</span>(m_config-&gt;cb_outputRate4-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[3]))==-1)
<a name="l00338"></a>00338             {
<a name="l00339"></a>00339                 m_config-&gt;cb_outputRate4-&gt;addItem(QString::number(actuatorSettingsData.ChannelUpdateFreq[3]));
<a name="l00340"></a>00340             }
<a name="l00341"></a>00341             m_config-&gt;cb_outputRate3-&gt;setCurrentIndex(m_config-&gt;cb_outputRate3-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[2])));
<a name="l00342"></a>00342             m_config-&gt;cb_outputRate4-&gt;setCurrentIndex(m_config-&gt;cb_outputRate4-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[3])));
<a name="l00343"></a>00343         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((board &amp; 0xff00) == 0x8200 ) {
<a name="l00344"></a>00344             <span class="comment">// FlyingF3</span>
<a name="l00345"></a>00345             m_config-&gt;cb_outputRate1-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00346"></a>00346             m_config-&gt;cb_outputRate2-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00347"></a>00347             m_config-&gt;cb_outputRate3-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00348"></a>00348             m_config-&gt;cb_outputRate4-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00349"></a>00349             m_config-&gt;chBank1-&gt;setText(<span class="stringliteral">&quot;1-4&quot;</span>);
<a name="l00350"></a>00350             m_config-&gt;chBank2-&gt;setText(<span class="stringliteral">&quot;5-7&quot;</span>);
<a name="l00351"></a>00351             m_config-&gt;chBank3-&gt;setText(<span class="stringliteral">&quot;8-10&quot;</span>);
<a name="l00352"></a>00352             m_config-&gt;chBank4-&gt;setText(<span class="stringliteral">&quot;11&quot;</span>);
<a name="l00353"></a>00353             <span class="keywordflow">if</span>(m_config-&gt;cb_outputRate3-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[2]))==-1)
<a name="l00354"></a>00354             {
<a name="l00355"></a>00355                 m_config-&gt;cb_outputRate3-&gt;addItem(QString::number(actuatorSettingsData.ChannelUpdateFreq[2]));
<a name="l00356"></a>00356             }
<a name="l00357"></a>00357             <span class="keywordflow">if</span>(m_config-&gt;cb_outputRate4-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[3]))==-1)
<a name="l00358"></a>00358             {
<a name="l00359"></a>00359                 m_config-&gt;cb_outputRate4-&gt;addItem(QString::number(actuatorSettingsData.ChannelUpdateFreq[3]));
<a name="l00360"></a>00360             }
<a name="l00361"></a>00361             m_config-&gt;cb_outputRate3-&gt;setCurrentIndex(m_config-&gt;cb_outputRate3-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[2])));
<a name="l00362"></a>00362             m_config-&gt;cb_outputRate4-&gt;setCurrentIndex(m_config-&gt;cb_outputRate4-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[3])));
<a name="l00363"></a>00363         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((board &amp; 0xff00) == 0x8600 ) {
<a name="l00364"></a>00364             <span class="comment">// Quanton</span>
<a name="l00365"></a>00365             m_config-&gt;cb_outputRate1-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00366"></a>00366             m_config-&gt;cb_outputRate2-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00367"></a>00367             m_config-&gt;cb_outputRate3-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00368"></a>00368             m_config-&gt;cb_outputRate4-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00369"></a>00369             m_config-&gt;chBank1-&gt;setText(<span class="stringliteral">&quot;1-4&quot;</span>);
<a name="l00370"></a>00370             m_config-&gt;chBank2-&gt;setText(<span class="stringliteral">&quot;5-6&quot;</span>);
<a name="l00371"></a>00371             m_config-&gt;chBank3-&gt;setText(<span class="stringliteral">&quot;7&quot;</span>);
<a name="l00372"></a>00372             m_config-&gt;chBank4-&gt;setText(<span class="stringliteral">&quot;8&quot;</span>);
<a name="l00373"></a>00373             <span class="keywordflow">if</span>(m_config-&gt;cb_outputRate3-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[2]))==-1)
<a name="l00374"></a>00374             {
<a name="l00375"></a>00375                 m_config-&gt;cb_outputRate3-&gt;addItem(QString::number(actuatorSettingsData.ChannelUpdateFreq[2]));
<a name="l00376"></a>00376             }
<a name="l00377"></a>00377             <span class="keywordflow">if</span>(m_config-&gt;cb_outputRate4-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[3]))==-1)
<a name="l00378"></a>00378             {
<a name="l00379"></a>00379                 m_config-&gt;cb_outputRate4-&gt;addItem(QString::number(actuatorSettingsData.ChannelUpdateFreq[3]));
<a name="l00380"></a>00380             }
<a name="l00381"></a>00381             m_config-&gt;cb_outputRate3-&gt;setCurrentIndex(m_config-&gt;cb_outputRate3-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[2])));
<a name="l00382"></a>00382             m_config-&gt;cb_outputRate4-&gt;setCurrentIndex(m_config-&gt;cb_outputRate4-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[3])));
<a name="l00383"></a>00383         } <span class="keywordflow">else</span> {
<a name="l00384"></a>00384             <span class="comment">// Unknown</span>
<a name="l00385"></a>00385             m_config-&gt;cb_outputRate1-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00386"></a>00386             m_config-&gt;cb_outputRate2-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00387"></a>00387             m_config-&gt;cb_outputRate3-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00388"></a>00388             m_config-&gt;cb_outputRate4-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00389"></a>00389             m_config-&gt;chBank1-&gt;setText(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00390"></a>00390             m_config-&gt;chBank2-&gt;setText(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00391"></a>00391             m_config-&gt;chBank3-&gt;setText(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00392"></a>00392             m_config-&gt;chBank4-&gt;setText(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00393"></a>00393             <span class="keywordflow">if</span>(m_config-&gt;cb_outputRate3-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[2]))==-1)
<a name="l00394"></a>00394             {
<a name="l00395"></a>00395                 m_config-&gt;cb_outputRate3-&gt;addItem(QString::number(actuatorSettingsData.ChannelUpdateFreq[2]));
<a name="l00396"></a>00396             }
<a name="l00397"></a>00397             <span class="keywordflow">if</span>(m_config-&gt;cb_outputRate4-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[3]))==-1)
<a name="l00398"></a>00398             {
<a name="l00399"></a>00399                 m_config-&gt;cb_outputRate4-&gt;addItem(QString::number(actuatorSettingsData.ChannelUpdateFreq[3]));
<a name="l00400"></a>00400             }
<a name="l00401"></a>00401             m_config-&gt;cb_outputRate3-&gt;setCurrentIndex(m_config-&gt;cb_outputRate3-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[2])));
<a name="l00402"></a>00402             m_config-&gt;cb_outputRate4-&gt;setCurrentIndex(m_config-&gt;cb_outputRate4-&gt;findText(QString::number(actuatorSettingsData.ChannelUpdateFreq[3])));
<a name="l00403"></a>00403         }
<a name="l00404"></a>00404     }
<a name="l00405"></a>00405 
<a name="l00406"></a>00406     <span class="comment">// Get Channel ranges:</span>
<a name="l00407"></a>00407     <span class="keywordflow">foreach</span>(<a class="code" href="class_output_channel_form.html">OutputChannelForm</a> *outputChannelForm, outputChannelForms)
<a name="l00408"></a>00408     {
<a name="l00409"></a>00409         <span class="keywordtype">int</span> minValue = actuatorSettingsData.ChannelMin[outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#ga04c058165995634381c105cad76f4209">index</a>()];
<a name="l00410"></a>00410         <span class="keywordtype">int</span> maxValue = actuatorSettingsData.ChannelMax[outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#ga04c058165995634381c105cad76f4209">index</a>()];
<a name="l00411"></a>00411         outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#gad231eb8bdcfa798ec5246049fdd07ae4">minmax</a>(minValue, maxValue);
<a name="l00412"></a>00412 
<a name="l00413"></a>00413         <span class="keywordtype">int</span> neutral = actuatorSettingsData.ChannelNeutral[outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#ga04c058165995634381c105cad76f4209">index</a>()];
<a name="l00414"></a>00414         outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#ga46c4da3a30cc25c1178b9f9a125c8660">setNeutral</a>(neutral);
<a name="l00415"></a>00415     }
<a name="l00416"></a>00416 }
<a name="l00417"></a>00417 
<a name="l00421"></a>00421 <span class="keywordtype">void</span> ConfigOutputWidget::updateObjectsFromWidgets()
<a name="l00422"></a>00422 {
<a name="l00423"></a>00423     emit <a class="code" href="group___u_a_v_object_widget_utils.html#gae43eee3bcf829dcfc91b17c25bc5db95">updateObjectsFromWidgetsRequested</a>();
<a name="l00424"></a>00424 
<a name="l00425"></a>00425     ActuatorSettings *actuatorSettings = ActuatorSettings::GetInstance(<a class="code" href="group___u_a_v_object_widget_utils.html#ga516ee05a73ac3c7c9e6132b0d7294b4a" title="ConfigTaskWidget::getObjectManager Utility function to get a pointer to the object manager...">getObjectManager</a>());
<a name="l00426"></a>00426     Q_ASSERT(actuatorSettings);
<a name="l00427"></a>00427     <span class="keywordflow">if</span>(actuatorSettings) {
<a name="l00428"></a>00428         ActuatorSettings::DataFields actuatorSettingsData = actuatorSettings-&gt;getData();
<a name="l00429"></a>00429 
<a name="l00430"></a>00430         <span class="comment">// Set channel ranges</span>
<a name="l00431"></a>00431         QList&lt;OutputChannelForm*&gt; outputChannelForms = findChildren&lt;OutputChannelForm*&gt;();
<a name="l00432"></a>00432         <span class="keywordflow">foreach</span>(<a class="code" href="class_output_channel_form.html">OutputChannelForm</a> *outputChannelForm, outputChannelForms)
<a name="l00433"></a>00433         {
<a name="l00434"></a>00434             actuatorSettingsData.ChannelMax[outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#ga04c058165995634381c105cad76f4209">index</a>()] = outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#gadeee570b83855701e61945279673cd59">max</a>();
<a name="l00435"></a>00435             actuatorSettingsData.ChannelMin[outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#ga04c058165995634381c105cad76f4209">index</a>()] = outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#gac5d132282f1a4c2233999a1041995124">min</a>();
<a name="l00436"></a>00436             actuatorSettingsData.ChannelNeutral[outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#ga04c058165995634381c105cad76f4209">index</a>()] = outputChannelForm-&gt;<a class="code" href="group___config_plugin.html#ga7ec2288bf27bf15dfb962c5e965d008e">neutral</a>();
<a name="l00437"></a>00437         }
<a name="l00438"></a>00438 
<a name="l00439"></a>00439         <span class="comment">// Set update rates</span>
<a name="l00440"></a>00440         actuatorSettingsData.ChannelUpdateFreq[0] = m_config-&gt;cb_outputRate1-&gt;currentText().toUInt();
<a name="l00441"></a>00441         actuatorSettingsData.ChannelUpdateFreq[1] = m_config-&gt;cb_outputRate2-&gt;currentText().toUInt();
<a name="l00442"></a>00442         actuatorSettingsData.ChannelUpdateFreq[2] = m_config-&gt;cb_outputRate3-&gt;currentText().toUInt();
<a name="l00443"></a>00443         actuatorSettingsData.ChannelUpdateFreq[3] = m_config-&gt;cb_outputRate4-&gt;currentText().toUInt();
<a name="l00444"></a>00444 
<a name="l00445"></a>00445         <span class="keywordflow">if</span>(m_config-&gt;spinningArmed-&gt;isChecked() == <span class="keyword">true</span>)
<a name="l00446"></a>00446             actuatorSettingsData.MotorsSpinWhileArmed = ActuatorSettings::MOTORSSPINWHILEARMED_TRUE;
<a name="l00447"></a>00447         <span class="keywordflow">else</span>
<a name="l00448"></a>00448             actuatorSettingsData.MotorsSpinWhileArmed = ActuatorSettings::MOTORSSPINWHILEARMED_FALSE;
<a name="l00449"></a>00449 
<a name="l00450"></a>00450         <span class="comment">// Apply settings</span>
<a name="l00451"></a>00451         actuatorSettings-&gt;setData(actuatorSettingsData);
<a name="l00452"></a>00452     }
<a name="l00453"></a>00453 }
<a name="l00454"></a>00454 
<a name="l00455"></a>00455 <span class="keywordtype">void</span> ConfigOutputWidget::openHelp()
<a name="l00456"></a>00456 {
<a name="l00457"></a>00457 
<a name="l00458"></a>00458     QDesktopServices::openUrl( QUrl(<span class="stringliteral">&quot;http://wiki.openpilot.org/x/WIGf&quot;</span>, QUrl::StrictMode) );
<a name="l00459"></a>00459 }
<a name="l00460"></a>00460 
<a name="l00461"></a>00461 <span class="keywordtype">void</span> ConfigOutputWidget::stopTests()
<a name="l00462"></a>00462 {
<a name="l00463"></a>00463     m_config-&gt;channelOutTest-&gt;setChecked(<span class="keyword">false</span>);
<a name="l00464"></a>00464 }
<a name="l00465"></a>00465 
<a name="l00466"></a>00466 <span class="keywordtype">void</span> ConfigOutputWidget::disableIfNotMe(<a class="code" href="class_u_a_v_object.html">UAVObject</a>* obj)
<a name="l00467"></a>00467 {
<a name="l00468"></a>00468     <span class="keywordflow">if</span>(<a class="code" href="group___u_a_v_objects_plugin.html#ga81651b86ef2cf0b05483152c6728b742">UAVObject::GetGcsTelemetryUpdateMode</a>(obj-&gt;<a class="code" href="group___u_a_v_objects_plugin.html#gaadeb5af3a70679bcb2b6360274e9c7de">getMetadata</a>()) == <a class="code" href="group___u_a_v_objects_plugin.html#gga08c0580992fcd51c2b44734e2d24cac6a118268aa016a1f371149d6180bd9a366">UAVObject::UPDATEMODE_ONCHANGE</a>)
<a name="l00469"></a>00469     {
<a name="l00470"></a>00470         <span class="keywordflow">if</span>(!wasItMe)
<a name="l00471"></a>00471             this-&gt;setEnabled(<span class="keyword">false</span>);
<a name="l00472"></a>00472     }
<a name="l00473"></a>00473     <span class="keywordflow">else</span>
<a name="l00474"></a>00474         this-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00475"></a>00475 }
<a name="l00476"></a>00476 
<a name="l00480"></a>00480 <span class="keywordtype">void</span> ConfigOutputWidget::do_SetDirty()
<a name="l00481"></a>00481 {
<a name="l00482"></a>00482     <a class="code" href="group___u_a_v_object_widget_utils.html#gae75127fbfffe10458defc31a6a18c0f8">setDirty</a>(<span class="keyword">true</span>);
<a name="l00483"></a>00483 }
</pre></div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="configoutputwidget_8cpp.html">configoutputwidget.cpp</a>      </li>

    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
