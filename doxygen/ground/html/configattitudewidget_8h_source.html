<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>TauLabs: /home/jb/code/TauLabs/ground/gcs/src/plugins/config/configattitudewidget.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="icon_128x128.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">TauLabs
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('configattitudewidget_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">/home/jb/code/TauLabs/ground/gcs/src/plugins/config/configattitudewidget.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="configattitudewidget_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00013"></a>00013 <span class="comment">/*</span>
<a name="l00014"></a>00014 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
<a name="l00015"></a>00015 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
<a name="l00016"></a>00016 <span class="comment"> * the Free Software Foundation; either version 3 of the License, or</span>
<a name="l00017"></a>00017 <span class="comment"> * (at your option) any later version.</span>
<a name="l00018"></a>00018 <span class="comment"> *</span>
<a name="l00019"></a>00019 <span class="comment"> * This program is distributed in the hope that it will be useful, but</span>
<a name="l00020"></a>00020 <span class="comment"> * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY</span>
<a name="l00021"></a>00021 <span class="comment"> * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License</span>
<a name="l00022"></a>00022 <span class="comment"> * for more details.</span>
<a name="l00023"></a>00023 <span class="comment"> *</span>
<a name="l00024"></a>00024 <span class="comment"> * You should have received a copy of the GNU General Public License along</span>
<a name="l00025"></a>00025 <span class="comment"> * with this program; if not, write to the Free Software Foundation, Inc.,</span>
<a name="l00026"></a>00026 <span class="comment"> * 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span>
<a name="l00027"></a>00027 <span class="comment"> */</span>
<a name="l00028"></a>00028 <span class="preprocessor">#ifndef CONFIGATTITUDEWIDGET_H</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#define CONFIGATTITUDEWIDGET_H</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;ui_attitude.h&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="calibration_8h.html" title="Gui-less support class for calibration.">calibration.h</a>&quot;</span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="configtaskwidget_8h.html">configtaskwidget.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="pluginmanager_8h.html">extensionsystem/pluginmanager.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="uavobjectmanager_8h.html">uavobjectmanager.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="uavobject_8h.html">uavobject.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;QtGui/QWidget&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;QtSvg/QSvgRenderer&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;QtSvg/QGraphicsSvgItem&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;QList&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;QTimer&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;QMutex&gt;</span>
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="keyword">class </span>Ui_Widget;
<a name="l00046"></a>00046 
<a name="l00047"></a><a class="code" href="class_config_attitude_widget.html">00047</a> <span class="keyword">class </span><a class="code" href="class_config_attitude_widget.html">ConfigAttitudeWidget</a>: <span class="keyword">public</span> <a class="code" href="class_config_task_widget.html">ConfigTaskWidget</a>
<a name="l00048"></a>00048 {
<a name="l00049"></a>00049     Q_OBJECT
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="keyword">public</span>:
<a name="l00052"></a>00052     <a class="code" href="group___config_plugin.html#ga56d10f1f43df3e0490f765a0e36eba72">ConfigAttitudeWidget</a>(QWidget *parent = 0);
<a name="l00053"></a>00053     <a class="code" href="group___config_plugin.html#ga6a068a00a4c75c776ee941255797e705">~ConfigAttitudeWidget</a>();
<a name="l00054"></a>00054     
<a name="l00055"></a>00055 <span class="keyword">protected</span>:
<a name="l00056"></a>00056     <span class="keywordtype">void</span> <a class="code" href="group___config_plugin.html#ga3a79765d89dea1538f1c4393e19a2f39">showEvent</a>(QShowEvent *event);
<a name="l00057"></a>00057     <span class="keywordtype">void</span> <a class="code" href="group___config_plugin.html#ga6422c7d13c247e91f9f9f9bc1d5a8531">resizeEvent</a>(QResizeEvent *event);
<a name="l00058"></a>00058 
<a name="l00059"></a><a class="code" href="group___config_plugin.html#ga4b85d588b6292a6f8755725ccca770fb">00059</a>     <a class="code" href="class_calibration.html" title="The Calibration class is a UI free algorithm that can be connected to any interfaces. As such it only communicates with the UI via signals and slots, but has no direct handles to any particular controls or widgets.">Calibration</a> <a class="code" href="group___config_plugin.html#ga4b85d588b6292a6f8755725ccca770fb">calibration</a>;
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="keyword">private</span>:
<a name="l00062"></a>00062     <span class="keywordtype">void</span> drawVariancesGraph();
<a name="l00063"></a>00063 
<a name="l00064"></a>00064     Ui_AttitudeWidget *m_ui;
<a name="l00065"></a>00065     QGraphicsSvgItem *paperplane;
<a name="l00066"></a>00066     QGraphicsSvgItem *sensorsBargraph;
<a name="l00067"></a>00067     QGraphicsSvgItem *accel_x;
<a name="l00068"></a>00068     QGraphicsSvgItem *accel_y;
<a name="l00069"></a>00069     QGraphicsSvgItem *accel_z;
<a name="l00070"></a>00070     QGraphicsSvgItem *gyro_x;
<a name="l00071"></a>00071     QGraphicsSvgItem *gyro_y;
<a name="l00072"></a>00072     QGraphicsSvgItem *gyro_z;
<a name="l00073"></a>00073     QGraphicsSvgItem *mag_x;
<a name="l00074"></a>00074     QGraphicsSvgItem *mag_y;
<a name="l00075"></a>00075     QGraphicsSvgItem *mag_z;
<a name="l00076"></a>00076     QGraphicsSvgItem *baro;
<a name="l00077"></a>00077     QMutex sensorsUpdateLock;
<a name="l00078"></a>00078     <span class="keywordtype">double</span> maxBarHeight;
<a name="l00079"></a>00079     <span class="keywordtype">int</span> phaseCounter;
<a name="l00080"></a>00080     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">double</span> maxVarValue;
<a name="l00081"></a>00081     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> calibrationDelay = 10;
<a name="l00082"></a>00082 
<a name="l00083"></a>00083     QList&lt;double&gt; gyro_accum_x;
<a name="l00084"></a>00084     QList&lt;double&gt; gyro_accum_y;
<a name="l00085"></a>00085     QList&lt;double&gt; gyro_accum_z;
<a name="l00086"></a>00086     QList&lt;double&gt; accel_accum_x;
<a name="l00087"></a>00087     QList&lt;double&gt; accel_accum_y;
<a name="l00088"></a>00088     QList&lt;double&gt; accel_accum_z;
<a name="l00089"></a>00089     QList&lt;double&gt; mag_accum_x;
<a name="l00090"></a>00090     QList&lt;double&gt; mag_accum_y;
<a name="l00091"></a>00091     QList&lt;double&gt; mag_accum_z;
<a name="l00092"></a>00092     QList&lt;double&gt; baro_accum;
<a name="l00093"></a>00093 
<a name="l00094"></a>00094     <span class="keywordtype">double</span> accel_data_x[6], accel_data_y[6], accel_data_z[6];
<a name="l00095"></a>00095     <span class="keywordtype">double</span> mag_data_x[6], mag_data_y[6], mag_data_z[6];
<a name="l00096"></a>00096 
<a name="l00097"></a>00097     UAVObject::Metadata initialAccelsMdata;
<a name="l00098"></a>00098     UAVObject::Metadata initialGyrosMdata;
<a name="l00099"></a>00099     UAVObject::Metadata initialMagMdata;
<a name="l00100"></a>00100     UAVObject::Metadata initialBaroMdata;
<a name="l00101"></a>00101     <span class="keywordtype">float</span> initialMagCorrectionRate;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> NOISE_SAMPLES = 100;
<a name="l00104"></a>00104 
<a name="l00105"></a>00105     QMap&lt;QString, UAVObject::Metadata&gt; originalMetaData;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107     <span class="keywordtype">bool</span> board_has_accelerometer;
<a name="l00108"></a>00108     <span class="keywordtype">bool</span> board_has_magnetometer;
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 <span class="keyword">private</span> slots:
<a name="l00112"></a>00112     <span class="keyword">virtual</span> <span class="keywordtype">void</span> refreshWidgetsValues(<a class="code" href="class_u_a_v_object.html">UAVObject</a> * obj=NULL);
<a name="l00113"></a>00113 
<a name="l00115"></a>00115     <span class="keywordtype">void</span> displayPlane(<span class="keywordtype">int</span> <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);
<a name="l00116"></a>00116 
<a name="l00117"></a>00117     <span class="comment">// Slots for measuring the sensor noise</span>
<a name="l00118"></a>00118     <span class="keywordtype">void</span> doStartNoiseMeasurement();
<a name="l00119"></a>00119     <span class="keywordtype">void</span> doGetNoiseSample(<a class="code" href="class_u_a_v_object.html">UAVObject</a> *);
<a name="l00120"></a>00120     <span class="keywordtype">void</span> do_SetDirty();
<a name="l00121"></a>00121     <span class="keywordtype">void</span> configureSixPoint();
<a name="l00122"></a>00122 
<a name="l00123"></a>00123 };
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 <span class="preprocessor">#endif // CONFIGATTITUDEWIDGET_H</span>
</pre></div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="configattitudewidget_8h.html">configattitudewidget.h</a>      </li>

    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
