<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>TauLabs: /home/jb/code/TauLabs/ground/gcs/src/plugins/coreplugin/mainwindow.cpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="icon_128x128.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">TauLabs
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('mainwindow_8cpp.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">/home/jb/code/TauLabs/ground/gcs/src/plugins/coreplugin/mainwindow.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="mainwindow_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00014"></a>00014 <span class="comment">/*</span>
<a name="l00015"></a>00015 <span class="comment"> * This program is free software; you can redistribute it and/or modify </span>
<a name="l00016"></a>00016 <span class="comment"> * it under the terms of the GNU General Public License as published by </span>
<a name="l00017"></a>00017 <span class="comment"> * the Free Software Foundation; either version 3 of the License, or </span>
<a name="l00018"></a>00018 <span class="comment"> * (at your option) any later version.</span>
<a name="l00019"></a>00019 <span class="comment"> * </span>
<a name="l00020"></a>00020 <span class="comment"> * This program is distributed in the hope that it will be useful, but </span>
<a name="l00021"></a>00021 <span class="comment"> * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY </span>
<a name="l00022"></a>00022 <span class="comment"> * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License </span>
<a name="l00023"></a>00023 <span class="comment"> * for more details.</span>
<a name="l00024"></a>00024 <span class="comment"> * </span>
<a name="l00025"></a>00025 <span class="comment"> * You should have received a copy of the GNU General Public License along </span>
<a name="l00026"></a>00026 <span class="comment"> * with this program; if not, write to the Free Software Foundation, Inc., </span>
<a name="l00027"></a>00027 <span class="comment"> * 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span>
<a name="l00028"></a>00028 <span class="comment"> */</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="mainwindow_8h.html">mainwindow.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="actioncontainer_8h.html">actioncontainer.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="actionmanager__p_8h.html">actionmanager_p.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="basemode_8h.html">basemode.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="connectionmanager_8h.html">connectionmanager.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="boardmanager_8h.html">boardmanager.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="coreimpl_8h.html">coreimpl.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="coreconstants_8h.html">coreconstants.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="mytabwidget_8h.html">utils/mytabwidget.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="generalsettings_8h.html">generalsettings.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="messagemanager_8h.html">messagemanager.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="modemanager_8h.html">modemanager.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="mimedatabase_8h.html">mimedatabase.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;plugindialog.h&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;qxtlogger.h&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;qxtbasicstdloggerengine.h&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="shortcutsettings_8h.html">shortcutsettings.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="uavgadgetmanager_8h.html">uavgadgetmanager.h</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="uavgadgetinstancemanager_8h.html">uavgadgetinstancemanager.h</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="workspacesettings_8h.html">workspacesettings.h</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="globalmessaging_8h.html">globalmessaging.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="authorsdialog_8h.html">authorsdialog.h</a>&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="baseview_8h.html">baseview.h</a>&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="ioutputpane_8h.html">ioutputpane.h</a>&quot;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;<a class="code" href="icorelistener_8h.html">icorelistener.h</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="iconfigurableplugin_8h.html">iconfigurableplugin.h</a>&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;<a class="code" href="manhattanstyle_8h.html">manhattanstyle.h</a>&quot;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;<a class="code" href="rightpane_8h.html">rightpane.h</a>&quot;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="settingsdialog_8h.html">settingsdialog.h</a>&quot;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;<a class="code" href="threadmanager_8h.html">threadmanager.h</a>&quot;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &quot;<a class="code" href="uniqueidmanager_8h.html">uniqueidmanager.h</a>&quot;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &quot;<a class="code" href="variablemanager_8h.html">variablemanager.h</a>&quot;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include &quot;<a class="code" href="versiondialog_8h.html">versiondialog.h</a>&quot;</span>
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 <span class="preprocessor">#include &lt;<a class="code" href="settingsdatabase_8h.html">coreplugin/settingsdatabase.h</a>&gt;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &lt;<a class="code" href="pluginmanager_8h.html">extensionsystem/pluginmanager.h</a>&gt;</span>
<a name="l00066"></a>00066 <span class="preprocessor">#include &quot;<a class="code" href="iwizard_8h.html">dialogs/iwizard.h</a>&quot;</span>
<a name="l00067"></a>00067 <span class="preprocessor">#include &lt;<a class="code" href="pathchooser_8h.html">utils/pathchooser.h</a>&gt;</span>
<a name="l00068"></a>00068 <span class="preprocessor">#include &lt;<a class="code" href="stylehelper_8h.html">utils/stylehelper.h</a>&gt;</span>
<a name="l00069"></a>00069 <span class="preprocessor">#include &lt;<a class="code" href="xmlconfig_8h.html">utils/xmlconfig.h</a>&gt;</span>
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 <span class="preprocessor">#include &lt;QtCore/QDebug&gt;</span>
<a name="l00072"></a>00072 <span class="preprocessor">#include &lt;QtCore/QFileInfo&gt;</span>
<a name="l00073"></a>00073 <span class="preprocessor">#include &lt;QtCore/QSettings&gt;</span>
<a name="l00074"></a>00074 <span class="preprocessor">#include &lt;QtCore/QTimer&gt;</span>
<a name="l00075"></a>00075 <span class="preprocessor">#include &lt;QtCore/QtPlugin&gt;</span>
<a name="l00076"></a>00076 <span class="preprocessor">#include &lt;QtCore/QUrl&gt;</span>
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="preprocessor">#include &lt;QtGui/QApplication&gt;</span>
<a name="l00079"></a>00079 <span class="preprocessor">#include &lt;QtGui/QCloseEvent&gt;</span>
<a name="l00080"></a>00080 <span class="preprocessor">#include &lt;QtGui/QMenu&gt;</span>
<a name="l00081"></a>00081 <span class="preprocessor">#include &lt;QtGui/QPixmap&gt;</span>
<a name="l00082"></a>00082 <span class="preprocessor">#include &lt;QtGui/QShortcut&gt;</span>
<a name="l00083"></a>00083 <span class="preprocessor">#include &lt;QtGui/QStatusBar&gt;</span>
<a name="l00084"></a>00084 <span class="preprocessor">#include &lt;QtGui/QWizard&gt;</span>
<a name="l00085"></a>00085 <span class="preprocessor">#include &lt;QtGui/QToolButton&gt;</span>
<a name="l00086"></a>00086 <span class="preprocessor">#include &lt;QtGui/QMessageBox&gt;</span>
<a name="l00087"></a>00087 <span class="preprocessor">#include &lt;QDesktopServices&gt;</span>
<a name="l00088"></a>00088 <span class="preprocessor">#include &quot;<a class="code" href="importsettings_8h.html">dialogs/importsettings.h</a>&quot;</span>
<a name="l00089"></a>00089 <span class="preprocessor">#include &lt;QDir&gt;</span>
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="keyword">using namespace </span>Core;
<a name="l00092"></a>00092 <span class="keyword">using namespace </span>Core::Internal;
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *uriListMimeFormatC = <span class="stringliteral">&quot;text/uri-list&quot;</span>;
<a name="l00095"></a>00095 
<a name="l00096"></a><a class="code" href="group___core_plugin.html#ggabc5c98fcc1211af2b80116dd6e0a035daf4b0431d5cc108ace609eb877582a059">00096</a> <span class="keyword">enum</span> { <a class="code" href="group___core_plugin.html#ggabc5c98fcc1211af2b80116dd6e0a035daf4b0431d5cc108ace609eb877582a059">debugMainWindow</a> = 0 };
<a name="l00097"></a>00097 
<a name="l00098"></a><a class="code" href="group___core_plugin.html#ga34c4b4207b46d11a4100c9b19f0e81bb">00098</a> MainWindow::MainWindow() :
<a name="l00099"></a>00099     <a class="code" href="class_core_1_1_internal_1_1_event_filtering_main_window.html">EventFilteringMainWindow</a>(),
<a name="l00100"></a>00100     m_coreImpl(new <a class="code" href="class_core_1_1_internal_1_1_core_impl.html">CoreImpl</a>(this)),
<a name="l00101"></a>00101     m_uniqueIDManager(new <a class="code" href="class_core_1_1_unique_i_d_manager.html">UniqueIDManager</a>()),
<a name="l00102"></a>00102     m_globalContext(QList&lt;int&gt;() &lt;&lt; Constants::<a class="code" href="group___core_plugin.html#ga73bcb9a176a2f5b7cec3008d5b0f244c">C_GLOBAL_ID</a>),
<a name="l00103"></a>00103     m_additionalContexts(m_globalContext),
<a name="l00104"></a>00104     <span class="comment">// keep this in sync with main() in app/main.cpp</span>
<a name="l00105"></a>00105     m_settings(new QSettings(<a class="code" href="class_xml_config.html">XmlConfig</a>::XmlSettingsFormat, QSettings::UserScope,
<a name="l00106"></a>00106                              QLatin1String(<span class="stringliteral">&quot;TauLabs&quot;</span>), QLatin1String(<span class="stringliteral">&quot;TauLabs_config&quot;</span>), this)),
<a name="l00107"></a>00107     m_globalSettings(new QSettings(<a class="code" href="class_xml_config.html">XmlConfig</a>::XmlSettingsFormat, QSettings::SystemScope,
<a name="l00108"></a>00108                                  QLatin1String(<span class="stringliteral">&quot;TauLabs&quot;</span>), QLatin1String(<span class="stringliteral">&quot;TauLabs_config&quot;</span>), this)),
<a name="l00109"></a>00109     m_settingsDatabase(new <a class="code" href="class_core_1_1_settings_database.html" title="An alternative to the application-wide QSettings that is more suitable for storing large amounts of d...">SettingsDatabase</a>(QFileInfo(m_settings-&gt;fileName()).path(),
<a name="l00110"></a>00110                                             QLatin1String(<span class="stringliteral">&quot;TauLabs_config&quot;</span>),
<a name="l00111"></a>00111                                             this)),
<a name="l00112"></a>00112     m_dontSaveSettings(false),
<a name="l00113"></a>00113     m_actionManager(new <a class="code" href="class_core_1_1_internal_1_1_action_manager_private.html">ActionManagerPrivate</a>(this)),
<a name="l00114"></a>00114     m_variableManager(new <a class="code" href="class_core_1_1_variable_manager.html">VariableManager</a>(this)),
<a name="l00115"></a>00115     m_threadManager(new <a class="code" href="class_core_1_1_thread_manager.html">ThreadManager</a>(this)),
<a name="l00116"></a>00116     m_modeManager(0),
<a name="l00117"></a>00117     m_connectionManager(0),
<a name="l00118"></a>00118     m_boardManager(0),
<a name="l00119"></a>00119     m_mimeDatabase(new <a class="code" href="class_core_1_1_mime_database.html">MimeDatabase</a>),
<a name="l00120"></a>00120     m_versionDialog(0),
<a name="l00121"></a>00121     m_authorsDialog(0),
<a name="l00122"></a>00122     m_activeContext(0),
<a name="l00123"></a>00123     m_generalSettings(new <a class="code" href="class_core_1_1_internal_1_1_general_settings.html">GeneralSettings</a>),
<a name="l00124"></a>00124     m_shortcutSettings(new <a class="code" href="class_core_1_1_internal_1_1_shortcut_settings.html">ShortcutSettings</a>),
<a name="l00125"></a>00125     m_workspaceSettings(new <a class="code" href="class_core_1_1_internal_1_1_workspace_settings.html">WorkspaceSettings</a>),
<a name="l00126"></a>00126     m_focusToEditor(0),
<a name="l00127"></a>00127     m_newAction(0),
<a name="l00128"></a>00128     m_openAction(0),
<a name="l00129"></a>00129     m_openWithAction(0),
<a name="l00130"></a>00130     m_saveAllAction(0),
<a name="l00131"></a>00131     m_exitAction(0),
<a name="l00132"></a>00132     m_optionsAction(0),
<a name="l00133"></a>00133 #ifdef Q_WS_MAC
<a name="l00134"></a>00134     m_minimizeAction(0),
<a name="l00135"></a>00135     m_zoomAction(0),
<a name="l00136"></a>00136 #endif
<a name="l00137"></a>00137     m_toggleFullScreenAction(0)
<a name="l00138"></a>00138 {
<a name="l00139"></a>00139     setWindowTitle(tr(<span class="stringliteral">&quot;Tau Labs GCS&quot;</span>));
<a name="l00140"></a>00140 <span class="preprocessor">#ifndef Q_WS_MAC</span>
<a name="l00141"></a>00141 <span class="preprocessor"></span>    qApp-&gt;setWindowIcon(QIcon(<span class="stringliteral">&quot;:/core/images/taulabs_logo_128.png&quot;</span>));
<a name="l00142"></a>00142 <span class="preprocessor">#endif</span>
<a name="l00143"></a>00143 <span class="preprocessor"></span>    QCoreApplication::setApplicationName(QLatin1String(<span class="stringliteral">&quot;Tau Labs GCS&quot;</span>));
<a name="l00144"></a>00144     QCoreApplication::setApplicationVersion(QLatin1String(<a class="code" href="group___core_plugin.html#ga94cc5148063bb8fd71e94b6929e8c9ee">Core::Constants::GCS_VERSION_LONG</a>));
<a name="l00145"></a>00145     QCoreApplication::setOrganizationName(QLatin1String(<span class="stringliteral">&quot;TauLabs&quot;</span>));
<a name="l00146"></a>00146     QCoreApplication::setOrganizationDomain(QLatin1String(<span class="stringliteral">&quot;taulabs.org&quot;</span>));
<a name="l00147"></a>00147     QSettings::setDefaultFormat(<a class="code" href="group__importexportplugin.html#ga86ce5e7b6d81b6da071f57e2f237e9f2">XmlConfig::XmlSettingsFormat</a>);
<a name="l00148"></a>00148     <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> baseName = qApp-&gt;style()-&gt;objectName();
<a name="l00149"></a>00149 <span class="preprocessor">#ifdef Q_WS_X11</span>
<a name="l00150"></a>00150 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (baseName == QLatin1String(<span class="stringliteral">&quot;windows&quot;</span>)) {
<a name="l00151"></a>00151         <span class="comment">// Sometimes we get the standard windows 95 style as a fallback</span>
<a name="l00152"></a>00152         <span class="comment">// e.g. if we are running on a KDE4 desktop</span>
<a name="l00153"></a>00153         QByteArray desktopEnvironment = qgetenv(<span class="stringliteral">&quot;DESKTOP_SESSION&quot;</span>);
<a name="l00154"></a>00154         <span class="keywordflow">if</span> (desktopEnvironment == <span class="stringliteral">&quot;kde&quot;</span>)
<a name="l00155"></a>00155             baseName = QLatin1String(<span class="stringliteral">&quot;plastique&quot;</span>);
<a name="l00156"></a>00156         <span class="keywordflow">else</span>
<a name="l00157"></a>00157             baseName = QLatin1String(<span class="stringliteral">&quot;cleanlooks&quot;</span>);
<a name="l00158"></a>00158     }
<a name="l00159"></a>00159 <span class="preprocessor">#endif</span>
<a name="l00160"></a>00160 <span class="preprocessor"></span>    qApp-&gt;setStyle(<span class="keyword">new</span> <a class="code" href="class_manhattan_style.html">ManhattanStyle</a>(baseName));
<a name="l00161"></a>00161 
<a name="l00162"></a>00162     setDockNestingEnabled(<span class="keyword">true</span>);
<a name="l00163"></a>00163 
<a name="l00164"></a>00164     setCorner(Qt::BottomLeftCorner, Qt::LeftDockWidgetArea);
<a name="l00165"></a>00165     setCorner(Qt::BottomRightCorner, Qt::BottomDockWidgetArea);
<a name="l00166"></a>00166 
<a name="l00167"></a>00167     registerDefaultContainers();
<a name="l00168"></a>00168     registerDefaultActions();
<a name="l00169"></a>00169 
<a name="l00170"></a>00170     m_modeStack = <span class="keyword">new</span> <a class="code" href="class_my_tab_widget.html">MyTabWidget</a>(<span class="keyword">this</span>);
<a name="l00171"></a>00171     m_modeStack-&gt;setIconSize(QSize(24,24));
<a name="l00172"></a>00172     m_modeStack-&gt;setTabPosition(QTabWidget::South);
<a name="l00173"></a>00173     m_modeStack-&gt;setMovable(<span class="keyword">false</span>);
<a name="l00174"></a>00174     m_modeStack-&gt;setMinimumWidth(512);
<a name="l00175"></a>00175     m_modeStack-&gt;setElideMode(Qt::ElideRight);
<a name="l00176"></a>00176 <span class="preprocessor">#ifndef Q_WS_MAC</span>
<a name="l00177"></a>00177 <span class="preprocessor"></span>    m_modeStack-&gt;setDocumentMode(<span class="keyword">true</span>);
<a name="l00178"></a>00178 <span class="preprocessor">#endif</span>
<a name="l00179"></a>00179 <span class="preprocessor"></span>    m_globalMessaging = <span class="keyword">new</span> <a class="code" href="class_core_1_1_global_messaging.html">GlobalMessaging</a>(<span class="keyword">this</span>);
<a name="l00180"></a>00180 
<a name="l00181"></a>00181     m_modeManager = <span class="keyword">new</span> <a class="code" href="class_core_1_1_mode_manager.html">ModeManager</a>(<span class="keyword">this</span>, m_modeStack);
<a name="l00182"></a>00182 
<a name="l00183"></a>00183     m_connectionManager = <span class="keyword">new</span> <a class="code" href="class_core_1_1_connection_manager.html">ConnectionManager</a>(<span class="keyword">this</span>, m_modeStack);
<a name="l00184"></a>00184 
<a name="l00185"></a>00185     m_boardManager = <span class="keyword">new</span> <a class="code" href="class_core_1_1_board_manager.html">BoardManager</a>();
<a name="l00186"></a>00186 
<a name="l00187"></a>00187     m_messageManager = <span class="keyword">new</span> <a class="code" href="class_core_1_1_message_manager.html">MessageManager</a>;
<a name="l00188"></a>00188 
<a name="l00189"></a>00189     setCentralWidget(m_modeStack);
<a name="l00190"></a>00190 
<a name="l00191"></a>00191     connect(QApplication::instance(), SIGNAL(focusChanged(QWidget*,QWidget*)),
<a name="l00192"></a>00192             <span class="keyword">this</span>, SLOT(updateFocusWidget(QWidget*,QWidget*)));
<a name="l00193"></a>00193     connect(m_workspaceSettings, SIGNAL(tabBarSettingsApplied(QTabWidget::TabPosition,<span class="keywordtype">bool</span>)),
<a name="l00194"></a>00194             <span class="keyword">this</span>, SLOT(applyTabBarSettings(QTabWidget::TabPosition,<span class="keywordtype">bool</span>)));
<a name="l00195"></a>00195     connect(m_modeManager, SIGNAL(newModeOrder(QVector&lt;IMode*&gt;)), m_workspaceSettings, SLOT(newModeOrder(QVector&lt;IMode*&gt;)));
<a name="l00196"></a>00196     <a class="code" href="group___core_plugin.html#gad0b6f29ad56dcf30aca0db939eb985a0">statusBar</a>()-&gt;setProperty(<span class="stringliteral">&quot;p_styled&quot;</span>, <span class="keyword">true</span>);
<a name="l00197"></a>00197     setAcceptDrops(<span class="keyword">true</span>);
<a name="l00198"></a>00198     <span class="keywordflow">foreach</span> (<a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> engine, qxtLog-&gt;allLoggerEngines())
<a name="l00199"></a>00199         qxtLog-&gt;removeLoggerEngine(engine);
<a name="l00200"></a>00200     qxtLog-&gt;addLoggerEngine(<span class="stringliteral">&quot;std&quot;</span>, <span class="keyword">new</span> QxtBasicSTDLoggerEngine());
<a name="l00201"></a>00201     qxtLog-&gt;installAsMessageHandler();
<a name="l00202"></a>00202     qxtLog-&gt;enableAllLogLevels();
<a name="l00203"></a>00203 }
<a name="l00204"></a>00204 
<a name="l00205"></a><a class="code" href="group___core_plugin.html#gae98d00a93bc118200eeef9f9bba1dba7">00205</a> <a class="code" href="group___core_plugin.html#gae98d00a93bc118200eeef9f9bba1dba7">MainWindow::~MainWindow</a>()
<a name="l00206"></a>00206 {
<a name="l00207"></a>00207         <span class="keywordflow">if</span> (m_connectionManager)        <span class="comment">// Pip</span>
<a name="l00208"></a>00208         {
<a name="l00209"></a>00209                 m_connectionManager-&gt;<a class="code" href="group___core_plugin.html#ga679b06064b497205af5453783acff419">disconnectDevice</a>();
<a name="l00210"></a>00210                 m_connectionManager-&gt;<a class="code" href="group___core_plugin.html#gad4e7e06b9cc1c4720a0bb9202c5dca19">suspendPolling</a>();
<a name="l00211"></a>00211         }
<a name="l00212"></a>00212 
<a name="l00213"></a>00213         hide();
<a name="l00214"></a>00214 
<a name="l00215"></a>00215         qxtLog-&gt;removeAsMessageHandler();
<a name="l00216"></a>00216     <span class="keywordflow">foreach</span> (<a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> engine, qxtLog-&gt;allLoggerEngines())
<a name="l00217"></a>00217         qxtLog-&gt;removeLoggerEngine(engine);
<a name="l00218"></a>00218     <a class="code" href="class_extension_system_1_1_plugin_manager.html" title="Core plugin system that manages the plugins, their life cycle and their registered objects...">ExtensionSystem::PluginManager</a> *pm = ExtensionSystem::PluginManager::instance();
<a name="l00219"></a>00219     <span class="keywordflow">if</span> (m_uavGadgetManagers.count() &gt; 0) {
<a name="l00220"></a>00220         <span class="keywordflow">foreach</span> (<a class="code" href="class_core_1_1_u_a_v_gadget_manager.html">UAVGadgetManager</a> *mode, m_uavGadgetManagers)
<a name="l00221"></a>00221         {
<a name="l00222"></a>00222             pm-&gt;removeObject(mode);
<a name="l00223"></a>00223             <span class="keyword">delete</span> mode;
<a name="l00224"></a>00224         }
<a name="l00225"></a>00225     }
<a name="l00226"></a>00226 
<a name="l00227"></a>00227     pm-&gt;removeObject(m_shortcutSettings);
<a name="l00228"></a>00228     pm-&gt;removeObject(m_generalSettings);
<a name="l00229"></a>00229     pm-&gt;removeObject(m_workspaceSettings);
<a name="l00230"></a>00230     <span class="keyword">delete</span> m_messageManager;
<a name="l00231"></a>00231     m_messageManager = 0;
<a name="l00232"></a>00232     <span class="keyword">delete</span> m_globalMessaging;
<a name="l00233"></a>00233     m_globalMessaging=0;
<a name="l00234"></a>00234     <span class="keyword">delete</span> m_shortcutSettings;
<a name="l00235"></a>00235     m_shortcutSettings = 0;
<a name="l00236"></a>00236     <span class="keyword">delete</span> m_generalSettings;
<a name="l00237"></a>00237     m_generalSettings = 0;
<a name="l00238"></a>00238     <span class="keyword">delete</span> m_workspaceSettings;
<a name="l00239"></a>00239     m_workspaceSettings = 0;
<a name="l00240"></a>00240     <span class="keyword">delete</span> m_settings;
<a name="l00241"></a>00241     m_settings = 0;
<a name="l00242"></a>00242     <span class="keyword">delete</span> m_uniqueIDManager;
<a name="l00243"></a>00243     m_uniqueIDManager = 0;
<a name="l00244"></a>00244 
<a name="l00245"></a>00245     pm-&gt;removeObject(m_coreImpl);
<a name="l00246"></a>00246     <span class="keyword">delete</span> m_coreImpl;
<a name="l00247"></a>00247     m_coreImpl = 0;
<a name="l00248"></a>00248 
<a name="l00249"></a>00249     <span class="keyword">delete</span> m_modeManager;
<a name="l00250"></a>00250     m_modeManager = 0;
<a name="l00251"></a>00251     <span class="keyword">delete</span> m_mimeDatabase;
<a name="l00252"></a>00252     m_mimeDatabase = 0;
<a name="l00253"></a>00253 }
<a name="l00254"></a>00254 
<a name="l00255"></a><a class="code" href="group___core_plugin.html#gafd7a49e5ef33d7eb47ac7befd1acaeb5">00255</a> <span class="keywordtype">bool</span> <a class="code" href="group___core_plugin.html#gafd7a49e5ef33d7eb47ac7befd1acaeb5">MainWindow::init</a>(<a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> *errorMessage)
<a name="l00256"></a>00256 {
<a name="l00257"></a>00257     Q_UNUSED(errorMessage)
<a name="l00258"></a>00258 
<a name="l00259"></a>00259     <a class="code" href="class_extension_system_1_1_plugin_manager.html" title="Core plugin system that manages the plugins, their life cycle and their registered objects...">ExtensionSystem::PluginManager</a> *pm = ExtensionSystem::PluginManager::instance();
<a name="l00260"></a>00260     pm-&gt;addObject(m_coreImpl);
<a name="l00261"></a>00261     m_modeManager-&gt;<a class="code" href="group___core_plugin.html#ga0602e86f2b78e9b234c3fa737837d266">init</a>();
<a name="l00262"></a>00262     m_connectionManager-&gt;<a class="code" href="group___core_plugin.html#gab896af0a853749c60a450bf14ce00400">init</a>();
<a name="l00263"></a>00263     m_boardManager-&gt;<a class="code" href="group___core_plugin.html#gabd392f7c64fd19944b464465e3ed3ecd">init</a>();
<a name="l00264"></a>00264 
<a name="l00265"></a>00265     pm-&gt;addObject(m_generalSettings);
<a name="l00266"></a>00266     pm-&gt;addObject(m_shortcutSettings);
<a name="l00267"></a>00267     pm-&gt;addObject(m_workspaceSettings);
<a name="l00268"></a>00268 
<a name="l00269"></a>00269     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00270"></a>00270 }
<a name="l00271"></a>00271 
<a name="l00272"></a>00272 <span class="keywordtype">void</span> MainWindow::modeChanged(<a class="code" href="class_core_1_1_i_mode.html">Core::IMode</a> *<span class="comment">/*mode*/</span>)
<a name="l00273"></a>00273 {
<a name="l00274"></a>00274 
<a name="l00275"></a>00275 }
<a name="l00276"></a>00276 
<a name="l00277"></a><a class="code" href="group___core_plugin.html#ga4c8ca3dfbbec662f91c1fd39467eb8ee">00277</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga4c8ca3dfbbec662f91c1fd39467eb8ee">MainWindow::extensionsInitialized</a>()
<a name="l00278"></a>00278 {
<a name="l00279"></a>00279 
<a name="l00280"></a>00280     QSettings* qs = m_settings;
<a name="l00281"></a>00281     QSettings * <a class="code" href="group___core_plugin.html#ga14fadbb1735f8dddb54ae61aee869a40">settings</a>;
<a name="l00282"></a>00282     <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> commandLine;
<a name="l00283"></a>00283     <span class="keywordflow">if</span> ( ! qs-&gt;allKeys().count() ){
<a name="l00284"></a>00284         <span class="keywordflow">foreach</span>(<a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> str,qApp-&gt;arguments())
<a name="l00285"></a>00285         {
<a name="l00286"></a>00286             <span class="keywordflow">if</span>(str.contains(<span class="stringliteral">&quot;configfile&quot;</span>))
<a name="l00287"></a>00287             {
<a name="l00288"></a>00288                 qDebug()&lt;&lt;<span class="stringliteral">&quot;ass&quot;</span>;
<a name="l00289"></a>00289                 commandLine=str.split(<span class="stringliteral">&quot;=&quot;</span>).at(1);
<a name="l00290"></a>00290                 qDebug()&lt;&lt;commandLine;
<a name="l00291"></a>00291             }
<a name="l00292"></a>00292         }
<a name="l00293"></a>00293         QDir directory(QCoreApplication::applicationDirPath());
<a name="l00294"></a>00294 <span class="preprocessor">#ifdef Q_OS_MAC</span>
<a name="l00295"></a>00295 <span class="preprocessor"></span>            directory.cdUp();
<a name="l00296"></a>00296             directory.cd(<span class="stringliteral">&quot;Resources&quot;</span>);
<a name="l00297"></a>00297 <span class="preprocessor">#else</span>
<a name="l00298"></a>00298 <span class="preprocessor"></span>            directory.cdUp();
<a name="l00299"></a>00299             directory.cd(<span class="stringliteral">&quot;share&quot;</span>);
<a name="l00300"></a>00300             directory.cd(<span class="stringliteral">&quot;taulabs&quot;</span>);
<a name="l00301"></a>00301 <span class="preprocessor">#endif</span>
<a name="l00302"></a>00302 <span class="preprocessor"></span>            directory.cd(<span class="stringliteral">&quot;default_configurations&quot;</span>);
<a name="l00303"></a>00303 
<a name="l00304"></a>00304             qDebug() &lt;&lt; <span class="stringliteral">&quot;Looking for default config files in: &quot;</span> + directory.absolutePath();
<a name="l00305"></a>00305         <span class="keywordtype">bool</span> showDialog=<span class="keyword">true</span>;
<a name="l00306"></a>00306         <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> filename;
<a name="l00307"></a>00307         <span class="keywordflow">if</span>(!commandLine.isEmpty())
<a name="l00308"></a>00308         {
<a name="l00309"></a>00309             <span class="keywordflow">if</span>(QFile::exists(directory.absolutePath()+QDir::separator()+commandLine))
<a name="l00310"></a>00310             {
<a name="l00311"></a>00311                 filename=directory.absolutePath()+QDir::separator()+commandLine;
<a name="l00312"></a>00312                 qDebug()&lt;&lt;<span class="stringliteral">&quot;Load configuration from command line&quot;</span>;
<a name="l00313"></a>00313                 settings=<span class="keyword">new</span> QSettings(filename, <a class="code" href="group__importexportplugin.html#ga86ce5e7b6d81b6da071f57e2f237e9f2">XmlConfig::XmlSettingsFormat</a>);
<a name="l00314"></a>00314                 showDialog=<span class="keyword">false</span>;
<a name="l00315"></a>00315             }
<a name="l00316"></a>00316         }
<a name="l00317"></a>00317         <span class="keywordflow">if</span>(showDialog)
<a name="l00318"></a>00318         {
<a name="l00319"></a>00319             <a class="code" href="classimport_settings.html">importSettings</a> * dialog=<span class="keyword">new</span> <a class="code" href="classimport_settings.html">importSettings</a>(<span class="keyword">this</span>);
<a name="l00320"></a>00320             dialog-&gt;<a class="code" href="classimport_settings.html#a133358bf471790d7031c111bf5f0dfb1">loadFiles</a>(directory.absolutePath());
<a name="l00321"></a>00321             dialog-&gt;exec();
<a name="l00322"></a>00322             filename=dialog-&gt;<a class="code" href="classimport_settings.html#a16a67f71fc0787a882d94dd33b3ce38b">choosenConfig</a>();
<a name="l00323"></a>00323             settings=<span class="keyword">new</span> QSettings(filename, <a class="code" href="group__importexportplugin.html#ga86ce5e7b6d81b6da071f57e2f237e9f2">XmlConfig::XmlSettingsFormat</a>);
<a name="l00324"></a>00324             <span class="keyword">delete</span> dialog;
<a name="l00325"></a>00325         }
<a name="l00326"></a>00326         qs=<a class="code" href="group___core_plugin.html#ga14fadbb1735f8dddb54ae61aee869a40">settings</a>;
<a name="l00327"></a>00327         qDebug() &lt;&lt; <span class="stringliteral">&quot;Load default config from resource &quot;</span>&lt;&lt;filename;
<a name="l00328"></a>00328     }
<a name="l00329"></a>00329     qs-&gt;beginGroup(<span class="stringliteral">&quot;General&quot;</span>);
<a name="l00330"></a>00330     m_config_description=qs-&gt;value(<span class="stringliteral">&quot;Description&quot;</span>,<span class="stringliteral">&quot;none&quot;</span>).toString();
<a name="l00331"></a>00331     m_config_details=qs-&gt;value(<span class="stringliteral">&quot;Details&quot;</span>,<span class="stringliteral">&quot;none&quot;</span>).toString();
<a name="l00332"></a>00332     m_config_stylesheet=qs-&gt;value(<span class="stringliteral">&quot;StyleSheet&quot;</span>,<span class="stringliteral">&quot;none&quot;</span>).toString();
<a name="l00333"></a>00333     loadStyleSheet(m_config_stylesheet);
<a name="l00334"></a>00334     qs-&gt;endGroup();
<a name="l00335"></a>00335     m_uavGadgetInstanceManager = <span class="keyword">new</span> <a class="code" href="class_core_1_1_u_a_v_gadget_instance_manager.html">UAVGadgetInstanceManager</a>(<span class="keyword">this</span>);
<a name="l00336"></a>00336     m_uavGadgetInstanceManager-&gt;<a class="code" href="group___core_plugin.html#ga5b0113d08404691baef3c9eb158f00c8">readSettings</a>(qs);
<a name="l00337"></a>00337 
<a name="l00338"></a>00338     m_messageManager-&gt;<a class="code" href="group___core_plugin.html#ga87092893657c545a84d8d274fbe9796f">init</a>();
<a name="l00339"></a>00339     <a class="code" href="group___core_plugin.html#gadef90c414cbb6c8ddb7bd051ac4f6dd3">readSettings</a>(qs);
<a name="l00340"></a>00340 
<a name="l00341"></a>00341     <a class="code" href="group___core_plugin.html#ga63b04fba7b802e0b931cb68d4cf78968">updateContext</a>();
<a name="l00342"></a>00342 
<a name="l00343"></a>00343     emit m_coreImpl-&gt;<a class="code" href="group___core_plugin.html#ga10069a0bda308595dfad2aabf5d4a711">coreAboutToOpen</a>();
<a name="l00344"></a>00344     show();
<a name="l00345"></a>00345     emit m_coreImpl-&gt;<a class="code" href="group___core_plugin.html#ga1b43a0185eb3abefdae4d893e653843d" title="Emitted after all plugins have been loaded and the main window shown.">coreOpened</a>();
<a name="l00346"></a>00346 }
<a name="l00347"></a>00347 
<a name="l00348"></a>00348 <span class="keywordtype">void</span> MainWindow::loadStyleSheet(<a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> name) {
<a name="l00349"></a>00349     <span class="comment">/* Let&#39;s use QFile and point to a resource... */</span>
<a name="l00350"></a>00350     QDir directory(QCoreApplication::applicationDirPath());
<a name="l00351"></a>00351 <span class="preprocessor">#ifdef Q_OS_MAC</span>
<a name="l00352"></a>00352 <span class="preprocessor"></span>    directory.cdUp();
<a name="l00353"></a>00353     directory.cd(<span class="stringliteral">&quot;Resources&quot;</span>);
<a name="l00354"></a>00354 <span class="preprocessor">#else</span>
<a name="l00355"></a>00355 <span class="preprocessor"></span>    directory.cdUp();
<a name="l00356"></a>00356     directory.cd(<span class="stringliteral">&quot;share&quot;</span>);
<a name="l00357"></a>00357     directory.cd(<span class="stringliteral">&quot;taulabs&quot;</span>);
<a name="l00358"></a>00358 <span class="preprocessor">#endif</span>
<a name="l00359"></a>00359 <span class="preprocessor"></span>    directory.cd(<span class="stringliteral">&quot;stylesheets&quot;</span>);
<a name="l00360"></a>00360 <span class="preprocessor">#ifdef Q_OS_MAC</span>
<a name="l00361"></a>00361 <span class="preprocessor"></span>    QFile data(directory.absolutePath()+QDir::separator()+name+<span class="stringliteral">&quot;_macos.qss&quot;</span>);
<a name="l00362"></a>00362 <span class="preprocessor">#elif defined(Q_OS_LINUX)</span>
<a name="l00363"></a>00363 <span class="preprocessor"></span>    QFile data(directory.absolutePath()+QDir::separator()+name+<span class="stringliteral">&quot;_linux.qss&quot;</span>);
<a name="l00364"></a>00364 <span class="preprocessor">#else</span>
<a name="l00365"></a>00365 <span class="preprocessor"></span>    QFile data(directory.absolutePath()+QDir::separator()+name+<span class="stringliteral">&quot;_windows.qss&quot;</span>);
<a name="l00366"></a>00366 <span class="preprocessor">#endif</span>
<a name="l00367"></a>00367 <span class="preprocessor"></span>    <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> style;
<a name="l00368"></a>00368     <span class="comment">/* ...to open the file */</span>
<a name="l00369"></a>00369     <span class="keywordflow">if</span>(data.open(QFile::ReadOnly)) {
<a name="l00370"></a>00370         <span class="comment">/* QTextStream... */</span>
<a name="l00371"></a>00371         QTextStream styleIn(&amp;data);
<a name="l00372"></a>00372         <span class="comment">/* ...read file to a string. */</span>
<a name="l00373"></a>00373         style = styleIn.readAll();
<a name="l00374"></a>00374         data.close();
<a name="l00375"></a>00375         <span class="comment">/* We&#39;ll use qApp macro to get the QApplication pointer</span>
<a name="l00376"></a>00376 <span class="comment">         * and set the style sheet application wide. */</span>
<a name="l00377"></a>00377         qApp-&gt;setStyleSheet(style);
<a name="l00378"></a>00378         qDebug()&lt;&lt;<span class="stringliteral">&quot;Loaded stylesheet:&quot;</span> &lt;&lt; directory.absolutePath() &lt;&lt; name;
<a name="l00379"></a>00379     }
<a name="l00380"></a>00380     <span class="keywordflow">else</span>
<a name="l00381"></a>00381         qDebug()&lt;&lt;<span class="stringliteral">&quot;Failed to openstylesheet file&quot;</span> &lt;&lt; directory.absolutePath() &lt;&lt; name;
<a name="l00382"></a>00382 }
<a name="l00383"></a>00383 
<a name="l00384"></a><a class="code" href="group___core_plugin.html#ga4e20a4a065fbb0e4d3532a45a0a91425">00384</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga4e20a4a065fbb0e4d3532a45a0a91425">MainWindow::closeEvent</a>(QCloseEvent *event)
<a name="l00385"></a>00385 {
<a name="l00386"></a>00386     <span class="keywordflow">if</span> ( !m_generalSettings-&gt;<a class="code" href="group___core_plugin.html#ga045865ac578d53e8a8aca9e8c1e034a8">saveSettingsOnExit</a>() ){
<a name="l00387"></a>00387         m_dontSaveSettings = <span class="keyword">true</span>;
<a name="l00388"></a>00388     }
<a name="l00389"></a>00389     <span class="keywordflow">if</span> ( !m_dontSaveSettings ){
<a name="l00390"></a>00390         emit m_coreImpl-&gt;<a class="code" href="group___core_plugin.html#ga5deecf671e1390e1489d696dd89f112d" title="Emitted to signal that the user has requested that the global settings should be saved to disk...">saveSettingsRequested</a>();
<a name="l00391"></a>00391     }
<a name="l00392"></a>00392 
<a name="l00393"></a>00393     <span class="keyword">const</span> QList&lt;ICoreListener *&gt; listeners =
<a name="l00394"></a>00394         ExtensionSystem::PluginManager::instance()-&gt;getObjects&lt;<a class="code" href="class_core_1_1_i_core_listener.html" title="Provides a hook for plugins to veto on certain events emitted from the core plugin.">ICoreListener</a>&gt;();
<a name="l00395"></a>00395     <span class="keywordflow">foreach</span> (<a class="code" href="class_core_1_1_i_core_listener.html" title="Provides a hook for plugins to veto on certain events emitted from the core plugin.">ICoreListener</a> *listener, listeners) {
<a name="l00396"></a>00396         <span class="keywordflow">if</span> (!listener-&gt;<a class="code" href="group___core_plugin.html#ga234ba638cc5653d3bb183df5c9fe0ce2">coreAboutToClose</a>()) {
<a name="l00397"></a>00397             <span class="keyword">event</span>-&gt;ignore();
<a name="l00398"></a>00398             <span class="keywordflow">return</span>;
<a name="l00399"></a>00399         }
<a name="l00400"></a>00400     }
<a name="l00401"></a>00401 
<a name="l00402"></a>00402     emit m_coreImpl-&gt;<a class="code" href="group___core_plugin.html#ga36e71fe35d26feb63b78a56f08159f17" title="Plugins can do some pre-end-of-life actions when they get this signal.">coreAboutToClose</a>();
<a name="l00403"></a>00403 
<a name="l00404"></a>00404     <span class="keywordflow">if</span> ( !m_dontSaveSettings ){
<a name="l00405"></a>00405         <a class="code" href="group___core_plugin.html#ga1400c8a8dc0525a89892b399cdbe00dd">saveSettings</a>(m_settings);
<a name="l00406"></a>00406         m_uavGadgetInstanceManager-&gt;<a class="code" href="group___core_plugin.html#ga4256305b1cf5b29402b70613b706139c">saveSettings</a>(m_settings);
<a name="l00407"></a>00407     }
<a name="l00408"></a>00408     <span class="keyword">event</span>-&gt;accept();
<a name="l00409"></a>00409 }
<a name="l00410"></a>00410 
<a name="l00411"></a>00411 <span class="comment">// Check for desktop file manager file drop events</span>
<a name="l00412"></a>00412 
<a name="l00413"></a>00413 <span class="keyword">static</span> <span class="keywordtype">bool</span> isDesktopFileManagerDrop(<span class="keyword">const</span> QMimeData *d, QStringList *files = 0)
<a name="l00414"></a>00414 {
<a name="l00415"></a>00415     <span class="keywordflow">if</span> (files)
<a name="l00416"></a>00416         files-&gt;clear();
<a name="l00417"></a>00417     <span class="comment">// Extract dropped files from Mime data.</span>
<a name="l00418"></a>00418     <span class="keywordflow">if</span> (!d-&gt;hasFormat(QLatin1String(uriListMimeFormatC)))
<a name="l00419"></a>00419         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00420"></a>00420     <span class="keyword">const</span> QList&lt;QUrl&gt; urls = d-&gt;urls();
<a name="l00421"></a>00421     <span class="keywordflow">if</span> (urls.empty())
<a name="l00422"></a>00422         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00423"></a>00423     <span class="comment">// Try to find local files</span>
<a name="l00424"></a>00424     <span class="keywordtype">bool</span> hasFiles = <span class="keyword">false</span>;
<a name="l00425"></a>00425     <span class="keyword">const</span> QList&lt;QUrl&gt;::const_iterator cend = urls.constEnd();
<a name="l00426"></a>00426     <span class="keywordflow">for</span> (QList&lt;QUrl&gt;::const_iterator it = urls.constBegin(); it != cend; ++it) {
<a name="l00427"></a>00427         <span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> fileName = it-&gt;toLocalFile();
<a name="l00428"></a>00428         <span class="keywordflow">if</span> (!fileName.isEmpty()) {
<a name="l00429"></a>00429             hasFiles = <span class="keyword">true</span>;
<a name="l00430"></a>00430             <span class="keywordflow">if</span> (files) {
<a name="l00431"></a>00431                 files-&gt;push_back(fileName);
<a name="l00432"></a>00432             } <span class="keywordflow">else</span> {
<a name="l00433"></a>00433                 <span class="keywordflow">break</span>; <span class="comment">// No result list, sufficient for checking</span>
<a name="l00434"></a>00434             }
<a name="l00435"></a>00435         }
<a name="l00436"></a>00436     }
<a name="l00437"></a>00437     <span class="keywordflow">return</span> hasFiles;
<a name="l00438"></a>00438 }
<a name="l00439"></a>00439 
<a name="l00440"></a><a class="code" href="group___core_plugin.html#ga671bf73078069470c19965a3d948b6fa">00440</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga671bf73078069470c19965a3d948b6fa">MainWindow::dragEnterEvent</a>(QDragEnterEvent *event)
<a name="l00441"></a>00441 {
<a name="l00442"></a>00442     <span class="keywordflow">if</span> (isDesktopFileManagerDrop(event-&gt;mimeData())) {
<a name="l00443"></a>00443         <span class="keyword">event</span>-&gt;accept();
<a name="l00444"></a>00444     } <span class="keywordflow">else</span> {
<a name="l00445"></a>00445         <span class="keyword">event</span>-&gt;ignore();
<a name="l00446"></a>00446     }
<a name="l00447"></a>00447 }
<a name="l00448"></a>00448 
<a name="l00449"></a><a class="code" href="group___core_plugin.html#gae7b97e68c51358f6f36be3c40b89c01c">00449</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#gae7b97e68c51358f6f36be3c40b89c01c">MainWindow::dropEvent</a>(QDropEvent *event)
<a name="l00450"></a>00450 {
<a name="l00451"></a>00451     QStringList files;
<a name="l00452"></a>00452     <span class="keywordflow">if</span> (isDesktopFileManagerDrop(event-&gt;mimeData(), &amp;files)) {
<a name="l00453"></a>00453         <span class="keyword">event</span>-&gt;accept();
<a name="l00454"></a>00454         <span class="comment">//openFiles(files);</span>
<a name="l00455"></a>00455     } <span class="keywordflow">else</span> {
<a name="l00456"></a>00456         <span class="keyword">event</span>-&gt;ignore();
<a name="l00457"></a>00457     }
<a name="l00458"></a>00458 }
<a name="l00459"></a>00459 
<a name="l00460"></a><a class="code" href="group___core_plugin.html#ga1e1438128ad3b24e3127f21ca65f3dba">00460</a> <a class="code" href="class_core_1_1_i_context.html">IContext</a> *<a class="code" href="group___core_plugin.html#ga1e1438128ad3b24e3127f21ca65f3dba">MainWindow::currentContextObject</a>()<span class="keyword"> const</span>
<a name="l00461"></a>00461 <span class="keyword"></span>{
<a name="l00462"></a>00462     <span class="keywordflow">return</span> m_activeContext;
<a name="l00463"></a>00463 }
<a name="l00464"></a>00464 
<a name="l00465"></a><a class="code" href="group___core_plugin.html#gad0b6f29ad56dcf30aca0db939eb985a0">00465</a> QStatusBar *<a class="code" href="group___core_plugin.html#gad0b6f29ad56dcf30aca0db939eb985a0">MainWindow::statusBar</a>()<span class="keyword"> const</span>
<a name="l00466"></a>00466 <span class="keyword"></span>{
<a name="l00467"></a>00467     <span class="keywordflow">return</span> <span class="keyword">new</span> QStatusBar();<span class="comment">// m_modeStack-&gt;statusBar();</span>
<a name="l00468"></a>00468 }
<a name="l00469"></a>00469 
<a name="l00470"></a>00470 <span class="keywordtype">void</span> MainWindow::registerDefaultContainers()
<a name="l00471"></a>00471 {
<a name="l00472"></a>00472     <a class="code" href="class_core_1_1_internal_1_1_action_manager_private.html">ActionManagerPrivate</a> *am = m_actionManager;
<a name="l00473"></a>00473 
<a name="l00474"></a>00474     <a class="code" href="class_core_1_1_action_container.html">ActionContainer</a> *menubar = am-&gt;<a class="code" href="group___core_plugin.html#gaef1eb51454ecf1c2d3989db8b3a4e127" title="Creates a new menu bar with the given string id.">createMenuBar</a>(<a class="code" href="group___core_plugin.html#ga50fb439908e7b14837faae97dded27a8">Constants::MENU_BAR</a>);
<a name="l00475"></a>00475 
<a name="l00476"></a>00476 <span class="preprocessor">#ifndef Q_WS_MAC // System menu bar on Mac</span>
<a name="l00477"></a>00477 <span class="preprocessor"></span>    setMenuBar(menubar-&gt;<a class="code" href="group___core_plugin.html#gaf02adf2900f7a064f59f14a8af0fe547">menuBar</a>());
<a name="l00478"></a>00478 <span class="preprocessor">#endif</span>
<a name="l00479"></a>00479 <span class="preprocessor"></span>    menubar-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#ga68db58071fb0d35ee9d75b0b2186511a">Constants::G_FILE</a>);
<a name="l00480"></a>00480     menubar-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#gabb38089b62cacebd11469129718e295f">Constants::G_EDIT</a>);
<a name="l00481"></a>00481     menubar-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#gaf8e643a4a904dceadb52cf47ba265ef9">Constants::G_VIEW</a>);
<a name="l00482"></a>00482     menubar-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#ga70bfb468e022981f48ed5b8ea5e8bce1">Constants::G_TOOLS</a>);
<a name="l00483"></a>00483     menubar-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#ga5831ce204fcff78e2b9a0981d6af4a4c">Constants::G_WINDOW</a>);
<a name="l00484"></a>00484     menubar-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#ga227137f1a0f845bb147764080eb7f790">Constants::G_HELP</a>);
<a name="l00485"></a>00485 
<a name="l00486"></a>00486     <span class="comment">// File Menu</span>
<a name="l00487"></a>00487     <a class="code" href="class_core_1_1_action_container.html">ActionContainer</a> *filemenu = am-&gt;<a class="code" href="group___core_plugin.html#ga1a2a9935fbe66257754f6cf21e596c01" title="Creates a new menu with the given string id.">createMenu</a>(<a class="code" href="group___core_plugin.html#ga86cd43471b9407a34f91a707e8c37a94">Constants::M_FILE</a>);
<a name="l00488"></a>00488     menubar-&gt;<a class="code" href="group___core_plugin.html#ga77e35e602ffea9dac9cf53ccd0f582a8">addMenu</a>(filemenu, <a class="code" href="group___core_plugin.html#ga68db58071fb0d35ee9d75b0b2186511a">Constants::G_FILE</a>);
<a name="l00489"></a>00489     filemenu-&gt;<a class="code" href="group___core_plugin.html#ga8e92377ca31ccb08155053b639c13059">menu</a>()-&gt;setTitle(tr(<span class="stringliteral">&quot;&amp;File&quot;</span>));
<a name="l00490"></a>00490     filemenu-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#ga8075f826c38d7ad64455fce1e27364b9">Constants::G_FILE_NEW</a>);
<a name="l00491"></a>00491     filemenu-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#ga0f564afaaccdd8bfb5d35a745f2aa002">Constants::G_FILE_OPEN</a>);
<a name="l00492"></a>00492     filemenu-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#ga05ac3ebb994ab8c62e2f0ba17dc12b48">Constants::G_FILE_PROJECT</a>);
<a name="l00493"></a>00493     filemenu-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#ga71aab5cd1940b131cfa9089cf7b6a6cc">Constants::G_FILE_SAVE</a>);
<a name="l00494"></a>00494     filemenu-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#ga28053f6405254961f912a4635c3b5ea7">Constants::G_FILE_CLOSE</a>);
<a name="l00495"></a>00495     filemenu-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#ga8ec0d7c0e60fc2e09f6936d0d385475d">Constants::G_FILE_OTHER</a>);
<a name="l00496"></a>00496     connect(filemenu-&gt;<a class="code" href="group___core_plugin.html#ga8e92377ca31ccb08155053b639c13059">menu</a>(), SIGNAL(aboutToShow()), <span class="keyword">this</span>, SLOT(aboutToShowRecentFiles()));
<a name="l00497"></a>00497 
<a name="l00498"></a>00498 
<a name="l00499"></a>00499     <span class="comment">// Edit Menu</span>
<a name="l00500"></a>00500     <a class="code" href="class_core_1_1_action_container.html">ActionContainer</a> *medit = am-&gt;<a class="code" href="group___core_plugin.html#ga1a2a9935fbe66257754f6cf21e596c01" title="Creates a new menu with the given string id.">createMenu</a>(<a class="code" href="group___core_plugin.html#ga86eba28e9c200c632b590f5acadbc93a">Constants::M_EDIT</a>);
<a name="l00501"></a>00501     menubar-&gt;<a class="code" href="group___core_plugin.html#ga77e35e602ffea9dac9cf53ccd0f582a8">addMenu</a>(medit, <a class="code" href="group___core_plugin.html#gabb38089b62cacebd11469129718e295f">Constants::G_EDIT</a>);
<a name="l00502"></a>00502     medit-&gt;menu()-&gt;setTitle(tr(<span class="stringliteral">&quot;&amp;Edit&quot;</span>));
<a name="l00503"></a>00503     medit-&gt;appendGroup(<a class="code" href="group___core_plugin.html#ga2975c00095be592f9dc54342040fe08b">Constants::G_EDIT_UNDOREDO</a>);
<a name="l00504"></a>00504     medit-&gt;appendGroup(<a class="code" href="group___core_plugin.html#ga6713439b668227888c67cb139db0a617">Constants::G_EDIT_COPYPASTE</a>);
<a name="l00505"></a>00505     medit-&gt;appendGroup(<a class="code" href="group___core_plugin.html#gaa884d741f6c93335368ca06c9385686d">Constants::G_EDIT_SELECTALL</a>);
<a name="l00506"></a>00506     medit-&gt;appendGroup(<a class="code" href="group___core_plugin.html#ga8c4e9323975b84f0aa8c1441ea913b4e">Constants::G_EDIT_ADVANCED</a>);
<a name="l00507"></a>00507     medit-&gt;appendGroup(<a class="code" href="group___core_plugin.html#ga6ecc58afd57743a48547fde417de7b7b">Constants::G_EDIT_FIND</a>);
<a name="l00508"></a>00508     medit-&gt;appendGroup(<a class="code" href="group___core_plugin.html#ga31fd4c00dfea19dfd2a96d293f1e86ea">Constants::G_EDIT_OTHER</a>);
<a name="l00509"></a>00509 
<a name="l00510"></a>00510     <span class="comment">// Tools Menu</span>
<a name="l00511"></a>00511     <a class="code" href="class_core_1_1_action_container.html">ActionContainer</a> *ac = am-&gt;<a class="code" href="group___core_plugin.html#ga1a2a9935fbe66257754f6cf21e596c01" title="Creates a new menu with the given string id.">createMenu</a>(<a class="code" href="group___core_plugin.html#ga2991b08955afff85a412c40a92e8d55e">Constants::M_TOOLS</a>);
<a name="l00512"></a>00512     menubar-&gt;<a class="code" href="group___core_plugin.html#ga77e35e602ffea9dac9cf53ccd0f582a8">addMenu</a>(ac, <a class="code" href="group___core_plugin.html#ga70bfb468e022981f48ed5b8ea5e8bce1">Constants::G_TOOLS</a>);
<a name="l00513"></a>00513     ac-&gt;<a class="code" href="group___core_plugin.html#ga8e92377ca31ccb08155053b639c13059">menu</a>()-&gt;setTitle(tr(<span class="stringliteral">&quot;&amp;Tools&quot;</span>));
<a name="l00514"></a>00514 
<a name="l00515"></a>00515     <span class="comment">// Window Menu</span>
<a name="l00516"></a>00516     <a class="code" href="class_core_1_1_action_container.html">ActionContainer</a> *mwindow = am-&gt;<a class="code" href="group___core_plugin.html#ga1a2a9935fbe66257754f6cf21e596c01" title="Creates a new menu with the given string id.">createMenu</a>(<a class="code" href="group___core_plugin.html#ga665c8a19f32f02590458d538ebf8a197">Constants::M_WINDOW</a>);
<a name="l00517"></a>00517     menubar-&gt;<a class="code" href="group___core_plugin.html#ga77e35e602ffea9dac9cf53ccd0f582a8">addMenu</a>(mwindow, <a class="code" href="group___core_plugin.html#ga5831ce204fcff78e2b9a0981d6af4a4c">Constants::G_WINDOW</a>);
<a name="l00518"></a>00518     mwindow-&gt;<a class="code" href="group___core_plugin.html#ga8e92377ca31ccb08155053b639c13059">menu</a>()-&gt;setTitle(tr(<span class="stringliteral">&quot;&amp;Window&quot;</span>));
<a name="l00519"></a>00519     mwindow-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#gaf7898919dfa3c4899d7c7fae6771ec53">Constants::G_WINDOW_SIZE</a>);
<a name="l00520"></a>00520     mwindow-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#ga4190c46f07971ca1d0556fdf9c45e8b4">Constants::G_WINDOW_HIDE_TOOLBAR</a>);
<a name="l00521"></a>00521     mwindow-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#gac4d0d1e3f9431aeac156aadf24d299d5">Constants::G_WINDOW_PANES</a>);
<a name="l00522"></a>00522     mwindow-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#ga3472fada8655f283eeb17e84f03a3dfb">Constants::G_WINDOW_SPLIT</a>);
<a name="l00523"></a>00523     mwindow-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#ga1f2d2e1bb10010e0ffec5da4d9683007">Constants::G_WINDOW_NAVIGATE</a>);
<a name="l00524"></a>00524     mwindow-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#ga17fbb7b6ee9af5abd96e1b7110343f44">Constants::G_WINDOW_OTHER</a>);
<a name="l00525"></a>00525 
<a name="l00526"></a>00526     <span class="comment">// Help Menu</span>
<a name="l00527"></a>00527     ac = am-&gt;<a class="code" href="group___core_plugin.html#ga1a2a9935fbe66257754f6cf21e596c01" title="Creates a new menu with the given string id.">createMenu</a>(<a class="code" href="group___core_plugin.html#ga67b5fbe80e9f8a05d1c50c1af7ac39d2">Constants::M_HELP</a>);
<a name="l00528"></a>00528     menubar-&gt;<a class="code" href="group___core_plugin.html#ga77e35e602ffea9dac9cf53ccd0f582a8">addMenu</a>(ac, <a class="code" href="group___core_plugin.html#ga227137f1a0f845bb147764080eb7f790">Constants::G_HELP</a>);
<a name="l00529"></a>00529     ac-&gt;<a class="code" href="group___core_plugin.html#ga8e92377ca31ccb08155053b639c13059">menu</a>()-&gt;setTitle(tr(<span class="stringliteral">&quot;&amp;Help&quot;</span>));
<a name="l00530"></a>00530     ac-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#ga8e2fb85a38cf8aedef4ada147ef05f83">Constants::G_HELP_HELP</a>);
<a name="l00531"></a>00531     ac-&gt;<a class="code" href="group___core_plugin.html#ga6479409008a106faa25ceccc055c0bd6">appendGroup</a>(<a class="code" href="group___core_plugin.html#ga7296b3913219eb7bd0b5d11808f0dadc">Constants::G_HELP_ABOUT</a>);
<a name="l00532"></a>00532 }
<a name="l00533"></a>00533 
<a name="l00534"></a>00534 <span class="keyword">static</span> <a class="code" href="class_core_1_1_command.html" title="The class Command represents an action like a menu item, tool button, or shortcut. You don&#39;t create Command objects directly, instead use {ActionManager::registerAction()} to register an action and retrieve a Command. The Command object represents the user visible action and its properties. If multiple actions are registered with the same ID (but different contexts) the returned Command is the shared one between these actions.">Command</a> *createSeparator(<a class="code" href="class_core_1_1_action_manager.html" title="The action manager is responsible for registration of menus and menu items and keyboard shortcuts...">ActionManager</a> *am, QObject *parent,
<a name="l00535"></a>00535                                 <span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> &amp;name,
<a name="l00536"></a>00536                                 <span class="keyword">const</span> QList&lt;int&gt; &amp;context)
<a name="l00537"></a>00537 {
<a name="l00538"></a>00538     QAction *tmpaction = <span class="keyword">new</span> QAction(parent);
<a name="l00539"></a>00539     tmpaction-&gt;setSeparator(<span class="keyword">true</span>);
<a name="l00540"></a>00540     <a class="code" href="class_core_1_1_command.html" title="The class Command represents an action like a menu item, tool button, or shortcut. You don&#39;t create Command objects directly, instead use {ActionManager::registerAction()} to register an action and retrieve a Command. The Command object represents the user visible action and its properties. If multiple actions are registered with the same ID (but different contexts) the returned Command is the shared one between these actions.">Command</a> *cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga316dd0cff29b294cd1b0631677f6357d" title="Makes an action known to the system under the specified string id.">registerAction</a>(tmpaction, name, context);
<a name="l00541"></a>00541     <span class="keywordflow">return</span> cmd;
<a name="l00542"></a>00542 }
<a name="l00543"></a>00543 
<a name="l00544"></a>00544 <span class="keywordtype">void</span> MainWindow::registerDefaultActions()
<a name="l00545"></a>00545 {
<a name="l00546"></a>00546     <a class="code" href="class_core_1_1_internal_1_1_action_manager_private.html">ActionManagerPrivate</a> *am = m_actionManager;
<a name="l00547"></a>00547     <a class="code" href="class_core_1_1_action_container.html">ActionContainer</a> *mfile = am-&gt;<a class="code" href="group___core_plugin.html#ga3ec130bab28be18162ff49816e062c07">actionContainer</a>(<a class="code" href="group___core_plugin.html#ga86cd43471b9407a34f91a707e8c37a94">Constants::M_FILE</a>);
<a name="l00548"></a>00548     <a class="code" href="class_core_1_1_action_container.html">ActionContainer</a> *medit = am-&gt;<a class="code" href="group___core_plugin.html#ga3ec130bab28be18162ff49816e062c07">actionContainer</a>(<a class="code" href="group___core_plugin.html#ga86eba28e9c200c632b590f5acadbc93a">Constants::M_EDIT</a>);
<a name="l00549"></a>00549     <a class="code" href="class_core_1_1_action_container.html">ActionContainer</a> *mtools = am-&gt;<a class="code" href="group___core_plugin.html#ga3ec130bab28be18162ff49816e062c07">actionContainer</a>(<a class="code" href="group___core_plugin.html#ga2991b08955afff85a412c40a92e8d55e">Constants::M_TOOLS</a>);
<a name="l00550"></a>00550     <a class="code" href="class_core_1_1_action_container.html">ActionContainer</a> *mwindow = am-&gt;<a class="code" href="group___core_plugin.html#ga3ec130bab28be18162ff49816e062c07">actionContainer</a>(<a class="code" href="group___core_plugin.html#ga665c8a19f32f02590458d538ebf8a197">Constants::M_WINDOW</a>);
<a name="l00551"></a>00551     <a class="code" href="class_core_1_1_action_container.html">ActionContainer</a> *mhelp = am-&gt;<a class="code" href="group___core_plugin.html#ga3ec130bab28be18162ff49816e062c07">actionContainer</a>(<a class="code" href="group___core_plugin.html#ga67b5fbe80e9f8a05d1c50c1af7ac39d2">Constants::M_HELP</a>);
<a name="l00552"></a>00552 
<a name="l00553"></a>00553     <span class="comment">// File menu separators</span>
<a name="l00554"></a>00554     <a class="code" href="class_core_1_1_command.html" title="The class Command represents an action like a menu item, tool button, or shortcut. You don&#39;t create Command objects directly, instead use {ActionManager::registerAction()} to register an action and retrieve a Command. The Command object represents the user visible action and its properties. If multiple actions are registered with the same ID (but different contexts) the returned Command is the shared one between these actions.">Command</a> *cmd = createSeparator(am, <span class="keyword">this</span>, QLatin1String(<span class="stringliteral">&quot;QtCreator.File.Sep.Save&quot;</span>), m_globalContext);
<a name="l00555"></a>00555     mfile-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga71aab5cd1940b131cfa9089cf7b6a6cc">Constants::G_FILE_SAVE</a>);
<a name="l00556"></a>00556 
<a name="l00557"></a>00557     cmd =  createSeparator(am, <span class="keyword">this</span>, QLatin1String(<span class="stringliteral">&quot;QtCreator.File.Sep.Close&quot;</span>), m_globalContext);
<a name="l00558"></a>00558     mfile-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga28053f6405254961f912a4635c3b5ea7">Constants::G_FILE_CLOSE</a>);
<a name="l00559"></a>00559 
<a name="l00560"></a>00560     cmd = createSeparator(am, <span class="keyword">this</span>, QLatin1String(<span class="stringliteral">&quot;QtCreator.File.Sep.Other&quot;</span>), m_globalContext);
<a name="l00561"></a>00561     mfile-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga8ec0d7c0e60fc2e09f6936d0d385475d">Constants::G_FILE_OTHER</a>);
<a name="l00562"></a>00562 
<a name="l00563"></a>00563     <span class="comment">// Edit menu separators</span>
<a name="l00564"></a>00564     cmd = createSeparator(am, <span class="keyword">this</span>, QLatin1String(<span class="stringliteral">&quot;QtCreator.Edit.Sep.CopyPaste&quot;</span>), m_globalContext);
<a name="l00565"></a>00565     medit-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga6713439b668227888c67cb139db0a617">Constants::G_EDIT_COPYPASTE</a>);
<a name="l00566"></a>00566 
<a name="l00567"></a>00567     cmd = createSeparator(am, <span class="keyword">this</span>, QLatin1String(<span class="stringliteral">&quot;QtCreator.Edit.Sep.SelectAll&quot;</span>), m_globalContext);
<a name="l00568"></a>00568     medit-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#gaa884d741f6c93335368ca06c9385686d">Constants::G_EDIT_SELECTALL</a>);
<a name="l00569"></a>00569 
<a name="l00570"></a>00570     cmd = createSeparator(am, <span class="keyword">this</span>, QLatin1String(<span class="stringliteral">&quot;QtCreator.Edit.Sep.Find&quot;</span>), m_globalContext);
<a name="l00571"></a>00571     medit-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga6ecc58afd57743a48547fde417de7b7b">Constants::G_EDIT_FIND</a>);
<a name="l00572"></a>00572 
<a name="l00573"></a>00573     cmd = createSeparator(am, <span class="keyword">this</span>, QLatin1String(<span class="stringliteral">&quot;QtCreator.Edit.Sep.Advanced&quot;</span>), m_globalContext);
<a name="l00574"></a>00574     medit-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga8c4e9323975b84f0aa8c1441ea913b4e">Constants::G_EDIT_ADVANCED</a>);
<a name="l00575"></a>00575 
<a name="l00576"></a>00576     <span class="comment">// Tools menu separators</span>
<a name="l00577"></a>00577     cmd = createSeparator(am, <span class="keyword">this</span>, QLatin1String(<span class="stringliteral">&quot;QtCreator.Tools.Sep.Options&quot;</span>), m_globalContext);
<a name="l00578"></a>00578     mtools-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#gaa9d110a5d72f47a9f4893a54bebdef9d">Constants::G_DEFAULT_THREE</a>);
<a name="l00579"></a>00579 
<a name="l00580"></a>00580     <span class="comment">// Help menu separators</span>
<a name="l00581"></a>00581 
<a name="l00582"></a>00582     <span class="comment">// Return to editor shortcut: Note this requires Qt to fix up</span>
<a name="l00583"></a>00583     <span class="comment">// handling of shortcut overrides in menus, item views, combos....</span>
<a name="l00584"></a>00584     m_focusToEditor = <span class="keyword">new</span> QShortcut(<span class="keyword">this</span>);
<a name="l00585"></a>00585     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga887455dd80ccba90125634d83982950d" title="Makes a shortcut known to the system under the specified string id.">registerShortcut</a>(m_focusToEditor, <a class="code" href="group___core_plugin.html#gab51aa14ec9c9023785bafb4efa396553">Constants::S_RETURNTOEDITOR</a>, m_globalContext);
<a name="l00586"></a>00586     cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence(Qt::Key_Escape));
<a name="l00587"></a>00587     connect(m_focusToEditor, SIGNAL(activated()), <span class="keyword">this</span>, SLOT(setFocusToEditor()));
<a name="l00588"></a>00588 
<a name="l00589"></a>00589     <span class="comment">// New File Action</span>
<a name="l00590"></a>00590 
<a name="l00591"></a>00591     <span class="comment">/*</span>
<a name="l00592"></a>00592 <span class="comment">    m_newAction = new QAction(QIcon(Constants::ICON_NEWFILE), tr(&quot;&amp;New File or Project...&quot;), this);</span>
<a name="l00593"></a>00593 <span class="comment">    cmd = am-&gt;registerAction(m_newAction, Constants::NEW, m_globalContext);</span>
<a name="l00594"></a>00594 <span class="comment">    cmd-&gt;setDefaultKeySequence(QKeySequence::New);</span>
<a name="l00595"></a>00595 <span class="comment">    mfile-&gt;addAction(cmd, Constants::G_FILE_NEW);</span>
<a name="l00596"></a>00596 <span class="comment">    connect(m_newAction, SIGNAL(triggered()), this, SLOT(newFile()));</span>
<a name="l00597"></a>00597 <span class="comment">*/</span>
<a name="l00598"></a>00598 
<a name="l00599"></a>00599     <span class="comment">// Open Action</span>
<a name="l00600"></a>00600 <span class="comment">/*</span>
<a name="l00601"></a>00601 <span class="comment">    m_openAction = new QAction(QIcon(Constants::ICON_OPENFILE), tr(&quot;&amp;Open File or Project...&quot;), this);</span>
<a name="l00602"></a>00602 <span class="comment">    cmd = am-&gt;registerAction(m_openAction, Constants::OPEN, m_globalContext);</span>
<a name="l00603"></a>00603 <span class="comment">    cmd-&gt;setDefaultKeySequence(QKeySequence::Open);</span>
<a name="l00604"></a>00604 <span class="comment">    mfile-&gt;addAction(cmd, Constants::G_FILE_OPEN);</span>
<a name="l00605"></a>00605 <span class="comment">    connect(m_openAction, SIGNAL(triggered()), this, SLOT(openFile()));</span>
<a name="l00606"></a>00606 <span class="comment">*/</span>
<a name="l00607"></a>00607 
<a name="l00608"></a>00608     <span class="comment">// Open With Action</span>
<a name="l00609"></a>00609 <span class="comment">/*</span>
<a name="l00610"></a>00610 <span class="comment">    m_openWithAction = new QAction(tr(&quot;&amp;Open File With...&quot;), this);</span>
<a name="l00611"></a>00611 <span class="comment">    cmd = am-&gt;registerAction(m_openWithAction, Constants::OPEN_WITH, m_globalContext);</span>
<a name="l00612"></a>00612 <span class="comment">    mfile-&gt;addAction(cmd, Constants::G_FILE_OPEN);</span>
<a name="l00613"></a>00613 <span class="comment">    connect(m_openWithAction, SIGNAL(triggered()), this, SLOT(openFileWith()));</span>
<a name="l00614"></a>00614 <span class="comment">*/</span>
<a name="l00615"></a>00615 
<a name="l00616"></a>00616         <span class="comment">// File-&gt;Recent Files Menu</span>
<a name="l00617"></a>00617 <span class="comment">/*</span>
<a name="l00618"></a>00618 <span class="comment">    ActionContainer *ac = am-&gt;createMenu(Constants::M_FILE_RECENTFILES);</span>
<a name="l00619"></a>00619 <span class="comment">    mfile-&gt;addMenu(ac, Constants::G_FILE_OPEN);</span>
<a name="l00620"></a>00620 <span class="comment">    ac-&gt;menu()-&gt;setTitle(tr(&quot;Recent Files&quot;));</span>
<a name="l00621"></a>00621 <span class="comment">*/</span>
<a name="l00622"></a>00622 <span class="comment">/*</span>
<a name="l00623"></a>00623 <span class="comment">    // Save Action</span>
<a name="l00624"></a>00624 <span class="comment">    QAction *tmpaction = new QAction(QIcon(Constants::ICON_SAVEFILE), tr(&quot;&amp;Save&quot;), this);</span>
<a name="l00625"></a>00625 <span class="comment">    cmd = am-&gt;registerAction(tmpaction, Constants::SAVE, m_globalContext);</span>
<a name="l00626"></a>00626 <span class="comment">    cmd-&gt;setDefaultKeySequence(QKeySequence::Save);</span>
<a name="l00627"></a>00627 <span class="comment">    cmd-&gt;setAttribute(Command::CA_UpdateText);</span>
<a name="l00628"></a>00628 <span class="comment">    cmd-&gt;setDefaultText(tr(&quot;&amp;Save&quot;));</span>
<a name="l00629"></a>00629 <span class="comment">    mfile-&gt;addAction(cmd, Constants::G_FILE_SAVE);</span>
<a name="l00630"></a>00630 <span class="comment"></span>
<a name="l00631"></a>00631 <span class="comment">    // Save As Action</span>
<a name="l00632"></a>00632 <span class="comment">    tmpaction = new QAction(tr(&quot;Save &amp;As...&quot;), this);</span>
<a name="l00633"></a>00633 <span class="comment">    cmd = am-&gt;registerAction(tmpaction, Constants::SAVEAS, m_globalContext);</span>
<a name="l00634"></a>00634 <span class="comment">#ifdef Q_WS_MAC</span>
<a name="l00635"></a>00635 <span class="comment">    cmd-&gt;setDefaultKeySequence(QKeySequence(tr(&quot;Ctrl+Shift+S&quot;)));</span>
<a name="l00636"></a>00636 <span class="comment">#endif</span>
<a name="l00637"></a>00637 <span class="comment">    cmd-&gt;setAttribute(Command::CA_UpdateText);</span>
<a name="l00638"></a>00638 <span class="comment">    cmd-&gt;setDefaultText(tr(&quot;Save &amp;As...&quot;));</span>
<a name="l00639"></a>00639 <span class="comment">    mfile-&gt;addAction(cmd, Constants::G_FILE_SAVE);</span>
<a name="l00640"></a>00640 <span class="comment">    */</span>
<a name="l00641"></a>00641 
<a name="l00642"></a>00642     <span class="comment">// SaveAll Action</span>
<a name="l00643"></a>00643     m_saveAllAction = <span class="keyword">new</span> QAction(tr(<span class="stringliteral">&quot;Save &amp;GCS Default Settings&quot;</span>), <span class="keyword">this</span>);
<a name="l00644"></a>00644     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(m_saveAllAction, <a class="code" href="group___core_plugin.html#ga79482639b023a73967e432824a1746da">Constants::SAVEALL</a>, m_globalContext);
<a name="l00645"></a>00645 <span class="preprocessor">#ifndef Q_WS_MAC</span>
<a name="l00646"></a>00646 <span class="preprocessor"></span>    cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence(tr(<span class="stringliteral">&quot;Ctrl+Shift+S&quot;</span>)));
<a name="l00647"></a>00647 <span class="preprocessor">#endif</span>
<a name="l00648"></a>00648 <span class="preprocessor"></span>    mfile-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga71aab5cd1940b131cfa9089cf7b6a6cc">Constants::G_FILE_SAVE</a>);
<a name="l00649"></a>00649     connect(m_saveAllAction, SIGNAL(triggered()), <span class="keyword">this</span>, SLOT(saveAll()));
<a name="l00650"></a>00650 
<a name="l00651"></a>00651     <span class="comment">// Exit Action</span>
<a name="l00652"></a>00652     m_exitAction = <span class="keyword">new</span> QAction(QIcon(<a class="code" href="group___core_plugin.html#ga8dcf1931b14f2911a175a1946d94afb8">Constants::ICON_EXIT</a>), tr(<span class="stringliteral">&quot;E&amp;xit&quot;</span>), <span class="keyword">this</span>);
<a name="l00653"></a>00653     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(m_exitAction, <a class="code" href="group___core_plugin.html#ga83e07a95322a89ce775c68835ba44e76">Constants::EXIT</a>, m_globalContext);
<a name="l00654"></a>00654     cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence(tr(<span class="stringliteral">&quot;Ctrl+Q&quot;</span>)));
<a name="l00655"></a>00655     mfile-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga8ec0d7c0e60fc2e09f6936d0d385475d">Constants::G_FILE_OTHER</a>);
<a name="l00656"></a>00656     connect(m_exitAction, SIGNAL(triggered()), <span class="keyword">this</span>, SLOT(<a class="code" href="group___core_plugin.html#ga627d7b538a0d60645e6c339bd787eeee">exit</a>()));
<a name="l00657"></a>00657 
<a name="l00658"></a>00658     <span class="comment">// Undo Action</span>
<a name="l00659"></a>00659     QAction *tmpaction = <span class="keyword">new</span> QAction(QIcon(<a class="code" href="group___core_plugin.html#gabe57fe99b37c20c83b1076cf2ee8f962">Constants::ICON_UNDO</a>), tr(<span class="stringliteral">&quot;&amp;Undo&quot;</span>), <span class="keyword">this</span>);
<a name="l00660"></a>00660     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(tmpaction, <a class="code" href="group___core_plugin.html#ga34ddc9153ce99ae69ebbe146e121719f">Constants::UNDO</a>, m_globalContext);
<a name="l00661"></a>00661     cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence::Undo);
<a name="l00662"></a>00662     cmd-&gt;<a class="code" href="group___core_plugin.html#ga07112a6a39d461f7bba7e470077ef3f4">setAttribute</a>(<a class="code" href="group___core_plugin.html#gga4d899c1f711159a432afeab3eb78c917a458aeb773c85933e0dd3e1bbf5a4243c">Command::CA_UpdateText</a>);
<a name="l00663"></a>00663     cmd-&gt;<a class="code" href="group___core_plugin.html#ga01b34fc1e361fb10f26bce17e7f1abd7">setDefaultText</a>(tr(<span class="stringliteral">&quot;&amp;Undo&quot;</span>));
<a name="l00664"></a>00664     medit-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga2975c00095be592f9dc54342040fe08b">Constants::G_EDIT_UNDOREDO</a>);
<a name="l00665"></a>00665     tmpaction-&gt;setEnabled(<span class="keyword">false</span>);
<a name="l00666"></a>00666 
<a name="l00667"></a>00667     <span class="comment">// Redo Action</span>
<a name="l00668"></a>00668     tmpaction = <span class="keyword">new</span> QAction(QIcon(<a class="code" href="group___core_plugin.html#ga5790e2eaef746c0c5f24032e09413721">Constants::ICON_REDO</a>), tr(<span class="stringliteral">&quot;&amp;Redo&quot;</span>), <span class="keyword">this</span>);
<a name="l00669"></a>00669     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(tmpaction, <a class="code" href="group___core_plugin.html#ga9daeef790ade4478da4320d3fd006532">Constants::REDO</a>, m_globalContext);
<a name="l00670"></a>00670     cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence::Redo);
<a name="l00671"></a>00671     cmd-&gt;<a class="code" href="group___core_plugin.html#ga07112a6a39d461f7bba7e470077ef3f4">setAttribute</a>(<a class="code" href="group___core_plugin.html#gga4d899c1f711159a432afeab3eb78c917a458aeb773c85933e0dd3e1bbf5a4243c">Command::CA_UpdateText</a>);
<a name="l00672"></a>00672     cmd-&gt;<a class="code" href="group___core_plugin.html#ga01b34fc1e361fb10f26bce17e7f1abd7">setDefaultText</a>(tr(<span class="stringliteral">&quot;&amp;Redo&quot;</span>));
<a name="l00673"></a>00673     medit-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga2975c00095be592f9dc54342040fe08b">Constants::G_EDIT_UNDOREDO</a>);
<a name="l00674"></a>00674     tmpaction-&gt;setEnabled(<span class="keyword">false</span>);
<a name="l00675"></a>00675 
<a name="l00676"></a>00676     <span class="comment">// Cut Action</span>
<a name="l00677"></a>00677     tmpaction = <span class="keyword">new</span> QAction(QIcon(<a class="code" href="group___core_plugin.html#gab11796caa2887911728f7c3830344151">Constants::ICON_CUT</a>), tr(<span class="stringliteral">&quot;Cu&amp;t&quot;</span>), <span class="keyword">this</span>);
<a name="l00678"></a>00678     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(tmpaction, <a class="code" href="group___core_plugin.html#ga81faf7dc9520b27201aca63aa91304ba">Constants::CUT</a>, m_globalContext);
<a name="l00679"></a>00679     cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence::Cut);
<a name="l00680"></a>00680     medit-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga6713439b668227888c67cb139db0a617">Constants::G_EDIT_COPYPASTE</a>);
<a name="l00681"></a>00681     tmpaction-&gt;setEnabled(<span class="keyword">false</span>);
<a name="l00682"></a>00682 
<a name="l00683"></a>00683     <span class="comment">// Copy Action</span>
<a name="l00684"></a>00684     tmpaction = <span class="keyword">new</span> QAction(QIcon(<a class="code" href="group___core_plugin.html#ga1aa8b94ac7d79f0f11134c497e272d21">Constants::ICON_COPY</a>), tr(<span class="stringliteral">&quot;&amp;Copy&quot;</span>), <span class="keyword">this</span>);
<a name="l00685"></a>00685     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(tmpaction, <a class="code" href="group___core_plugin.html#gaa1db11f59291095e04627940894961fc">Constants::COPY</a>, m_globalContext);
<a name="l00686"></a>00686     cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence::Copy);
<a name="l00687"></a>00687     medit-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga6713439b668227888c67cb139db0a617">Constants::G_EDIT_COPYPASTE</a>);
<a name="l00688"></a>00688     tmpaction-&gt;setEnabled(<span class="keyword">false</span>);
<a name="l00689"></a>00689 
<a name="l00690"></a>00690     <span class="comment">// Paste Action</span>
<a name="l00691"></a>00691     tmpaction = <span class="keyword">new</span> QAction(QIcon(<a class="code" href="group___core_plugin.html#ga41f876884627c908da22fb2839b7647a">Constants::ICON_PASTE</a>), tr(<span class="stringliteral">&quot;&amp;Paste&quot;</span>), <span class="keyword">this</span>);
<a name="l00692"></a>00692     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(tmpaction, <a class="code" href="group___core_plugin.html#ga1fea14e3f4d0203c54ff91a495a3cc6b">Constants::PASTE</a>, m_globalContext);
<a name="l00693"></a>00693     cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence::Paste);
<a name="l00694"></a>00694     medit-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga6713439b668227888c67cb139db0a617">Constants::G_EDIT_COPYPASTE</a>);
<a name="l00695"></a>00695     tmpaction-&gt;setEnabled(<span class="keyword">false</span>);
<a name="l00696"></a>00696 
<a name="l00697"></a>00697     <span class="comment">// Select All</span>
<a name="l00698"></a>00698     tmpaction = <span class="keyword">new</span> QAction(tr(<span class="stringliteral">&quot;&amp;Select All&quot;</span>), <span class="keyword">this</span>);
<a name="l00699"></a>00699     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(tmpaction, <a class="code" href="group___core_plugin.html#ga088348a7f32fe0a36bc24dfb67dfbdab">Constants::SELECTALL</a>, m_globalContext);
<a name="l00700"></a>00700     cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence::SelectAll);
<a name="l00701"></a>00701     medit-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#gaa884d741f6c93335368ca06c9385686d">Constants::G_EDIT_SELECTALL</a>);
<a name="l00702"></a>00702     tmpaction-&gt;setEnabled(<span class="keyword">false</span>);
<a name="l00703"></a>00703 
<a name="l00704"></a>00704     <span class="comment">// Options Action</span>
<a name="l00705"></a>00705     m_optionsAction = <span class="keyword">new</span> QAction(QIcon(<a class="code" href="group___core_plugin.html#gac73aa396739bdb0badac34e06112b536">Constants::ICON_OPTIONS</a>), tr(<span class="stringliteral">&quot;&amp;Options...&quot;</span>), <span class="keyword">this</span>);
<a name="l00706"></a>00706     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(m_optionsAction, <a class="code" href="group___core_plugin.html#ga267bcce339e88888bc0201263e9bbdfb">Constants::OPTIONS</a>, m_globalContext);
<a name="l00707"></a>00707 <span class="preprocessor">#ifdef Q_WS_MAC</span>
<a name="l00708"></a>00708 <span class="preprocessor"></span>    cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence(<span class="stringliteral">&quot;Ctrl+,&quot;</span>));
<a name="l00709"></a>00709     cmd-&gt;<a class="code" href="group___core_plugin.html#ga68bf6b0115ef45e9a734956f3b0d40c5">action</a>()-&gt;setMenuRole(QAction::PreferencesRole);
<a name="l00710"></a>00710 <span class="preprocessor">#endif</span>
<a name="l00711"></a>00711 <span class="preprocessor"></span>    mtools-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#gaa9d110a5d72f47a9f4893a54bebdef9d">Constants::G_DEFAULT_THREE</a>);
<a name="l00712"></a>00712     connect(m_optionsAction, SIGNAL(triggered()), <span class="keyword">this</span>, SLOT(<a class="code" href="group___core_plugin.html#ga18a22906e317f7beddef59f9557a80ee">showOptionsDialog</a>()));
<a name="l00713"></a>00713 
<a name="l00714"></a>00714 <span class="preprocessor">#ifdef Q_WS_MAC</span>
<a name="l00715"></a>00715 <span class="preprocessor"></span>    <span class="comment">// Minimize Action</span>
<a name="l00716"></a>00716     m_minimizeAction = <span class="keyword">new</span> QAction(tr(<span class="stringliteral">&quot;Minimize&quot;</span>), <span class="keyword">this</span>);
<a name="l00717"></a>00717     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(m_minimizeAction, <a class="code" href="group___core_plugin.html#ga1bec24c27ebb317beb5bd728f2695a32">Constants::MINIMIZE_WINDOW</a>, m_globalContext);
<a name="l00718"></a>00718     cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence(<span class="stringliteral">&quot;Ctrl+M&quot;</span>));
<a name="l00719"></a>00719     mwindow-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#gaf7898919dfa3c4899d7c7fae6771ec53">Constants::G_WINDOW_SIZE</a>);
<a name="l00720"></a>00720     connect(m_minimizeAction, SIGNAL(triggered()), <span class="keyword">this</span>, SLOT(showMinimized()));
<a name="l00721"></a>00721 
<a name="l00722"></a>00722     <span class="comment">// Zoom Action</span>
<a name="l00723"></a>00723     m_zoomAction = <span class="keyword">new</span> QAction(tr(<span class="stringliteral">&quot;Zoom&quot;</span>), <span class="keyword">this</span>);
<a name="l00724"></a>00724     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(m_zoomAction, <a class="code" href="group___core_plugin.html#gac48fb1ea972baf7b49dd3cc7f7306abe">Constants::ZOOM_WINDOW</a>, m_globalContext);
<a name="l00725"></a>00725     mwindow-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#gaf7898919dfa3c4899d7c7fae6771ec53">Constants::G_WINDOW_SIZE</a>);
<a name="l00726"></a>00726     connect(m_zoomAction, SIGNAL(triggered()), <span class="keyword">this</span>, SLOT(showMaximized()));
<a name="l00727"></a>00727 
<a name="l00728"></a>00728     <span class="comment">// Window separator</span>
<a name="l00729"></a>00729     cmd = createSeparator(am, <span class="keyword">this</span>, QLatin1String(<span class="stringliteral">&quot;QtCreator.Window.Sep.Size&quot;</span>), m_globalContext);
<a name="l00730"></a>00730     mwindow-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#gaf7898919dfa3c4899d7c7fae6771ec53">Constants::G_WINDOW_SIZE</a>);
<a name="l00731"></a>00731 <span class="preprocessor">#endif</span>
<a name="l00732"></a>00732 <span class="preprocessor"></span>
<a name="l00733"></a>00733 <span class="preprocessor">#ifndef Q_WS_MAC</span>
<a name="l00734"></a>00734 <span class="preprocessor"></span>    <span class="comment">// Full Screen Action</span>
<a name="l00735"></a>00735     m_toggleFullScreenAction = <span class="keyword">new</span> QAction(tr(<span class="stringliteral">&quot;Full Screen&quot;</span>), <span class="keyword">this</span>);
<a name="l00736"></a>00736     m_toggleFullScreenAction-&gt;setCheckable(<span class="keyword">true</span>);
<a name="l00737"></a>00737     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(m_toggleFullScreenAction, <a class="code" href="group___core_plugin.html#gaf42c8b03a52e53fbdc3a6f8c014230e8">Constants::TOGGLE_FULLSCREEN</a>, m_globalContext);
<a name="l00738"></a>00738     cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence(<span class="stringliteral">&quot;Ctrl+Shift+F11&quot;</span>));
<a name="l00739"></a>00739     mwindow-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#gaf7898919dfa3c4899d7c7fae6771ec53">Constants::G_WINDOW_SIZE</a>);
<a name="l00740"></a>00740     connect(m_toggleFullScreenAction, SIGNAL(triggered(<span class="keywordtype">bool</span>)), <span class="keyword">this</span>, SLOT(<a class="code" href="group___core_plugin.html#gac3795529e7fd028195be00ec0187e6d5">setFullScreen</a>(<span class="keywordtype">bool</span>)));
<a name="l00741"></a>00741 <span class="preprocessor">#endif</span>
<a name="l00742"></a>00742 <span class="preprocessor"></span>
<a name="l00743"></a>00743     <span class="comment">/*</span>
<a name="l00744"></a>00744 <span class="comment">     * UavGadgetManager Actions</span>
<a name="l00745"></a>00745 <span class="comment">     */</span>
<a name="l00746"></a>00746     <span class="keyword">const</span> QList&lt;int&gt; uavGadgetManagerContext =
<a name="l00747"></a>00747                 QList&lt;int&gt;() &lt;&lt; <a class="code" href="group___core_plugin.html#ga71099762904aac0b404fcd1f93bdc83e">CoreImpl::instance</a>()-&gt;<a class="code" href="group___core_plugin.html#ga4485869beb58de37e2e2e1a5fe0db6eb" title="Returns the application&#39;s id manager.">uniqueIDManager</a>()-&gt;<a class="code" href="group___core_plugin.html#ga753353ca9958604a964c9cf807b77e60">uniqueIdentifier</a>(<a class="code" href="group___core_plugin.html#gadcf6598aadc47f352b823e661b5d5a77">Constants::C_UAVGADGETMANAGER</a>);
<a name="l00748"></a>00748     <span class="comment">//Window menu separators</span>
<a name="l00749"></a>00749     QAction *tmpaction1 = <span class="keyword">new</span> QAction(<span class="keyword">this</span>);
<a name="l00750"></a>00750     tmpaction1-&gt;setSeparator(<span class="keyword">true</span>);
<a name="l00751"></a>00751     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(tmpaction1, QLatin1String(<span class="stringliteral">&quot;OpenPilot.Window.Sep.Split&quot;</span>), uavGadgetManagerContext);
<a name="l00752"></a>00752     mwindow-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga4190c46f07971ca1d0556fdf9c45e8b4">Constants::G_WINDOW_HIDE_TOOLBAR</a>);
<a name="l00753"></a>00753 
<a name="l00754"></a>00754     m_showToolbarsAction = <span class="keyword">new</span> QAction(tr(<span class="stringliteral">&quot;Edit Gadgets Mode&quot;</span>), <span class="keyword">this</span>);
<a name="l00755"></a>00755     m_showToolbarsAction-&gt;setCheckable(<span class="keyword">true</span>);
<a name="l00756"></a>00756     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(m_showToolbarsAction, <a class="code" href="group___core_plugin.html#ga9f0968263dea29529229d46e5f7cbf68">Constants::HIDE_TOOLBARS</a>, uavGadgetManagerContext);
<a name="l00757"></a>00757     cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence(tr(<span class="stringliteral">&quot;Ctrl+Shift+F10&quot;</span>)));
<a name="l00758"></a>00758     mwindow-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga4190c46f07971ca1d0556fdf9c45e8b4">Constants::G_WINDOW_HIDE_TOOLBAR</a>);
<a name="l00759"></a>00759 
<a name="l00760"></a>00760     <span class="comment">//Window menu separators</span>
<a name="l00761"></a>00761     QAction *tmpaction2 = <span class="keyword">new</span> QAction(<span class="keyword">this</span>);
<a name="l00762"></a>00762     tmpaction2-&gt;setSeparator(<span class="keyword">true</span>);
<a name="l00763"></a>00763     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(tmpaction2, QLatin1String(<span class="stringliteral">&quot;OpenPilot.Window.Sep.Split2&quot;</span>), uavGadgetManagerContext);
<a name="l00764"></a>00764     mwindow-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga3472fada8655f283eeb17e84f03a3dfb">Constants::G_WINDOW_SPLIT</a>);
<a name="l00765"></a>00765 
<a name="l00766"></a>00766 <span class="preprocessor">#ifdef Q_WS_MAC</span>
<a name="l00767"></a>00767 <span class="preprocessor"></span>    <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> prefix = tr(<span class="stringliteral">&quot;Meta+Shift&quot;</span>);
<a name="l00768"></a>00768 <span class="preprocessor">#else</span>
<a name="l00769"></a>00769 <span class="preprocessor"></span>    <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> prefix = tr(<span class="stringliteral">&quot;Ctrl+Shift&quot;</span>);
<a name="l00770"></a>00770 <span class="preprocessor">#endif</span>
<a name="l00771"></a>00771 <span class="preprocessor"></span>
<a name="l00772"></a>00772     m_splitAction = <span class="keyword">new</span> QAction(tr(<span class="stringliteral">&quot;Split&quot;</span>), <span class="keyword">this</span>);
<a name="l00773"></a>00773     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(m_splitAction, <a class="code" href="group___core_plugin.html#gac606ab3edf11d3377855b39076879af2">Constants::SPLIT</a>, uavGadgetManagerContext);
<a name="l00774"></a>00774     cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence(tr(<span class="stringliteral">&quot;%1+Down&quot;</span>).arg(prefix)));
<a name="l00775"></a>00775     mwindow-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga3472fada8655f283eeb17e84f03a3dfb">Constants::G_WINDOW_SPLIT</a>);
<a name="l00776"></a>00776 
<a name="l00777"></a>00777     m_splitSideBySideAction = <span class="keyword">new</span> QAction(tr(<span class="stringliteral">&quot;Split Side by Side&quot;</span>), <span class="keyword">this</span>);
<a name="l00778"></a>00778     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(m_splitSideBySideAction, <a class="code" href="group___core_plugin.html#gabececa23956bc46634779f4abbb9bad9">Constants::SPLIT_SIDE_BY_SIDE</a>, uavGadgetManagerContext);
<a name="l00779"></a>00779     cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence(tr(<span class="stringliteral">&quot;%1+Right&quot;</span>).arg(prefix)));
<a name="l00780"></a>00780     mwindow-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga3472fada8655f283eeb17e84f03a3dfb">Constants::G_WINDOW_SPLIT</a>);
<a name="l00781"></a>00781 
<a name="l00782"></a>00782     m_removeCurrentSplitAction = <span class="keyword">new</span> QAction(tr(<span class="stringliteral">&quot;Close Current View&quot;</span>), <span class="keyword">this</span>);
<a name="l00783"></a>00783     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(m_removeCurrentSplitAction, <a class="code" href="group___core_plugin.html#ga333ed74b9c4600e73641e017ff527e10">Constants::REMOVE_CURRENT_SPLIT</a>, uavGadgetManagerContext);
<a name="l00784"></a>00784     cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence(tr(<span class="stringliteral">&quot;%1+C&quot;</span>).arg(prefix)));
<a name="l00785"></a>00785     mwindow-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga3472fada8655f283eeb17e84f03a3dfb">Constants::G_WINDOW_SPLIT</a>);
<a name="l00786"></a>00786 
<a name="l00787"></a>00787     m_removeAllSplitsAction = <span class="keyword">new</span> QAction(tr(<span class="stringliteral">&quot;Close All Other Views&quot;</span>), <span class="keyword">this</span>);
<a name="l00788"></a>00788     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(m_removeAllSplitsAction, <a class="code" href="group___core_plugin.html#ga88a3d0898a8b11873092cedcbac1d981">Constants::REMOVE_ALL_SPLITS</a>, uavGadgetManagerContext);
<a name="l00789"></a>00789     cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence(tr(<span class="stringliteral">&quot;%1+A&quot;</span>).arg(prefix)));
<a name="l00790"></a>00790     mwindow-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga3472fada8655f283eeb17e84f03a3dfb">Constants::G_WINDOW_SPLIT</a>);
<a name="l00791"></a>00791 
<a name="l00792"></a>00792     m_gotoOtherSplitAction = <span class="keyword">new</span> QAction(tr(<span class="stringliteral">&quot;Goto Next View&quot;</span>), <span class="keyword">this</span>);
<a name="l00793"></a>00793     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(m_gotoOtherSplitAction, <a class="code" href="group___core_plugin.html#ga615e7fc83cead9cfc1d43aa8b748a688">Constants::GOTO_OTHER_SPLIT</a>, uavGadgetManagerContext);
<a name="l00794"></a>00794     cmd-&gt;<a class="code" href="group___core_plugin.html#ga9edb60253a233526349538b2fcb2e093">setDefaultKeySequence</a>(QKeySequence(tr(<span class="stringliteral">&quot;%1+N&quot;</span>).arg(prefix)));
<a name="l00795"></a>00795     mwindow-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga3472fada8655f283eeb17e84f03a3dfb">Constants::G_WINDOW_SPLIT</a>);
<a name="l00796"></a>00796 
<a name="l00797"></a>00797     <span class="comment">//Help Action</span>
<a name="l00798"></a>00798     tmpaction = <span class="keyword">new</span> QAction(QIcon(<a class="code" href="group___core_plugin.html#gacfd62907dace8bb425a3d9d01e953de6">Constants::ICON_HELP</a>), tr(<span class="stringliteral">&quot;&amp;Help...&quot;</span>), <span class="keyword">this</span>);
<a name="l00799"></a>00799     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(tmpaction, <a class="code" href="group___core_plugin.html#ga8e2fb85a38cf8aedef4ada147ef05f83">Constants::G_HELP_HELP</a>, m_globalContext);
<a name="l00800"></a>00800     mhelp-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga8e2fb85a38cf8aedef4ada147ef05f83">Constants::G_HELP_HELP</a>);
<a name="l00801"></a>00801     tmpaction-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00802"></a>00802     connect(tmpaction, SIGNAL(triggered()), <span class="keyword">this</span>,  SLOT(showHelp()));
<a name="l00803"></a>00803 
<a name="l00804"></a>00804     <span class="comment">// About sep</span>
<a name="l00805"></a>00805 <span class="preprocessor">#ifndef Q_WS_MAC // doesn&#39;t have the &quot;About&quot; actions in the Help menu</span>
<a name="l00806"></a>00806 <span class="preprocessor"></span>    tmpaction = <span class="keyword">new</span> QAction(<span class="keyword">this</span>);
<a name="l00807"></a>00807     tmpaction-&gt;setSeparator(<span class="keyword">true</span>);
<a name="l00808"></a>00808     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(tmpaction, QLatin1String(<span class="stringliteral">&quot;QtCreator.Help.Sep.About&quot;</span>), m_globalContext);
<a name="l00809"></a>00809     mhelp-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga7296b3913219eb7bd0b5d11808f0dadc">Constants::G_HELP_ABOUT</a>);
<a name="l00810"></a>00810 <span class="preprocessor">#endif</span>
<a name="l00811"></a>00811 <span class="preprocessor"></span>
<a name="l00812"></a>00812     <span class="comment">//About Plugins Action</span>
<a name="l00813"></a>00813     tmpaction = <span class="keyword">new</span> QAction(QIcon(<a class="code" href="group___core_plugin.html#ga9f234fb33ceb5b9f3f840c6934e979ed">Constants::ICON_PLUGIN</a>), tr(<span class="stringliteral">&quot;About &amp;Plugins...&quot;</span>), <span class="keyword">this</span>);
<a name="l00814"></a>00814     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(tmpaction, <a class="code" href="group___core_plugin.html#ga095daad5ebb7bc7b081dcf9189effc4a">Constants::ABOUT_PLUGINS</a>, m_globalContext);
<a name="l00815"></a>00815     mhelp-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga7296b3913219eb7bd0b5d11808f0dadc">Constants::G_HELP_ABOUT</a>);
<a name="l00816"></a>00816     tmpaction-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00817"></a>00817 <span class="preprocessor">#ifdef Q_WS_MAC</span>
<a name="l00818"></a>00818 <span class="preprocessor"></span>    cmd-&gt;<a class="code" href="group___core_plugin.html#ga68bf6b0115ef45e9a734956f3b0d40c5">action</a>()-&gt;setMenuRole(QAction::ApplicationSpecificRole);
<a name="l00819"></a>00819 <span class="preprocessor">#endif</span>
<a name="l00820"></a>00820 <span class="preprocessor"></span>    connect(tmpaction, SIGNAL(triggered()), <span class="keyword">this</span>,  SLOT(aboutPlugins()));
<a name="l00821"></a>00821 
<a name="l00822"></a>00822     <span class="comment">// About GCS Action</span>
<a name="l00823"></a>00823 <span class="preprocessor">#ifdef Q_WS_MAC</span>
<a name="l00824"></a>00824 <span class="preprocessor"></span>    tmpaction = <span class="keyword">new</span> QAction(QIcon(<a class="code" href="group___core_plugin.html#ga04096dc16c442e5d5ececcfbcf814d16">Constants::ICON_TAULABS</a>), tr(<span class="stringliteral">&quot;About &amp;Tau Labs GCS&quot;</span>), <span class="keyword">this</span>); <span class="comment">// it&#39;s convention not to add dots to the about menu</span>
<a name="l00825"></a>00825 <span class="preprocessor">#else</span>
<a name="l00826"></a>00826 <span class="preprocessor"></span>    tmpaction = <span class="keyword">new</span> QAction(QIcon(<a class="code" href="group___core_plugin.html#ga04096dc16c442e5d5ececcfbcf814d16">Constants::ICON_TAULABS</a>), tr(<span class="stringliteral">&quot;About &amp;Tau Labs GCS...&quot;</span>), <span class="keyword">this</span>);
<a name="l00827"></a>00827 <span class="preprocessor">#endif</span>
<a name="l00828"></a>00828 <span class="preprocessor"></span>    cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(tmpaction, <a class="code" href="group___core_plugin.html#ga3e397585903bccc171404c5e9e28db57">Constants::ABOUT_TAULABSGCS</a>, m_globalContext);
<a name="l00829"></a>00829     mhelp-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga7296b3913219eb7bd0b5d11808f0dadc">Constants::G_HELP_ABOUT</a>);
<a name="l00830"></a>00830     tmpaction-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00831"></a>00831 <span class="preprocessor">#ifdef Q_WS_MAC</span>
<a name="l00832"></a>00832 <span class="preprocessor"></span>    cmd-&gt;<a class="code" href="group___core_plugin.html#ga68bf6b0115ef45e9a734956f3b0d40c5">action</a>()-&gt;setMenuRole(QAction::ApplicationSpecificRole);
<a name="l00833"></a>00833 <span class="preprocessor">#endif</span>
<a name="l00834"></a>00834 <span class="preprocessor"></span>    connect(tmpaction, SIGNAL(triggered()), <span class="keyword">this</span>,  SLOT(aboutTauLabsGCS()));
<a name="l00835"></a>00835 
<a name="l00836"></a>00836     <span class="comment">//Credits Action</span>
<a name="l00837"></a>00837     tmpaction = <span class="keyword">new</span> QAction(QIcon(<a class="code" href="group___core_plugin.html#ga9f234fb33ceb5b9f3f840c6934e979ed">Constants::ICON_PLUGIN</a>), tr(<span class="stringliteral">&quot;About &amp;Authors...&quot;</span>), <span class="keyword">this</span>);
<a name="l00838"></a>00838     cmd = am-&gt;<a class="code" href="group___core_plugin.html#ga85856b30617fb3861bb25b1745e88ab1" title="Makes an action known to the system under the specified string id.">registerAction</a>(tmpaction, <a class="code" href="group___core_plugin.html#gae913d5d04138374d54ecfdabbc3d01ad">Constants::ABOUT_AUTHORS</a>, m_globalContext);
<a name="l00839"></a>00839     mhelp-&gt;<a class="code" href="group___core_plugin.html#gaae18910476f06c6af0eecd572bf1dd51">addAction</a>(cmd, <a class="code" href="group___core_plugin.html#ga7296b3913219eb7bd0b5d11808f0dadc">Constants::G_HELP_ABOUT</a>);
<a name="l00840"></a>00840     tmpaction-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00841"></a>00841 <span class="preprocessor">#ifdef Q_WS_MAC</span>
<a name="l00842"></a>00842 <span class="preprocessor"></span>    cmd-&gt;<a class="code" href="group___core_plugin.html#ga68bf6b0115ef45e9a734956f3b0d40c5">action</a>()-&gt;setMenuRole(QAction::ApplicationSpecificRole);
<a name="l00843"></a>00843 <span class="preprocessor">#endif</span>
<a name="l00844"></a>00844 <span class="preprocessor"></span>    connect(tmpaction, SIGNAL(triggered()), <span class="keyword">this</span>,  SLOT(aboutTauLabsAuthors()));
<a name="l00845"></a>00845 
<a name="l00846"></a>00846 
<a name="l00847"></a>00847 }
<a name="l00848"></a>00848 
<a name="l00849"></a><a class="code" href="group___core_plugin.html#ga69f73b93cc05c89a9ae1be0161105982">00849</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga69f73b93cc05c89a9ae1be0161105982">MainWindow::newFile</a>()
<a name="l00850"></a>00850 {
<a name="l00851"></a>00851 }
<a name="l00852"></a>00852 
<a name="l00853"></a>00853 <span class="keywordtype">void</span> MainWindow::openFile()
<a name="l00854"></a>00854 {
<a name="l00855"></a>00855 }
<a name="l00856"></a>00856 
<a name="l00857"></a>00857 <span class="comment">/*static QList&lt;IFileFactory*&gt; getNonEditorFileFactories()</span>
<a name="l00858"></a>00858 <span class="comment">{</span>
<a name="l00859"></a>00859 <span class="comment">    QList&lt;IFileFactory*&gt; tmp;</span>
<a name="l00860"></a>00860 <span class="comment">    return tmp;</span>
<a name="l00861"></a>00861 <span class="comment">}</span>
<a name="l00862"></a>00862 <span class="comment"></span>
<a name="l00863"></a>00863 <span class="comment">static IFileFactory *findFileFactory(const QList&lt;IFileFactory*&gt; &amp;fileFactories,</span>
<a name="l00864"></a>00864 <span class="comment">                                     const MimeDatabase *db,</span>
<a name="l00865"></a>00865 <span class="comment">                                     const QFileInfo &amp;fi)</span>
<a name="l00866"></a>00866 <span class="comment">{</span>
<a name="l00867"></a>00867 <span class="comment">    if (const MimeType mt = db-&gt;findByFile(fi)) {</span>
<a name="l00868"></a>00868 <span class="comment">        const QString type = mt.type();</span>
<a name="l00869"></a>00869 <span class="comment">        foreach (IFileFactory *factory, fileFactories) {</span>
<a name="l00870"></a>00870 <span class="comment">            if (factory-&gt;mimeTypes().contains(type))</span>
<a name="l00871"></a>00871 <span class="comment">                return factory;</span>
<a name="l00872"></a>00872 <span class="comment">        }</span>
<a name="l00873"></a>00873 <span class="comment">    }</span>
<a name="l00874"></a>00874 <span class="comment">    return 0;</span>
<a name="l00875"></a>00875 <span class="comment">}</span>
<a name="l00876"></a>00876 <span class="comment"></span>
<a name="l00877"></a>00877 <span class="comment">// opens either an editor or loads a project</span>
<a name="l00878"></a>00878 <span class="comment">void MainWindow::openFiles(const QStringList &amp;fileNames)</span>
<a name="l00879"></a>00879 <span class="comment">{</span>
<a name="l00880"></a>00880 <span class="comment">    QList&lt;IFileFactory*&gt; nonEditorFileFactories = getNonEditorFileFactories();</span>
<a name="l00881"></a>00881 <span class="comment"></span>
<a name="l00882"></a>00882 <span class="comment">    foreach (const QString &amp;fileName, fileNames) {</span>
<a name="l00883"></a>00883 <span class="comment">        const QFileInfo fi(fileName);</span>
<a name="l00884"></a>00884 <span class="comment">        const QString absoluteFilePath = fi.absoluteFilePath();</span>
<a name="l00885"></a>00885 <span class="comment">        if (IFileFactory *fileFactory = findFileFactory(nonEditorFileFactories, mimeDatabase(), fi)) {</span>
<a name="l00886"></a>00886 <span class="comment">            fileFactory-&gt;open(absoluteFilePath);</span>
<a name="l00887"></a>00887 <span class="comment">        } else {</span>
<a name="l00888"></a>00888 <span class="comment"></span>
<a name="l00889"></a>00889 <span class="comment">        }</span>
<a name="l00890"></a>00890 <span class="comment">    }</span>
<a name="l00891"></a>00891 <span class="comment">}*/</span>
<a name="l00892"></a>00892 
<a name="l00893"></a>00893 <span class="keywordtype">void</span> MainWindow::setFocusToEditor()
<a name="l00894"></a>00894 {
<a name="l00895"></a>00895 
<a name="l00896"></a>00896 }
<a name="l00897"></a>00897 
<a name="l00898"></a><a class="code" href="group___core_plugin.html#ga18a22906e317f7beddef59f9557a80ee">00898</a> <span class="keywordtype">bool</span> <a class="code" href="group___core_plugin.html#ga18a22906e317f7beddef59f9557a80ee">MainWindow::showOptionsDialog</a>(<span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> &amp;category,
<a name="l00899"></a>00899                                    <span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> &amp;page,
<a name="l00900"></a>00900                                    QWidget *parent)
<a name="l00901"></a>00901 {
<a name="l00902"></a>00902     emit m_coreImpl-&gt;<a class="code" href="group___core_plugin.html#gafba7e27b9e0330206e2c77eebbeb7038" title="Signal that allows plugins to perform actions just before the {Tools|Options} dialog is shown...">optionsDialogRequested</a>();
<a name="l00903"></a>00903     <span class="keywordflow">if</span> (!parent)
<a name="l00904"></a>00904         parent = <span class="keyword">this</span>;
<a name="l00905"></a>00905     <a class="code" href="class_core_1_1_internal_1_1_settings_dialog.html">SettingsDialog</a> dlg(parent, category, page);
<a name="l00906"></a>00906     <span class="keywordflow">return</span> dlg.<a class="code" href="group___core_plugin.html#ga39aeb933e3a9148592563c484cbce0cb">execDialog</a>();
<a name="l00907"></a>00907 }
<a name="l00908"></a>00908 
<a name="l00909"></a>00909 <span class="keywordtype">void</span> MainWindow::saveAll()
<a name="l00910"></a>00910 {
<a name="l00911"></a>00911     <span class="keywordflow">if</span> ( m_dontSaveSettings) <span class="keywordflow">return</span>;
<a name="l00912"></a>00912 
<a name="l00913"></a>00913     emit m_coreImpl-&gt;<a class="code" href="group___core_plugin.html#ga5deecf671e1390e1489d696dd89f112d" title="Emitted to signal that the user has requested that the global settings should be saved to disk...">saveSettingsRequested</a>();
<a name="l00914"></a>00914     <a class="code" href="group___core_plugin.html#ga1400c8a8dc0525a89892b399cdbe00dd">saveSettings</a>(); <span class="comment">// TauLabs-specific.</span>
<a name="l00915"></a>00915 }
<a name="l00916"></a>00916 
<a name="l00917"></a><a class="code" href="group___core_plugin.html#ga627d7b538a0d60645e6c339bd787eeee">00917</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga627d7b538a0d60645e6c339bd787eeee">MainWindow::exit</a>()
<a name="l00918"></a>00918 {
<a name="l00919"></a>00919     <span class="comment">// this function is most likely called from a user action</span>
<a name="l00920"></a>00920     <span class="comment">// that is from an event handler of an object</span>
<a name="l00921"></a>00921     <span class="comment">// since on close we are going to delete everything</span>
<a name="l00922"></a>00922     <span class="comment">// so to prevent the deleting of that object we</span>
<a name="l00923"></a>00923     <span class="comment">// just append it</span>
<a name="l00924"></a>00924     QTimer::singleShot(0, <span class="keyword">this</span>,  SLOT(close()));
<a name="l00925"></a>00925 }
<a name="l00926"></a>00926 
<a name="l00927"></a><a class="code" href="group___core_plugin.html#ga6b2e95592588842489c28905b25548c4">00927</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga6b2e95592588842489c28905b25548c4">MainWindow::openFileWith</a>()
<a name="l00928"></a>00928 {
<a name="l00929"></a>00929 
<a name="l00930"></a>00930 }
<a name="l00931"></a>00931 
<a name="l00932"></a>00932 <span class="keywordtype">void</span> MainWindow::applyTabBarSettings(QTabWidget::TabPosition pos, <span class="keywordtype">bool</span> movable) {
<a name="l00933"></a>00933     <span class="keywordflow">if</span> (m_modeStack-&gt;tabPosition() != pos)
<a name="l00934"></a>00934         m_modeStack-&gt;setTabPosition(pos);
<a name="l00935"></a>00935     m_modeStack-&gt;setMovable(movable);
<a name="l00936"></a>00936 }
<a name="l00937"></a>00937 
<a name="l00938"></a>00938 <span class="keywordtype">void</span> MainWindow::showHelp()
<a name="l00939"></a>00939 {
<a name="l00940"></a>00940     QDesktopServices::openUrl( QUrl(<a class="code" href="group___core_plugin.html#gaee8fed47fa9e32c041c48dbcbb51eac9">Constants::GCS_HELP</a>, QUrl::StrictMode) );
<a name="l00941"></a>00941 }
<a name="l00942"></a>00942 
<a name="l00943"></a><a class="code" href="group___core_plugin.html#gab47ff8e0a661aec0be5a11339f13bdf0">00943</a> <a class="code" href="class_core_1_1_action_manager.html" title="The action manager is responsible for registration of menus and menu items and keyboard shortcuts...">ActionManager</a> *<a class="code" href="group___core_plugin.html#gab47ff8e0a661aec0be5a11339f13bdf0">MainWindow::actionManager</a>()<span class="keyword"> const</span>
<a name="l00944"></a>00944 <span class="keyword"></span>{
<a name="l00945"></a>00945     <span class="keywordflow">return</span> m_actionManager;
<a name="l00946"></a>00946 }
<a name="l00947"></a>00947 
<a name="l00948"></a><a class="code" href="group___core_plugin.html#gaa5443b3dddc907144dda5a741fa107e1">00948</a> <a class="code" href="class_core_1_1_unique_i_d_manager.html">UniqueIDManager</a> *<a class="code" href="group___core_plugin.html#gaa5443b3dddc907144dda5a741fa107e1">MainWindow::uniqueIDManager</a>()<span class="keyword"> const</span>
<a name="l00949"></a>00949 <span class="keyword"></span>{
<a name="l00950"></a>00950     <span class="keywordflow">return</span> m_uniqueIDManager;
<a name="l00951"></a>00951 }
<a name="l00952"></a>00952 
<a name="l00953"></a><a class="code" href="group___core_plugin.html#ga56d56321cb281f54cc235519ea59a8ad">00953</a> <a class="code" href="class_core_1_1_message_manager.html">MessageManager</a> *<a class="code" href="group___core_plugin.html#ga56d56321cb281f54cc235519ea59a8ad">MainWindow::messageManager</a>()<span class="keyword"> const</span>
<a name="l00954"></a>00954 <span class="keyword"></span>{
<a name="l00955"></a>00955     <span class="keywordflow">return</span> m_messageManager;
<a name="l00956"></a>00956 }
<a name="l00957"></a>00957 
<a name="l00958"></a><a class="code" href="group___core_plugin.html#ga36cb88f703fd8e9cc4662216ba0c9967">00958</a> <a class="code" href="class_core_1_1_global_messaging.html">GlobalMessaging</a> *<a class="code" href="group___core_plugin.html#ga36cb88f703fd8e9cc4662216ba0c9967">MainWindow::globalMessaging</a>()<span class="keyword"> const</span>
<a name="l00959"></a>00959 <span class="keyword"></span>{
<a name="l00960"></a>00960     <span class="keywordflow">return</span> m_globalMessaging;
<a name="l00961"></a>00961 }
<a name="l00962"></a>00962 
<a name="l00963"></a><a class="code" href="group___core_plugin.html#ga14fadbb1735f8dddb54ae61aee869a40">00963</a> QSettings *<a class="code" href="group___core_plugin.html#ga14fadbb1735f8dddb54ae61aee869a40">MainWindow::settings</a>(QSettings::Scope scope)<span class="keyword"> const</span>
<a name="l00964"></a>00964 <span class="keyword"></span>{
<a name="l00965"></a>00965     <span class="keywordflow">if</span> (scope == QSettings::UserScope)
<a name="l00966"></a>00966         <span class="keywordflow">return</span> m_settings;
<a name="l00967"></a>00967     <span class="keywordflow">else</span>
<a name="l00968"></a>00968         <span class="keywordflow">return</span> m_globalSettings;
<a name="l00969"></a>00969 }
<a name="l00970"></a>00970 
<a name="l00971"></a><a class="code" href="group___core_plugin.html#ga031742760ce2003b77a2b2abdd7c34f6">00971</a> <a class="code" href="class_core_1_1_variable_manager.html">VariableManager</a> *<a class="code" href="group___core_plugin.html#ga031742760ce2003b77a2b2abdd7c34f6">MainWindow::variableManager</a>()<span class="keyword"> const</span>
<a name="l00972"></a>00972 <span class="keyword"></span>{
<a name="l00973"></a>00973      <span class="keywordflow">return</span> m_variableManager;
<a name="l00974"></a>00974 }
<a name="l00975"></a>00975 
<a name="l00976"></a><a class="code" href="group___core_plugin.html#ga9d593b4ed45b8e7fc6652a56829d3777">00976</a> <a class="code" href="class_core_1_1_thread_manager.html">ThreadManager</a> *<a class="code" href="group___core_plugin.html#ga9d593b4ed45b8e7fc6652a56829d3777">MainWindow::threadManager</a>()<span class="keyword"> const</span>
<a name="l00977"></a>00977 <span class="keyword"></span>{
<a name="l00978"></a>00978      <span class="keywordflow">return</span> m_threadManager;
<a name="l00979"></a>00979 }
<a name="l00980"></a>00980 
<a name="l00981"></a><a class="code" href="group___core_plugin.html#ga3942909620084af15c1e375d738c9b10">00981</a> <a class="code" href="class_core_1_1_connection_manager.html">ConnectionManager</a> *<a class="code" href="group___core_plugin.html#ga3942909620084af15c1e375d738c9b10">MainWindow::connectionManager</a>()<span class="keyword"> const</span>
<a name="l00982"></a>00982 <span class="keyword"></span>{
<a name="l00983"></a>00983     <span class="keywordflow">return</span> m_connectionManager;
<a name="l00984"></a>00984 }
<a name="l00985"></a>00985 
<a name="l00986"></a><a class="code" href="group___core_plugin.html#ga7325ec21ffd857f0bd272a845f80e0c9">00986</a> <a class="code" href="class_core_1_1_board_manager.html">BoardManager</a> *<a class="code" href="group___core_plugin.html#ga7325ec21ffd857f0bd272a845f80e0c9">MainWindow::boardManager</a>()<span class="keyword"> const</span>
<a name="l00987"></a>00987 <span class="keyword"></span>{
<a name="l00988"></a>00988     <span class="keywordflow">return</span> m_boardManager;
<a name="l00989"></a>00989 }
<a name="l00990"></a>00990 
<a name="l00991"></a><a class="code" href="group___core_plugin.html#ga709d0285d98b057ef104765fb89e18f9">00991</a> QList&lt;UAVGadgetManager*&gt; <a class="code" href="group___core_plugin.html#ga709d0285d98b057ef104765fb89e18f9">MainWindow::uavGadgetManagers</a>()<span class="keyword"> const</span>
<a name="l00992"></a>00992 <span class="keyword"></span>{
<a name="l00993"></a>00993     <span class="keywordflow">return</span> m_uavGadgetManagers;
<a name="l00994"></a>00994 }
<a name="l00995"></a>00995 
<a name="l00996"></a><a class="code" href="group___core_plugin.html#ga2edd476d12d600aebca7dbced9b8d282">00996</a> <a class="code" href="class_core_1_1_u_a_v_gadget_instance_manager.html">UAVGadgetInstanceManager</a> *<a class="code" href="group___core_plugin.html#ga2edd476d12d600aebca7dbced9b8d282">MainWindow::uavGadgetInstanceManager</a>()<span class="keyword"> const</span>
<a name="l00997"></a>00997 <span class="keyword"></span>{
<a name="l00998"></a>00998     <span class="keywordflow">return</span> m_uavGadgetInstanceManager;
<a name="l00999"></a>00999 }
<a name="l01000"></a>01000 
<a name="l01001"></a>01001 
<a name="l01002"></a><a class="code" href="group___core_plugin.html#gac45c5a592157e5fa6521f7dfa811edae">01002</a> <a class="code" href="class_core_1_1_mode_manager.html">ModeManager</a> *<a class="code" href="group___core_plugin.html#gac45c5a592157e5fa6521f7dfa811edae">MainWindow::modeManager</a>()<span class="keyword"> const</span>
<a name="l01003"></a>01003 <span class="keyword"></span>{
<a name="l01004"></a>01004     <span class="keywordflow">return</span> m_modeManager;
<a name="l01005"></a>01005 }
<a name="l01006"></a>01006 
<a name="l01007"></a><a class="code" href="group___core_plugin.html#gac877661e05b7a0bb1f6a56446ddd805c">01007</a> <a class="code" href="class_core_1_1_mime_database.html">MimeDatabase</a> *<a class="code" href="group___core_plugin.html#gac877661e05b7a0bb1f6a56446ddd805c">MainWindow::mimeDatabase</a>()<span class="keyword"> const</span>
<a name="l01008"></a>01008 <span class="keyword"></span>{
<a name="l01009"></a>01009     <span class="keywordflow">return</span> m_mimeDatabase;
<a name="l01010"></a>01010 }
<a name="l01011"></a>01011 
<a name="l01012"></a><a class="code" href="group___core_plugin.html#ga5426092301e2717f66c384e4a33fe5c6">01012</a> <a class="code" href="class_core_1_1_internal_1_1_general_settings.html">GeneralSettings</a> * <a class="code" href="group___core_plugin.html#ga5426092301e2717f66c384e4a33fe5c6">MainWindow::generalSettings</a>()<span class="keyword"> const</span>
<a name="l01013"></a>01013 <span class="keyword"></span>{
<a name="l01014"></a>01014     <span class="keywordflow">return</span> m_generalSettings;
<a name="l01015"></a>01015 }
<a name="l01016"></a>01016 
<a name="l01017"></a><a class="code" href="group___core_plugin.html#gac1345c7f33f14242e6b865e1c72426a9">01017</a> <a class="code" href="class_core_1_1_i_context.html">IContext</a> *<a class="code" href="group___core_plugin.html#gac1345c7f33f14242e6b865e1c72426a9">MainWindow::contextObject</a>(QWidget *widget)
<a name="l01018"></a>01018 {
<a name="l01019"></a>01019     <span class="keywordflow">return</span> m_contextWidgets.value(widget);
<a name="l01020"></a>01020 }
<a name="l01021"></a>01021 
<a name="l01022"></a><a class="code" href="group___core_plugin.html#gada7d20cb1e2117aa2991afa0589bdfbf">01022</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#gada7d20cb1e2117aa2991afa0589bdfbf">MainWindow::addContextObject</a>(<a class="code" href="class_core_1_1_i_context.html">IContext</a> *context)
<a name="l01023"></a>01023 {
<a name="l01024"></a>01024     <span class="keywordflow">if</span> (!context)
<a name="l01025"></a>01025         <span class="keywordflow">return</span>;
<a name="l01026"></a>01026     QWidget *widget = context-&gt;<a class="code" href="group___core_plugin.html#gafa470639238652ef10e435b6c28d9282">widget</a>();
<a name="l01027"></a>01027     <span class="keywordflow">if</span> (m_contextWidgets.contains(widget))
<a name="l01028"></a>01028         <span class="keywordflow">return</span>;
<a name="l01029"></a>01029 
<a name="l01030"></a>01030     m_contextWidgets.insert(widget, context);
<a name="l01031"></a>01031 }
<a name="l01032"></a>01032 
<a name="l01033"></a><a class="code" href="group___core_plugin.html#gad67194baca34bebd58c0d57847a8d576">01033</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#gad67194baca34bebd58c0d57847a8d576">MainWindow::removeContextObject</a>(<a class="code" href="class_core_1_1_i_context.html">IContext</a> *context)
<a name="l01034"></a>01034 {
<a name="l01035"></a>01035     <span class="keywordflow">if</span> (!context)
<a name="l01036"></a>01036         <span class="keywordflow">return</span>;
<a name="l01037"></a>01037 
<a name="l01038"></a>01038     QWidget *widget = context-&gt;<a class="code" href="group___core_plugin.html#gafa470639238652ef10e435b6c28d9282">widget</a>();
<a name="l01039"></a>01039     <span class="keywordflow">if</span> (!m_contextWidgets.contains(widget))
<a name="l01040"></a>01040         <span class="keywordflow">return</span>;
<a name="l01041"></a>01041 
<a name="l01042"></a>01042     m_contextWidgets.remove(widget);
<a name="l01043"></a>01043     <span class="keywordflow">if</span> (m_activeContext == context)
<a name="l01044"></a>01044         updateContextObject(0);
<a name="l01045"></a>01045 }
<a name="l01046"></a>01046 
<a name="l01047"></a><a class="code" href="group___core_plugin.html#gaf4ca5d0d3d18ddcb7d54b6596bbf4797">01047</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#gaf4ca5d0d3d18ddcb7d54b6596bbf4797">MainWindow::changeEvent</a>(QEvent *<a class="code" href="_o_p_plots_8m.html#a9425be9aab51621e317ba7ade564b570">e</a>)
<a name="l01048"></a>01048 {
<a name="l01049"></a>01049     <a class="code" href="group___core_plugin.html#gaf4ca5d0d3d18ddcb7d54b6596bbf4797">QMainWindow::changeEvent</a>(e);
<a name="l01050"></a>01050     <span class="keywordflow">if</span> (e-&gt;type() == QEvent::ActivationChange) {
<a name="l01051"></a>01051         <span class="keywordflow">if</span> (isActiveWindow()) {
<a name="l01052"></a>01052             <span class="keywordflow">if</span> (<a class="code" href="group___core_plugin.html#ggabc5c98fcc1211af2b80116dd6e0a035daf4b0431d5cc108ace609eb877582a059">debugMainWindow</a>)
<a name="l01053"></a>01053                 qDebug() &lt;&lt; <span class="stringliteral">&quot;main window activated&quot;</span>;
<a name="l01054"></a>01054             emit <a class="code" href="group___core_plugin.html#gab85c6e89d3a93fa49b4210217ee55271">windowActivated</a>();
<a name="l01055"></a>01055         }
<a name="l01056"></a>01056     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e-&gt;type() == QEvent::WindowStateChange) {
<a name="l01057"></a>01057 <span class="preprocessor">#ifdef Q_WS_MAC</span>
<a name="l01058"></a>01058 <span class="preprocessor"></span>        <span class="keywordtype">bool</span> minimized = isMinimized();
<a name="l01059"></a>01059         <span class="keywordflow">if</span> (<a class="code" href="group___core_plugin.html#ggabc5c98fcc1211af2b80116dd6e0a035daf4b0431d5cc108ace609eb877582a059">debugMainWindow</a>)
<a name="l01060"></a>01060             qDebug() &lt;&lt; <span class="stringliteral">&quot;main window state changed to minimized=&quot;</span> &lt;&lt; minimized;
<a name="l01061"></a>01061         m_minimizeAction-&gt;setEnabled(!minimized);
<a name="l01062"></a>01062         m_zoomAction-&gt;setEnabled(!minimized);
<a name="l01063"></a>01063 <span class="preprocessor">#else</span>
<a name="l01064"></a>01064 <span class="preprocessor"></span>        <span class="keywordtype">bool</span> isFullScreen = (windowState() &amp; Qt::WindowFullScreen) != 0;
<a name="l01065"></a>01065         m_toggleFullScreenAction-&gt;setChecked(isFullScreen);
<a name="l01066"></a>01066 <span class="preprocessor">#endif</span>
<a name="l01067"></a>01067 <span class="preprocessor"></span>    }
<a name="l01068"></a>01068 }
<a name="l01069"></a>01069 
<a name="l01070"></a>01070 <span class="keywordtype">void</span> MainWindow::updateFocusWidget(QWidget *old, QWidget *now)
<a name="l01071"></a>01071 {
<a name="l01072"></a>01072     Q_UNUSED(old)
<a name="l01073"></a>01073 
<a name="l01074"></a>01074     <span class="comment">// Prevent changing the context object just because the menu is activated</span>
<a name="l01075"></a>01075     if (qobject_cast&lt;QMenuBar*&gt;(now))
<a name="l01076"></a>01076         return;
<a name="l01077"></a>01077 
<a name="l01078"></a>01078     <a class="code" href="class_core_1_1_i_context.html">IContext</a> *newContext = 0;
<a name="l01079"></a>01079     if (focusWidget()) {
<a name="l01080"></a>01080         <a class="code" href="class_core_1_1_i_context.html">IContext</a> *context = 0;
<a name="l01081"></a>01081         QWidget *p = focusWidget();
<a name="l01082"></a>01082         <span class="keywordflow">while</span> (p) {
<a name="l01083"></a>01083             context = m_contextWidgets.value(p);
<a name="l01084"></a>01084             <span class="keywordflow">if</span> (context) {
<a name="l01085"></a>01085                 newContext = context;
<a name="l01086"></a>01086                 <span class="keywordflow">break</span>;
<a name="l01087"></a>01087             }
<a name="l01088"></a>01088             p = p-&gt;parentWidget();
<a name="l01089"></a>01089         }
<a name="l01090"></a>01090     }
<a name="l01091"></a>01091     updateContextObject(newContext);
<a name="l01092"></a>01092 }
<a name="l01093"></a>01093 
<a name="l01094"></a>01094 <span class="keywordtype">void</span> MainWindow::updateContextObject(<a class="code" href="class_core_1_1_i_context.html">IContext</a> *context)
<a name="l01095"></a>01095 {
<a name="l01096"></a>01096     <span class="keywordflow">if</span> (context == m_activeContext)
<a name="l01097"></a>01097         <span class="keywordflow">return</span>;
<a name="l01098"></a>01098     <a class="code" href="class_core_1_1_i_context.html">IContext</a> *oldContext = m_activeContext;
<a name="l01099"></a>01099     m_activeContext = context;
<a name="l01100"></a>01100     <span class="keywordflow">if</span> (!context || oldContext != m_activeContext) {
<a name="l01101"></a>01101         emit m_coreImpl-&gt;<a class="code" href="group___core_plugin.html#ga682fdb2c297d6f8d9b7340dbb58699ec" title="Sent just before a new context becomes the current context (meaning that its widget got focus)...">contextAboutToChange</a>(context);
<a name="l01102"></a>01102         <a class="code" href="group___core_plugin.html#ga63b04fba7b802e0b931cb68d4cf78968">updateContext</a>();
<a name="l01103"></a>01103         <span class="keywordflow">if</span> (<a class="code" href="group___core_plugin.html#ggabc5c98fcc1211af2b80116dd6e0a035daf4b0431d5cc108ace609eb877582a059">debugMainWindow</a>)
<a name="l01104"></a>01104             qDebug() &lt;&lt; <span class="stringliteral">&quot;new context object =&quot;</span> &lt;&lt; context &lt;&lt; (context ? context-&gt;<a class="code" href="group___core_plugin.html#gafa470639238652ef10e435b6c28d9282">widget</a>() : 0)
<a name="l01105"></a>01105                      &lt;&lt; (context ? context-&gt;<a class="code" href="group___core_plugin.html#gafa470639238652ef10e435b6c28d9282">widget</a>()-&gt;metaObject()-&gt;className() : 0);
<a name="l01106"></a>01106         emit m_coreImpl-&gt;<a class="code" href="group___core_plugin.html#ga61aa6225c352ac731243c640d281c56e" title="Sent just after a new context became the current context (meaning that its widget got focus)...">contextChanged</a>(context);
<a name="l01107"></a>01107     }
<a name="l01108"></a>01108 }
<a name="l01109"></a>01109 
<a name="l01110"></a><a class="code" href="group___core_plugin.html#ga8dffd013e2adedc8c0b8700def6786f9">01110</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga8dffd013e2adedc8c0b8700def6786f9">MainWindow::resetContext</a>()
<a name="l01111"></a>01111 {
<a name="l01112"></a>01112     updateContextObject(0);
<a name="l01113"></a>01113 }
<a name="l01114"></a>01114 
<a name="l01115"></a><a class="code" href="group___core_plugin.html#ga1fcbdef10ebfdec100d2d0078abb5afa">01115</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga1fcbdef10ebfdec100d2d0078abb5afa">MainWindow::shutdown</a>()
<a name="l01116"></a>01116 {
<a name="l01117"></a>01117     disconnect(QApplication::instance(), SIGNAL(focusChanged(QWidget*,QWidget*)),
<a name="l01118"></a>01118                <span class="keyword">this</span>, SLOT(updateFocusWidget(QWidget*,QWidget*)));
<a name="l01119"></a>01119     m_activeContext = 0;
<a name="l01120"></a>01120 
<a name="l01121"></a>01121     <span class="comment">// We have to remove all the existing gagdets at his point, not</span>
<a name="l01122"></a>01122     <span class="comment">// later!</span>
<a name="l01123"></a>01123     <a class="code" href="group___core_plugin.html#ga2edd476d12d600aebca7dbced9b8d282">uavGadgetInstanceManager</a>()-&gt;<a class="code" href="group___core_plugin.html#gab4ee04e79366c92b5a26aa8324876c4a">removeAllGadgets</a>();
<a name="l01124"></a>01124 }
<a name="l01125"></a>01125 
<a name="l01126"></a>01126 <span class="comment">/* Enable/disable menus for uavgadgets */</span>
<a name="l01127"></a>01127 <span class="keywordtype">void</span> MainWindow::showUavGadgetMenus(<span class="keywordtype">bool</span> show, <span class="keywordtype">bool</span> hasSplitter)
<a name="l01128"></a>01128 {
<a name="l01129"></a>01129     m_showToolbarsAction-&gt;setChecked(show);
<a name="l01130"></a>01130     m_splitAction-&gt;setEnabled(show);
<a name="l01131"></a>01131     m_splitSideBySideAction-&gt;setEnabled(show);
<a name="l01132"></a>01132     m_removeCurrentSplitAction-&gt;setEnabled(show &amp;&amp; hasSplitter);
<a name="l01133"></a>01133     m_removeAllSplitsAction-&gt;setEnabled(show &amp;&amp; hasSplitter);
<a name="l01134"></a>01134     m_gotoOtherSplitAction-&gt;setEnabled(show &amp;&amp; hasSplitter);
<a name="l01135"></a>01135 }
<a name="l01136"></a>01136 
<a name="l01137"></a><a class="code" href="group___core_plugin.html#ga53df50603164265cef3814400fe8023f">01137</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group___core_plugin.html#ga53df50603164265cef3814400fe8023f">takeLeastPriorityUavGadgetManager</a>(<span class="keyword">const</span> QList&lt;Core::UAVGadgetManager*&gt; m_uavGadgetManagers) {
<a name="l01138"></a>01138     <span class="keywordtype">int</span> index = 0;
<a name="l01139"></a>01139     <span class="keywordtype">int</span> prio = m_uavGadgetManagers.at(0)-&gt;priority();
<a name="l01140"></a>01140     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; m_uavGadgetManagers.count(); <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {
<a name="l01141"></a>01141         <span class="keywordtype">int</span> prio2 = m_uavGadgetManagers.at(<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>)-&gt;priority();
<a name="l01142"></a>01142         <span class="keywordflow">if</span> (prio2 &lt; prio) {
<a name="l01143"></a>01143             prio = prio2;
<a name="l01144"></a>01144             index = <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;
<a name="l01145"></a>01145         }
<a name="l01146"></a>01146     }
<a name="l01147"></a>01147     <span class="keywordflow">return</span> index;
<a name="l01148"></a>01148 }
<a name="l01149"></a>01149 
<a name="l01150"></a>01150 <span class="keywordtype">void</span> MainWindow::createWorkspaces(QSettings* qs, <span class="keywordtype">bool</span> diffOnly) {
<a name="l01151"></a>01151 
<a name="l01152"></a>01152     <a class="code" href="class_extension_system_1_1_plugin_manager.html" title="Core plugin system that manages the plugins, their life cycle and their registered objects...">ExtensionSystem::PluginManager</a> *pm = ExtensionSystem::PluginManager::instance();
<a name="l01153"></a>01153 
<a name="l01154"></a>01154     <a class="code" href="class_core_1_1_u_a_v_gadget_manager.html">Core::UAVGadgetManager</a> *uavGadgetManager;
<a name="l01155"></a>01155 
<a name="l01156"></a>01156     <span class="comment">// If diffOnly is true, we only add/remove the number of workspaces</span>
<a name="l01157"></a>01157     <span class="comment">// that has changed,</span>
<a name="l01158"></a>01158     <span class="comment">// otherwise a complete reload of workspaces is done</span>
<a name="l01159"></a>01159     <span class="keywordtype">int</span> toRemoveFirst = m_uavGadgetManagers.count();
<a name="l01160"></a>01160     <span class="keywordtype">int</span> newWorkspacesNo = m_workspaceSettings-&gt;<a class="code" href="group___core_plugin.html#ga46a6c14d88c85a5ef0b125638b90141e">numberOfWorkspaces</a>();
<a name="l01161"></a>01161     <span class="keywordflow">if</span> (diffOnly &amp;&amp; m_uavGadgetManagers.count() &gt; newWorkspacesNo)
<a name="l01162"></a>01162         toRemoveFirst = m_uavGadgetManagers.count() - newWorkspacesNo;
<a name="l01163"></a>01163     <span class="keywordflow">else</span>
<a name="l01164"></a>01164         toRemoveFirst = 0;
<a name="l01165"></a>01165 
<a name="l01166"></a>01166     <span class="keywordtype">int</span> removed = 0;
<a name="l01167"></a>01167 
<a name="l01168"></a>01168     <span class="keywordflow">while</span> (!m_uavGadgetManagers.isEmpty() &amp;&amp; (toRemoveFirst &gt; removed)) {
<a name="l01169"></a>01169         <span class="keywordtype">int</span> index = <a class="code" href="group___core_plugin.html#ga53df50603164265cef3814400fe8023f">takeLeastPriorityUavGadgetManager</a>(m_uavGadgetManagers);
<a name="l01170"></a>01170         uavGadgetManager = m_uavGadgetManagers.takeAt(index);
<a name="l01171"></a>01171         uavGadgetManager-&gt;<a class="code" href="group___core_plugin.html#gac19293d686a36bafedf7bc2d0b27cb5f">removeAllSplits</a>();
<a name="l01172"></a>01172         pm-&gt;removeObject(uavGadgetManager);
<a name="l01173"></a>01173         <span class="keyword">delete</span> uavGadgetManager;
<a name="l01174"></a>01174         removed++;
<a name="l01175"></a>01175     }
<a name="l01176"></a>01176 
<a name="l01177"></a>01177     <span class="keywordtype">int</span> start = 0;
<a name="l01178"></a>01178     <span class="keywordflow">if</span> (diffOnly) {
<a name="l01179"></a>01179         start = m_uavGadgetManagers.count();
<a name="l01180"></a>01180     } <span class="keywordflow">else</span> {
<a name="l01181"></a>01181         m_uavGadgetManagers.clear();
<a name="l01182"></a>01182     }
<a name="l01183"></a>01183     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = start; <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; newWorkspacesNo; ++<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>) {
<a name="l01184"></a>01184 
<a name="l01185"></a>01185         <span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> name     = m_workspaceSettings-&gt;<a class="code" href="group___core_plugin.html#gaca9adc4c2ff0dc7f6537d248d9ed99c1">name</a>(<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);
<a name="l01186"></a>01186         <span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> iconName = m_workspaceSettings-&gt;<a class="code" href="group___core_plugin.html#ga192b99d6e0131b46373653b9062fc396">iconName</a>(<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);
<a name="l01187"></a>01187         <span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> modeName = m_workspaceSettings-&gt;<a class="code" href="group___core_plugin.html#gac647d36361c035d0534bf2a6f52bbcdd">modeName</a>(<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);
<a name="l01188"></a>01188         uavGadgetManager = <span class="keyword">new</span> <a class="code" href="class_core_1_1_u_a_v_gadget_manager.html">Core::UAVGadgetManager</a>(<a class="code" href="group___core_plugin.html#ga71099762904aac0b404fcd1f93bdc83e">CoreImpl::instance</a>(), name,
<a name="l01189"></a>01189                                                       QIcon(iconName), 90-<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+1, modeName, <span class="keyword">this</span>);
<a name="l01190"></a>01190 
<a name="l01191"></a>01191         connect(uavGadgetManager, SIGNAL(showUavGadgetMenus(<span class="keywordtype">bool</span>, <span class="keywordtype">bool</span>)), <span class="keyword">this</span>, SLOT(showUavGadgetMenus(<span class="keywordtype">bool</span>, <span class="keywordtype">bool</span>)));
<a name="l01192"></a>01192 
<a name="l01193"></a>01193         connect(m_showToolbarsAction, SIGNAL(triggered(<span class="keywordtype">bool</span>)), uavGadgetManager, SLOT(showToolbars(<span class="keywordtype">bool</span>)));
<a name="l01194"></a>01194         connect(m_splitAction, SIGNAL(triggered()), uavGadgetManager, SLOT(split()));
<a name="l01195"></a>01195         connect(m_splitSideBySideAction, SIGNAL(triggered()), uavGadgetManager, SLOT(splitSideBySide()));
<a name="l01196"></a>01196         connect(m_removeCurrentSplitAction, SIGNAL(triggered()), uavGadgetManager, SLOT(removeCurrentSplit()));
<a name="l01197"></a>01197         connect(m_removeAllSplitsAction, SIGNAL(triggered()), uavGadgetManager, SLOT(removeAllSplits()));
<a name="l01198"></a>01198         connect(m_gotoOtherSplitAction, SIGNAL(triggered()), uavGadgetManager, SLOT(gotoOtherSplit()));
<a name="l01199"></a>01199 
<a name="l01200"></a>01200         pm-&gt;addObject(uavGadgetManager);
<a name="l01201"></a>01201         m_uavGadgetManagers.append(uavGadgetManager);
<a name="l01202"></a>01202         uavGadgetManager-&gt;<a class="code" href="group___core_plugin.html#gadd58657a986d6952a7916697c6d776bf">readSettings</a>(qs);
<a name="l01203"></a>01203     }
<a name="l01204"></a>01204 }
<a name="l01205"></a>01205 
<a name="l01206"></a>01206 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *settingsGroup = <span class="stringliteral">&quot;MainWindow&quot;</span>;
<a name="l01207"></a>01207 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *geometryKey = <span class="stringliteral">&quot;Geometry&quot;</span>;
<a name="l01208"></a>01208 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *colorKey = <span class="stringliteral">&quot;Color&quot;</span>;
<a name="l01209"></a>01209 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *maxKey = <span class="stringliteral">&quot;Maximized&quot;</span>;
<a name="l01210"></a>01210 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *fullScreenKey = <span class="stringliteral">&quot;FullScreen&quot;</span>;
<a name="l01211"></a>01211 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *modePriorities = <span class="stringliteral">&quot;ModePriorities&quot;</span>;
<a name="l01212"></a>01212 
<a name="l01213"></a><a class="code" href="group___core_plugin.html#gadef90c414cbb6c8ddb7bd051ac4f6dd3">01213</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#gadef90c414cbb6c8ddb7bd051ac4f6dd3">MainWindow::readSettings</a>(QSettings* qs, <span class="keywordtype">bool</span> workspaceDiffOnly)
<a name="l01214"></a>01214 {
<a name="l01215"></a>01215     <span class="keywordflow">if</span> ( !qs ){
<a name="l01216"></a>01216         qs = m_settings;
<a name="l01217"></a>01217     }
<a name="l01218"></a>01218 
<a name="l01219"></a>01219     <span class="keywordflow">if</span> (workspaceDiffOnly) {
<a name="l01220"></a>01220         createWorkspaces(qs, workspaceDiffOnly);
<a name="l01221"></a>01221         <span class="keywordflow">return</span>;
<a name="l01222"></a>01222     }
<a name="l01223"></a>01223 
<a name="l01224"></a>01224     m_generalSettings-&gt;<a class="code" href="group___core_plugin.html#gad9782b056c9573b858d82ce59218a44e">readSettings</a>(qs);
<a name="l01225"></a>01225     m_actionManager-&gt;<a class="code" href="group___core_plugin.html#ga097c433a1e3ae316de47ded726e0f639">readSettings</a>(qs);
<a name="l01226"></a>01226 
<a name="l01227"></a>01227     qs-&gt;beginGroup(QLatin1String(settingsGroup));
<a name="l01228"></a>01228 
<a name="l01229"></a>01229     <a class="code" href="class_utils_1_1_style_helper.html#a81fb3b975c97e4928bceb3e9d99c76c8">Utils::StyleHelper::setBaseColor</a>(qs-&gt;value(QLatin1String(colorKey)).value&lt;QColor&gt;());
<a name="l01230"></a>01230 
<a name="l01231"></a>01231     <span class="keyword">const</span> QVariant geom = qs-&gt;value(QLatin1String(geometryKey));
<a name="l01232"></a>01232     <span class="keywordflow">if</span> (geom.isValid()) {
<a name="l01233"></a>01233         setGeometry(geom.toRect());
<a name="l01234"></a>01234     } <span class="keywordflow">else</span> {
<a name="l01235"></a>01235         resize(750, 400);
<a name="l01236"></a>01236     }
<a name="l01237"></a>01237     <span class="keywordflow">if</span> (qs-&gt;value(QLatin1String(maxKey), <span class="keyword">false</span>).toBool())
<a name="l01238"></a>01238         setWindowState(Qt::WindowMaximized);
<a name="l01239"></a>01239     <a class="code" href="group___core_plugin.html#gac3795529e7fd028195be00ec0187e6d5">setFullScreen</a>(qs-&gt;value(QLatin1String(fullScreenKey), <span class="keyword">false</span>).toBool());
<a name="l01240"></a>01240 
<a name="l01241"></a>01241     qs-&gt;endGroup();
<a name="l01242"></a>01242 
<a name="l01243"></a>01243     m_workspaceSettings-&gt;<a class="code" href="group___core_plugin.html#ga0079ab041ae768fb765979fa21b4f492">readSettings</a>(qs);
<a name="l01244"></a>01244 
<a name="l01245"></a>01245     createWorkspaces(qs);
<a name="l01246"></a>01246 
<a name="l01247"></a>01247     <span class="comment">// Read tab ordering</span>
<a name="l01248"></a>01248     qs-&gt;beginGroup(QLatin1String(modePriorities));
<a name="l01249"></a>01249     QStringList modeNames = qs-&gt;childKeys();
<a name="l01250"></a>01250     QMap&lt;QString, int&gt; map;
<a name="l01251"></a>01251     <span class="keywordflow">foreach</span> (<a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> modeName, modeNames) {
<a name="l01252"></a>01252         map.insert(modeName, qs-&gt;value(modeName).toInt());
<a name="l01253"></a>01253     }
<a name="l01254"></a>01254     m_modeManager-&gt;<a class="code" href="group___core_plugin.html#ga5d0135f443bbd69ffdc3cf24152cf9a0">reorderModes</a>(map);
<a name="l01255"></a>01255 
<a name="l01256"></a>01256     qs-&gt;endGroup();
<a name="l01257"></a>01257 
<a name="l01258"></a>01258 }
<a name="l01259"></a>01259 
<a name="l01260"></a>01260 
<a name="l01261"></a><a class="code" href="group___core_plugin.html#ga1400c8a8dc0525a89892b399cdbe00dd">01261</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga1400c8a8dc0525a89892b399cdbe00dd">MainWindow::saveSettings</a>(QSettings* qs)
<a name="l01262"></a>01262 {
<a name="l01263"></a>01263     <span class="keywordflow">if</span> ( m_dontSaveSettings ) <span class="keywordflow">return</span>;
<a name="l01264"></a>01264 
<a name="l01265"></a>01265     <span class="keywordflow">if</span> ( !qs ){
<a name="l01266"></a>01266         qs = m_settings;
<a name="l01267"></a>01267     }
<a name="l01268"></a>01268 
<a name="l01269"></a>01269     m_workspaceSettings-&gt;<a class="code" href="group___core_plugin.html#ga1b31a14b266c4c7510783a9cf8e7fc8c">saveSettings</a>(qs);
<a name="l01270"></a>01270 
<a name="l01271"></a>01271     qs-&gt;beginGroup(QLatin1String(settingsGroup));
<a name="l01272"></a>01272 
<a name="l01273"></a>01273     qs-&gt;setValue(QLatin1String(colorKey), <a class="code" href="class_utils_1_1_style_helper.html#a7d96ffba4103b4bac982826c2cb846e5">Utils::StyleHelper::baseColor</a>());
<a name="l01274"></a>01274 
<a name="l01275"></a>01275     <span class="keywordflow">if</span> (windowState() &amp; (Qt::WindowMaximized | Qt::WindowFullScreen)) {
<a name="l01276"></a>01276         qs-&gt;setValue(QLatin1String(maxKey), (<span class="keywordtype">bool</span>) (windowState() &amp; Qt::WindowMaximized));
<a name="l01277"></a>01277         qs-&gt;setValue(QLatin1String(fullScreenKey), (<span class="keywordtype">bool</span>) (windowState() &amp; Qt::WindowFullScreen));
<a name="l01278"></a>01278     } <span class="keywordflow">else</span> {
<a name="l01279"></a>01279         qs-&gt;setValue(QLatin1String(maxKey), <span class="keyword">false</span>);
<a name="l01280"></a>01280         qs-&gt;setValue(QLatin1String(fullScreenKey), <span class="keyword">false</span>);
<a name="l01281"></a>01281         qs-&gt;setValue(QLatin1String(geometryKey), geometry());
<a name="l01282"></a>01282     }
<a name="l01283"></a>01283 
<a name="l01284"></a>01284     qs-&gt;endGroup();
<a name="l01285"></a>01285 
<a name="l01286"></a>01286     <span class="comment">// Write tab ordering</span>
<a name="l01287"></a>01287     qs-&gt;beginGroup(QLatin1String(modePriorities));
<a name="l01288"></a>01288     QVector&lt;IMode*&gt; modes = m_modeManager-&gt;<a class="code" href="group___core_plugin.html#gafe066d728cdaeffc19eb6407a41e29e0">modes</a>();
<a name="l01289"></a>01289     <span class="keywordflow">foreach</span> (<a class="code" href="class_core_1_1_i_mode.html">IMode</a> *mode, modes) {
<a name="l01290"></a>01290         qs-&gt;setValue(QLatin1String(mode-&gt;<a class="code" href="group___core_plugin.html#gab42870ab42d71194c7f6de4afe58fba5">uniqueModeName</a>()), mode-&gt;<a class="code" href="group___core_plugin.html#gac22cc2ad63d314df4660f6345a7fff2c">priority</a>());
<a name="l01291"></a>01291     }
<a name="l01292"></a>01292     qs-&gt;endGroup();
<a name="l01293"></a>01293 
<a name="l01294"></a>01294     <span class="keywordflow">foreach</span> (<a class="code" href="class_core_1_1_u_a_v_gadget_manager.html">UAVGadgetManager</a> *manager, m_uavGadgetManagers) {
<a name="l01295"></a>01295         manager-&gt;<a class="code" href="group___core_plugin.html#gae098f8fd57c1689becd25fe77165ba58">saveSettings</a>(qs);
<a name="l01296"></a>01296     }
<a name="l01297"></a>01297 
<a name="l01298"></a>01298     m_actionManager-&gt;<a class="code" href="group___core_plugin.html#ga14b0ae1450cbbeb3a20d57f42414cb40">saveSettings</a>(qs);
<a name="l01299"></a>01299     m_generalSettings-&gt;<a class="code" href="group___core_plugin.html#gaa1e79ec44fa23eff837ff6fa6cc50385">saveSettings</a>(qs);
<a name="l01300"></a>01300     qs-&gt;beginGroup(<span class="stringliteral">&quot;General&quot;</span>);
<a name="l01301"></a>01301     qs-&gt;setValue(<span class="stringliteral">&quot;Description&quot;</span>,m_config_description);
<a name="l01302"></a>01302     qs-&gt;setValue(<span class="stringliteral">&quot;Details&quot;</span>,m_config_details);
<a name="l01303"></a>01303     qs-&gt;setValue(<span class="stringliteral">&quot;StyleSheet&quot;</span>,m_config_stylesheet);
<a name="l01304"></a>01304     qs-&gt;endGroup();
<a name="l01305"></a>01305 }
<a name="l01306"></a>01306 
<a name="l01307"></a><a class="code" href="group___core_plugin.html#ga73d4a9b5000444898214e4cd5e9c4ba2">01307</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#gadef90c414cbb6c8ddb7bd051ac4f6dd3">MainWindow::readSettings</a>(<a class="code" href="class_core_1_1_i_configurable_plugin.html">IConfigurablePlugin</a>* plugin, QSettings* qs)
<a name="l01308"></a>01308 {
<a name="l01309"></a>01309     <span class="keywordflow">if</span> ( !qs ){
<a name="l01310"></a>01310         qs = m_settings;
<a name="l01311"></a>01311     }
<a name="l01312"></a>01312 
<a name="l01313"></a>01313     <a class="code" href="class_core_1_1_u_a_v_config_info.html" title="The Config Info is a helper-class to handle version changes in GCS configuration files.">UAVConfigInfo</a> configInfo;
<a name="l01314"></a>01314     QObject* qo = <span class="keyword">reinterpret_cast&lt;</span>QObject *<span class="keyword">&gt;</span>(plugin);
<a name="l01315"></a>01315     <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> configName = qo-&gt;metaObject()-&gt;className();
<a name="l01316"></a>01316 
<a name="l01317"></a>01317     qs-&gt;beginGroup(<span class="stringliteral">&quot;Plugins&quot;</span>);
<a name="l01318"></a>01318     qs-&gt;beginGroup(configName);
<a name="l01319"></a>01319     configInfo.<a class="code" href="group___core_plugin.html#ga62813f8316e5bdf825f049c85e1d210d">read</a>(qs);
<a name="l01320"></a>01320     configInfo.<a class="code" href="group___core_plugin.html#ga448ae0ec57eeaf4fafc1323489437506">setNameOfConfigurable</a>(<span class="stringliteral">&quot;Plugin-&quot;</span>+configName);
<a name="l01321"></a>01321     qs-&gt;beginGroup(<span class="stringliteral">&quot;data&quot;</span>);
<a name="l01322"></a>01322     plugin-&gt;<a class="code" href="class_core_1_1_i_configurable_plugin.html#af40567d082a243282cda71b3f9efd83f">readConfig</a>(qs, &amp;configInfo);
<a name="l01323"></a>01323 
<a name="l01324"></a>01324     qs-&gt;endGroup();
<a name="l01325"></a>01325     qs-&gt;endGroup();
<a name="l01326"></a>01326     qs-&gt;endGroup();
<a name="l01327"></a>01327 
<a name="l01328"></a>01328 }
<a name="l01329"></a>01329 
<a name="l01330"></a><a class="code" href="group___core_plugin.html#gabaed765ca937cc2a9a6656707af51b73">01330</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga1400c8a8dc0525a89892b399cdbe00dd">MainWindow::saveSettings</a>(<a class="code" href="class_core_1_1_i_configurable_plugin.html">IConfigurablePlugin</a>* plugin, QSettings* qs)
<a name="l01331"></a>01331 {
<a name="l01332"></a>01332     <span class="keywordflow">if</span> ( m_dontSaveSettings ) <span class="keywordflow">return</span>;
<a name="l01333"></a>01333     <span class="keywordflow">if</span> ( !qs ){
<a name="l01334"></a>01334         qs = m_settings;
<a name="l01335"></a>01335     }
<a name="l01336"></a>01336 
<a name="l01337"></a>01337     <a class="code" href="class_core_1_1_u_a_v_config_info.html" title="The Config Info is a helper-class to handle version changes in GCS configuration files.">UAVConfigInfo</a> configInfo;
<a name="l01338"></a>01338     <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> configName = plugin-&gt;metaObject()-&gt;className();
<a name="l01339"></a>01339 
<a name="l01340"></a>01340     qs-&gt;beginGroup(<span class="stringliteral">&quot;Plugins&quot;</span>);
<a name="l01341"></a>01341     qs-&gt;beginGroup(configName);
<a name="l01342"></a>01342     qs-&gt;beginGroup(<span class="stringliteral">&quot;data&quot;</span>);
<a name="l01343"></a>01343     plugin-&gt;<a class="code" href="class_core_1_1_i_configurable_plugin.html#afd0c67d4dbb9ff64ca7a3bed07eb5b66">saveConfig</a>(qs, &amp;configInfo);
<a name="l01344"></a>01344     qs-&gt;endGroup();
<a name="l01345"></a>01345     configInfo.<a class="code" href="group___core_plugin.html#ga285242175c9cff69e9370fa285744b28">save</a>(qs);
<a name="l01346"></a>01346     qs-&gt;endGroup();
<a name="l01347"></a>01347     qs-&gt;endGroup();
<a name="l01348"></a>01348 
<a name="l01349"></a>01349 }
<a name="l01350"></a>01350 
<a name="l01351"></a><a class="code" href="group___core_plugin.html#ga3bc533033d8d849099ecd1d2bb5d7b6f">01351</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga3bc533033d8d849099ecd1d2bb5d7b6f">MainWindow::deleteSettings</a>()
<a name="l01352"></a>01352 {
<a name="l01353"></a>01353     m_settings-&gt;clear();
<a name="l01354"></a>01354     m_settings-&gt;sync();
<a name="l01355"></a>01355     m_dontSaveSettings = <span class="keyword">true</span>;
<a name="l01356"></a>01356 }
<a name="l01357"></a>01357 
<a name="l01358"></a><a class="code" href="group___core_plugin.html#ga9175af5b201aed3337576aa33ff7e6f9">01358</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga9175af5b201aed3337576aa33ff7e6f9">MainWindow::addAdditionalContext</a>(<span class="keywordtype">int</span> context)
<a name="l01359"></a>01359 {
<a name="l01360"></a>01360     <span class="keywordflow">if</span> (context == 0)
<a name="l01361"></a>01361         <span class="keywordflow">return</span>;
<a name="l01362"></a>01362 
<a name="l01363"></a>01363     <span class="keywordflow">if</span> (!m_additionalContexts.contains(context))
<a name="l01364"></a>01364         m_additionalContexts.prepend(context);
<a name="l01365"></a>01365 }
<a name="l01366"></a>01366 
<a name="l01367"></a><a class="code" href="group___core_plugin.html#gae4a57783151dc82cd401ab8171eccfc6">01367</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#gae4a57783151dc82cd401ab8171eccfc6">MainWindow::removeAdditionalContext</a>(<span class="keywordtype">int</span> context)
<a name="l01368"></a>01368 {
<a name="l01369"></a>01369     <span class="keywordflow">if</span> (context == 0)
<a name="l01370"></a>01370         <span class="keywordflow">return</span>;
<a name="l01371"></a>01371 
<a name="l01372"></a>01372     <span class="keywordtype">int</span> index = m_additionalContexts.indexOf(context);
<a name="l01373"></a>01373     <span class="keywordflow">if</span> (index != -1)
<a name="l01374"></a>01374         m_additionalContexts.removeAt(index);
<a name="l01375"></a>01375 }
<a name="l01376"></a>01376 
<a name="l01377"></a><a class="code" href="group___core_plugin.html#gafd618f7b7c48a635b0c81f3e9f2a1866">01377</a> <span class="keywordtype">bool</span> <a class="code" href="group___core_plugin.html#gafd618f7b7c48a635b0c81f3e9f2a1866">MainWindow::hasContext</a>(<span class="keywordtype">int</span> context)<span class="keyword"> const</span>
<a name="l01378"></a>01378 <span class="keyword"></span>{
<a name="l01379"></a>01379     <span class="keywordflow">return</span> m_actionManager-&gt;<a class="code" href="group___core_plugin.html#ga6b861e343876351edf5d2fae24a5f0cb">hasContext</a>(context);
<a name="l01380"></a>01380 }
<a name="l01381"></a>01381 
<a name="l01382"></a><a class="code" href="group___core_plugin.html#ga63b04fba7b802e0b931cb68d4cf78968">01382</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#ga63b04fba7b802e0b931cb68d4cf78968">MainWindow::updateContext</a>()
<a name="l01383"></a>01383 {
<a name="l01384"></a>01384     QList&lt;int&gt; contexts;
<a name="l01385"></a>01385 
<a name="l01386"></a>01386     <span class="keywordflow">if</span> (m_activeContext)
<a name="l01387"></a>01387         contexts += m_activeContext-&gt;<a class="code" href="group___core_plugin.html#ga1256e28e719a9a981f779a0c77b59a7e">context</a>();
<a name="l01388"></a>01388 
<a name="l01389"></a>01389     contexts += m_additionalContexts;
<a name="l01390"></a>01390 
<a name="l01391"></a>01391     QList&lt;int&gt; uniquecontexts;
<a name="l01392"></a>01392     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; contexts.size(); ++<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>) {
<a name="l01393"></a>01393         <span class="keyword">const</span> <span class="keywordtype">int</span> c = contexts.at(<a class="code" href="_o_p_plots_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);
<a name="l01394"></a>01394         <span class="keywordflow">if</span> (!uniquecontexts.contains(c))
<a name="l01395"></a>01395             uniquecontexts &lt;&lt; c;
<a name="l01396"></a>01396     }
<a name="l01397"></a>01397 
<a name="l01398"></a>01398     m_actionManager-&gt;<a class="code" href="group___core_plugin.html#gaf1c3a6da903b910e7bf3b042d75f4f6d">setContext</a>(uniquecontexts);
<a name="l01399"></a>01399 }
<a name="l01400"></a>01400 
<a name="l01401"></a>01401 <span class="keywordtype">void</span> MainWindow::aboutToShowRecentFiles()
<a name="l01402"></a>01402 {
<a name="l01403"></a>01403     <a class="code" href="class_core_1_1_action_container.html">ActionContainer</a> *aci =
<a name="l01404"></a>01404         m_actionManager-&gt;<a class="code" href="group___core_plugin.html#ga3ec130bab28be18162ff49816e062c07">actionContainer</a>(<a class="code" href="group___core_plugin.html#gaa8324f1f075f171b33db9826a3b64b2b">Constants::M_FILE_RECENTFILES</a>);
<a name="l01405"></a>01405     <span class="keywordflow">if</span> (aci) {
<a name="l01406"></a>01406         aci-&gt;<a class="code" href="group___core_plugin.html#ga8e92377ca31ccb08155053b639c13059">menu</a>()-&gt;clear();
<a name="l01407"></a>01407 
<a name="l01408"></a>01408         <span class="keywordtype">bool</span> hasRecentFiles = <span class="keyword">false</span>;
<a name="l01409"></a>01409 
<a name="l01410"></a>01410         aci-&gt;<a class="code" href="group___core_plugin.html#ga8e92377ca31ccb08155053b639c13059">menu</a>()-&gt;setEnabled(hasRecentFiles);
<a name="l01411"></a>01411     }
<a name="l01412"></a>01412 }
<a name="l01413"></a>01413 
<a name="l01414"></a>01414 <span class="keywordtype">void</span> MainWindow::openRecentFile()
<a name="l01415"></a>01415 {
<a name="l01416"></a>01416     QAction *action = qobject_cast&lt;QAction*&gt;(sender());
<a name="l01417"></a>01417     <span class="keywordflow">if</span> (!action)
<a name="l01418"></a>01418         <span class="keywordflow">return</span>;
<a name="l01419"></a>01419     <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> fileName = action-&gt;data().toString();
<a name="l01420"></a>01420     <span class="keywordflow">if</span> (!fileName.isEmpty()) {
<a name="l01421"></a>01421     }
<a name="l01422"></a>01422 }
<a name="l01423"></a>01423 
<a name="l01424"></a>01424 <span class="keywordtype">void</span> MainWindow::aboutTauLabsGCS()
<a name="l01425"></a>01425 {
<a name="l01426"></a>01426     <span class="keywordflow">if</span> (!m_versionDialog) {
<a name="l01427"></a>01427         m_versionDialog = <span class="keyword">new</span> <a class="code" href="class_core_1_1_internal_1_1_version_dialog.html">VersionDialog</a>(<span class="keyword">this</span>);
<a name="l01428"></a>01428         connect(m_versionDialog, SIGNAL(finished(<span class="keywordtype">int</span>)),
<a name="l01429"></a>01429                 <span class="keyword">this</span>, SLOT(destroyVersionDialog()));
<a name="l01430"></a>01430     }
<a name="l01431"></a>01431     m_versionDialog-&gt;show();
<a name="l01432"></a>01432 }
<a name="l01433"></a>01433 
<a name="l01434"></a>01434 <span class="keywordtype">void</span> MainWindow::destroyVersionDialog()
<a name="l01435"></a>01435 {
<a name="l01436"></a>01436     <span class="keywordflow">if</span> (m_versionDialog) {
<a name="l01437"></a>01437         m_versionDialog-&gt;deleteLater();
<a name="l01438"></a>01438         m_versionDialog = 0;
<a name="l01439"></a>01439     }
<a name="l01440"></a>01440 }
<a name="l01441"></a>01441 
<a name="l01442"></a>01442 <span class="keywordtype">void</span> MainWindow::aboutTauLabsAuthors()
<a name="l01443"></a>01443 {
<a name="l01444"></a>01444     <span class="keywordflow">if</span> (!m_authorsDialog) {
<a name="l01445"></a>01445         m_authorsDialog = <span class="keyword">new</span> <a class="code" href="class_core_1_1_internal_1_1_authors_dialog.html">AuthorsDialog</a>(<span class="keyword">this</span>);
<a name="l01446"></a>01446         connect(m_authorsDialog, SIGNAL(finished(<span class="keywordtype">int</span>)),
<a name="l01447"></a>01447                 <span class="keyword">this</span>, SLOT(destroyAuthorsDialog()));
<a name="l01448"></a>01448     }
<a name="l01449"></a>01449     m_authorsDialog-&gt;show();
<a name="l01450"></a>01450 }
<a name="l01451"></a>01451 
<a name="l01452"></a>01452 <span class="keywordtype">void</span> MainWindow::destroyAuthorsDialog()
<a name="l01453"></a>01453 {
<a name="l01454"></a>01454     <span class="keywordflow">if</span> (m_authorsDialog) {
<a name="l01455"></a>01455         m_authorsDialog-&gt;deleteLater();
<a name="l01456"></a>01456         m_authorsDialog = 0;
<a name="l01457"></a>01457     }
<a name="l01458"></a>01458 }
<a name="l01459"></a>01459 
<a name="l01460"></a>01460 
<a name="l01461"></a>01461 <span class="keywordtype">void</span> MainWindow::aboutPlugins()
<a name="l01462"></a>01462 {
<a name="l01463"></a>01463     <a class="code" href="class_core_1_1_internal_1_1_plugin_dialog.html">PluginDialog</a> dialog(<span class="keyword">this</span>);
<a name="l01464"></a>01464     dialog.exec();
<a name="l01465"></a>01465 }
<a name="l01466"></a>01466 
<a name="l01467"></a><a class="code" href="group___core_plugin.html#gac3795529e7fd028195be00ec0187e6d5">01467</a> <span class="keywordtype">void</span> <a class="code" href="group___core_plugin.html#gac3795529e7fd028195be00ec0187e6d5">MainWindow::setFullScreen</a>(<span class="keywordtype">bool</span> on)
<a name="l01468"></a>01468 {
<a name="l01469"></a>01469     <span class="keywordflow">if</span> (<span class="keywordtype">bool</span>(windowState() &amp; Qt::WindowFullScreen) == on)
<a name="l01470"></a>01470         <span class="keywordflow">return</span>;
<a name="l01471"></a>01471 
<a name="l01472"></a>01472     <span class="keywordflow">if</span> (on) {
<a name="l01473"></a>01473         setWindowState(windowState() | Qt::WindowFullScreen);
<a name="l01474"></a>01474         <span class="comment">//statusBar()-&gt;hide();</span>
<a name="l01475"></a>01475         <span class="comment">//menuBar()-&gt;hide();</span>
<a name="l01476"></a>01476     } <span class="keywordflow">else</span> {
<a name="l01477"></a>01477         setWindowState(windowState() &amp; ~Qt::WindowFullScreen);
<a name="l01478"></a>01478         <span class="comment">//menuBar()-&gt;show();</span>
<a name="l01479"></a>01479         <span class="comment">//statusBar()-&gt;show();</span>
<a name="l01480"></a>01480     }
<a name="l01481"></a>01481 }
<a name="l01482"></a>01482 
<a name="l01483"></a>01483 <span class="comment">// Display a warning with an additional button to open</span>
<a name="l01484"></a>01484 <span class="comment">// the debugger settings dialog if settingsId is nonempty.</span>
<a name="l01485"></a>01485 
<a name="l01486"></a><a class="code" href="group___core_plugin.html#gaf0d1f8838353576747cfa4b184a6b2f4">01486</a> <span class="keywordtype">bool</span> <a class="code" href="group___core_plugin.html#gaf0d1f8838353576747cfa4b184a6b2f4">MainWindow::showWarningWithOptions</a>(<span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> &amp;title,
<a name="l01487"></a>01487                                         <span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> &amp;text,
<a name="l01488"></a>01488                                         <span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> &amp;details,
<a name="l01489"></a>01489                                         <span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> &amp;settingsCategory,
<a name="l01490"></a>01490                                         <span class="keyword">const</span> <a class="code" href="group___u_a_v_objects_plugin.html#gab9d252f49c333c94a72f97ce3105a32d">QString</a> &amp;settingsId,
<a name="l01491"></a>01491                                         QWidget *parent)
<a name="l01492"></a>01492 {
<a name="l01493"></a>01493     <span class="keywordflow">if</span> (parent == 0)
<a name="l01494"></a>01494         parent = <span class="keyword">this</span>;
<a name="l01495"></a>01495     QMessageBox msgBox(QMessageBox::Warning, title, text,
<a name="l01496"></a>01496                        QMessageBox::Ok, parent);
<a name="l01497"></a>01497     <span class="keywordflow">if</span> (details.isEmpty())
<a name="l01498"></a>01498         msgBox.setDetailedText(details);
<a name="l01499"></a>01499     QAbstractButton *settingsButton = 0;
<a name="l01500"></a>01500     <span class="keywordflow">if</span> (!settingsId.isEmpty() || !settingsCategory.isEmpty())
<a name="l01501"></a>01501         settingsButton = msgBox.addButton(tr(<span class="stringliteral">&quot;Settings...&quot;</span>), QMessageBox::AcceptRole);
<a name="l01502"></a>01502     msgBox.exec();
<a name="l01503"></a>01503     <span class="keywordflow">if</span> (settingsButton &amp;&amp; msgBox.clickedButton() == settingsButton) {
<a name="l01504"></a>01504         <span class="keywordflow">return</span> <a class="code" href="group___core_plugin.html#ga18a22906e317f7beddef59f9557a80ee">showOptionsDialog</a>(settingsCategory, settingsId);
<a name="l01505"></a>01505     }
<a name="l01506"></a>01506     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01507"></a>01507 }
</pre></div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="mainwindow_8cpp.html">mainwindow.cpp</a>      </li>

    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
